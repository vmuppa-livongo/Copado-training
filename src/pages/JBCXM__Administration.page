<!-- Copyright (c) 2011 JBara Software, Inc.
---- Purpose                    : Included as a tab in JBara Customer Experience App.
----                              Displays application metadata including various picklists and transaction types.
----                              User can Add/Edit/Delete any pick list and transaction type records them except system defined
----                              User can modify the order or map booking types with transaction types.
---- Other comments (optional)  : None
-->
<apex:page Controller="JBCXM.Administration" sidebar="false" title="Administration" extensions="JBCXM.OpportunityMap,JBCXM.OpportunityBookingTypeRules,JBCXM.NotifyAdminSchedulerController,JBCXM.GSCommonBroker,JBCXM.NSRemoting" tabStyle="Administration__tab">
    <apex:includeScript value="{!JSENCODE(URLFOR($Resource.JBCXM__GSVendor,'js/vendor/jquery/jquery-1.10.2.min.js'))}" />
    <apex:includeScript value="{!JSENCODE(URLFOR($Resource.JBCXM__GSVendor,'js/vendor/jquery/jquery-migrate-1.2.1.min.js'))}" />
    <apex:includeScript value="{!JSENCODE(URLFOR($Resource.JBCXM__GSVendor,'js/vendor/jquery/jquery-UI-1.10/js/jquery.ui.min.js'))}"/>
    <apex:includeScript value="{!JSENCODE(URLFOR($Resource.JBCXM__JqueryTablesorter, 'jquery.tablesorter.min.js'))}" />
    <style>
        body {
            font-family: "Proxima Nova Rg", sans-serif, arial !important;
            display : none;
        }
        :focus{
           outline:none;
        }
        .migration-status {
            background: #00b4e5;
            border-radius: 10px;
            color: #ffffff;
            padding: 2px 8px;
        }
        .surveyExtNPSMigrateBtn {
            background-color: transparent !important;
            cursor: pointer;
            padding: 6px 15px;
            color: #00b4e5;
            font-weight: normal;
            text-transform: uppercase;
            border: 0;
            font: 15px "Proxima Nova Rg",sans-serif;
        }
        .nav-ul {
            margin :0px;
        }
        .nav-li {
            float: left;
            margin :0px;
            margin-bottom: 2px;
        }
        .nav-li a{
            padding : 5px 10px;
            margin : 0px;
            background: #FAFBFF;
            font-size: 13px;
            border: 1px solid #ccc;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            color : black;
            height : 16px;
        }
        .nav-li img {
            height : 20px;
            margin-right: 4px;
            margin-top :-2px;
            vertical-align: middle;
        }
        .nav-li a:hover{
            text-decoration: none;
            color : black;
        }
        .SurveyPermCls{
            display:none;
        }
        .DashboardPermCls{
            display:none;
        }
        .statusMsg {
            padding: 8px;
            margin-bottom: 5px;
            border: 1px solid transparent;
            border-radius: 4px;
        }
        .marketo-connection-success {
            background-color: #dff0d8;
            border-color: #d6e9c6;
            color: #3c763d;
            font-size:14px;
        }
        .marketo-connection-fail {
            background-color: #f2dede;
            border-color: #ebccd1;
            color: #a94442;
            font-size:14px;
        }
        
        .gs-success {
            background: url("{!URLFOR($Resource.GSAppCSS)}/images/yes-mark.png") no-repeat;
            height: 16px;
            width: 16px;
            float: left;
            margin: 0 5px 0 0;
        }
        .gs-fail {
            background:url("{!URLFOR($Resource.GSAppCSS)}/images/no-mark.png") no-repeat;
            height: 16px;
            width: 16px;
            float: left;
            margin: 0 5px 0 0;
        }
        .gainsightLoadingIcon{
                background : url({!URLFOR($Resource.GSAppCSS)}/images/32x32.gif) no-repeat;
                width: 70px;
                height: 70px;
                position:relative;
                margin : auto;
                left: 0px;
                right : 0px;
                bottom :0px;
                top : 0px;
        }
        .bPageTitle .ptBody .content{
            width : auto;
        }
        
        .ui-dialog.rbDialogCls{
            padding: 0em  !important;
            border-radius: 0px !important;
            border: medium none;
        }
        .rbDialogCls .ui-corner-all{
            border-radius: 0px !important;
            background : #374353;
            border: medium none;
        }
        .migrateLRMBtn {
              padding: 10px;
          background: #ddd;
          display: inline-block;
          cursor: pointer;
          position: relative;
          left: 40%;
          margin-bottom: 10px;
        }
        .GsnapTab img {
            height: 16px;
            width: 18px;
        }
        .beta {
            color: rgb(255, 0, 0);
            display: inline-block;
            vertical-align: top;
            font-size: 9px;
            margin-left: 5px;
        }
        .AdministrationTabs .HeaderAdministrationTabs {
            display:none;
        }
        body .bPageBlock, body #bodyCell .bResource .secondaryPalette, body .secondaryPalette.bPageBlock{
           background-color: #FFF;
           border-radius: 3px;
           border: 0;
           padding-bottom:7px;
       }
       .bPageBlock .detailList tr td, .bPageBlock .detailList tr th,
       .hoverDetail .bPageBlock .detailList tr td, .hoverDetail .bPageBlock .detailList tr th {
           border-bottom:none;
       }
       .tdlabel{
           min-width:380px;
           max-width:380px;
       }
       .tdDescription{
           min-width:300px;
           max-width:300px;
       }
       .apexp .bPageBlock .detailList {
           width: 100%;
       }
       .apexp .bPageBlock .detailList td{
           height:10px;
       }
       #gs-app-container .gs-module-container form{
           background-color: #f0f3f6;
       }
       #gs-app-container .gs-module-container .gs-api-settingsList{
           padding: 5px 0 10px;
       }
       #gs-app-container .gs-module-container table.gs-ns-settingsList tr{
           height: 15px;
       }
       #gs-app-container .gs-module-container .detailList td.tdDescription + td.dataCol.first{
           min-width:135px;
       }
       .ui-tabs .ui-tabs-panel{
           padding-left:3em;
           background-color: #f0f3f6;
       }
       .listViewport .subNav .linkBar {
           background-color: #ffffff !important;
           border-top: none !important;
       }
       .bPageBlock.brandSecondaryBrd{
            border:0 !important;
            background: #fff;
        }
       .pbHeader{
            background: #f0f3f6 !important;
            border:none !important;
        }
        .pbHeader table{
            border: none !important;
        }
        .pbBody{
            margin: 0 !Important;
        }
        .pbBody table{
            border: none !important;
        }
        .pbBody table th{
            height: 40px;
            background-color: #fff !important;
            border:0 !Important;
            border-bottom: 2px solid #d3d6d9 !important;
            font-size: 15px !important;
            font-family: "Proxima Nova Semibold", sans-serif, arial !important;
            font-weight: normal !important;
        }
        .pbBody table tbody tr{
            height: 30px;
        }
        .bEditBlock .pbHeader>table>tbody>tr>td, .bPageBlock .pbHeader>table>tbody>tr>td,
        .bLayoutBlock .pbHeader>table>tbody>tr>td, .bEditBlock .pbBottomButtons>table>tbody>tr>td,
         .bPageBlock .pbBottomButtons>table>tbody>tr>td, .bLayoutBlock .pbBottomButtons>table>tbody>tr>td{
            padding: 10px 0px 10px 10px !important;
         }
        .btn, .btnDisabled {
            display: inline-block;
            line-height: 18px;
            cursor: pointer;
            background: #00b4e5 !important;
            padding: 6px 15px !important;
            color: #fff !important;
            font-weight: normal !important;
            text-transform: uppercase !important;
            border: 0 !important;
            height: 30px !important;
            font: 15px "Proxima Nova Rg",sans-serif !important;
        }
        .dummyAllAdminNewBtn.btnDisabled{
            background-color:#d9e0e9 !important;
            pointer-events: none;
            opacity:0.7 !important;
        }
        .external-nps-survey-disabled {
            position: relative;
            cursor: not-allowed;
        }
        .external-nps-survey-disabled span {
            background: #ececec;
            border: 1px solid #d3d6d9;
            color: #374353;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.16), 0 1px 3px 0 rgba(0, 0, 0, 0.26);
            position: absolute;
            top: 42px;
            width: 220px;
            right: 0;
            padding: 8px 20px;
            border-radius: 3px;
            display: none;
        }
        .external-nps-survey-disabled:hover span {
            display: block;
        }
        .external-nps-survey-disabled .disabled {
            color: #D3D6D9 !important;
         }
        .btn:hover{
            opacity: 0.7;
            border-radius: 3px;
        }
        .pbBody table th.labelCol.vfLabelColTextWrap{
            border-bottom: 0 !important;
            font-size: 14px !important;
            font-weight:normal !important;
            font-family: "Proxima Nova Semibold";
        }
        #InlineEditDialog_buttons .btn-save {
            background: transparent !important;
            color: #00b4e5 !important;
        }
        #InlineEditDialog_buttons .btn-cancel {
            background: transparent !important;
            color: #374353 !important
        }
        #InlineEditDialog_buttons .btn-save:hover, #InlineEditDialog_buttons .btn-cancel:hover {
            background: #D9e0e9 !important;
            text-decoration: none;
        }
        #InlineEditDialog_buttons .btn-save:hover {
            color: #00b4e5 !important;
        }
        .listViewportWrapper .listViewport .x-grid3-hd-row>td{
            vertical-align: middle !important;
            background: #fff !important;
            height: 40px !important;
            font-size: 15px !important;
            font-family: "Proxima Nova Semibold", sans-serif !important;
            font-weight: normal !important;
            border-right: 0 !important;
        }  
        .x-grid3-header{
            background: #fff !important;
            border-bottom: 1px solid #d3d6d9 !important;  
        }
        .listViewport{
            position:relative;
        }
        .listViewport .bottomNav{
            background: #fff !important;
        }    
        .listViewportWrapper .listViewport .listBody{
            border:0 !important;
        }    
        .paginator{
           font-family: "Proxima Nova Rg", sans-serif ;
           font-size: 13px  !important;
         }
     .paginator .pageInput{
        border:0 !important;
        border-bottom: 1px solid #d3d6d9  !important;
     }
     .overlayDialog .topLeft{
           background: #fff !important;
           height: 40px !important;
        }
            .nps-migration-ctn {
                max-height: 400px;
                overflow: auto;
                position: relative;
                min-height: 150px;
            }
            .gs-loader-container-32 {
                position: absolute;
                bottom: 50%;
                right: 50%;
                transform: translate(50%, 50%);
            }

             .nps-migrate-overlay  {
                position: relative;
             }
             .nps-migrate-overlay::before {
                 position: absolute;
                 top:0;
                 right:0;
                 left:0;
                 bottom: 0;
                 content:"";
                 background: rgba(0, 0, 0, .2);
                 z-index: 1;
             }
             /*Survey 1.0 Disabled styles*/
              .gs-feature-disabled {
                display: none;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                background: #fff;
                width: 100vw;
                margin-left: -60px;
                height: calc(100vh - 70px);
                 margin-top: -10px;
              }
               .gs-feature-flex {
                    display: flex;
               }
              .gs-feature-disabled h2 {
                margin-bottom: 10px;
                font-size: 18px;
              }
              .gs-feature-image {
                 background : url({!URLFOR($Resource.GSAppCSS)}/images/deprecated-image.svg) no-repeat;
                width: 182px;
                height: 177px;
              }
              .gs-feature-disabled p {
                width: 380px;
                margin-top: 0;
                text-align: center;
              }
              .gs-feature-disabled .gs-btn-raised {
                color: #fff !important;
              }
               .gs-non-deprecated {
                  display: none;
               }


    </style>
    <div id="gs-app-container">
        <div class="gs-module-container">
            <div class="gs-admin-container">
    <!--div style="height: 70px; width: 100%;">
            <div style='width: 50%'>
               <apex:sectionHeader title="Administration"/>
            </div>
            
    </div-->
    <!--div>
                <ul class ="nav-ul" style='overflow:auto' >
                
                    <li class="nav-li rulesTab"><a href="RulesManager"><img src="{!URLFOR($Resource.appStyles)}/img/rules-engine.png"/><span>Rules </span></a></li>
                    <li class = "nav-li integration"> <a href = "Integration" > <img style = "height: 16px; width: 16px" src = "{!URLFOR($Resource.appStyles)}/img/integration.png" /> <span>Integration</span></a> </li>
                    <li class = "nav-li"> <a href = "ReportBuilder#repository"> <img src = "{!URLFOR($Resource.appStyles)}/img/dashboard.png" /> <span>Reports 2.0</span></a> </li>
                    <li class = "nav-li snapshotTab" style = "display:none;"> <a href = "ReportManager" > <img src = "{!URLFOR($Resource.appStyles)}/img/qbr.png" /> <span>Success Snapshot</span></a> </li>
                    <li class = "nav-li workflowTab"> <a href = "WorkflowConfiguration" > <img src = "{!URLFOR($Resource.GSAppCSS)}/images/Admin_Cockpit.png" style="height:13px;" /> <span>Cockpit Configuration</span>  </a> </li>                
                    <li class = "nav-li"> <a href = "LayoutManager" > <img src = "{!URLFOR($Resource.appStyles)}/img/dashboard.png" /> <span>Layouts </span></a> </li>
                    <li class = "nav-li usageConfiguration"> <a href = "UsageConfiguration" ><img src = "{!URLFOR($Resource.GSAppCSS)}/images/adoption/usage_16.png" style="height:11px;"/><span> Usage Configuration </span> </a></li>
                    <li class = "nav-li"> <a href = "scorecardsetup" ><img src = "{!URLFOR($Resource.appStyles)}/img/scorecards.png" /><span>Scorecard </span> </a></li>
                    <li class = "nav-li"> <a href = "CaseSettings" > <img src = "{!JSENCODE(URLFOR($Resource.GSAppCSS,'images/CS360/360logo.png'))}" /><span>CS360 Sections</span> </a></li>
                    <li class = "nav-li"> <a href = "DashboardConfiguration" > <img src = "{!URLFOR($Resource.appStyles)}/img/insghts.png" /><span>Insights</span> </a></li>
                    <li class = "nav-li"> <a href = "ApplicationSettings" > <img src = "{!URLFOR($Resource.appStyles)}/img/settings.png" /> <span>Settings</span> </a> </li>
                    <li class = "nav-li LRMTab" style = "display:none;"> <a href = "LRMConfig" > <img src = "{!URLFOR($Resource.appStyles)}/img/settings.png" /> <span>LRM</span> </a> </li>
                    <li class = "nav-li RelationshipsTab" style = "display:none;"> <a href = "RelationshipConfig" > <img src = "{!URLFOR($Resource.appStyles)}/img/relationship_config.png" /> <span>Relationships</span> </a> </li>
                    <li class = "nav-li successplanTab"> <a href = "SuccessplansConfiguration" > <img src = "{!JSENCODE(URLFOR($Resource.GSAppCSS,'images/successplans/sucessplan-admin.png'))}" /> <span>Success Plan Configuration</span> </a> </li>
                    <li class = "nav-li"> <a href = "com" > <img src = "{!JSENCODE(URLFOR($Resource.GSAppCSS, 'images/com/com-admin.png'))}" /> <span>Data Management</span><span style="color: rgb(255, 0, 0); display: inline-block; vertical-align: top; font-size: 9px; margin-left: 5px;">BETA</span> </a> </li>
                    <li class = "nav-li ScorecardConfigTab"  style = "display:none;"> <a href = "ScorecardConfig" ><img src = "{!URLFOR($Resource.appStyles)}/img/scorecards.png" /><span>Scorecard for Relationships</span> <span style="color: rgb(255, 0, 0); display: inline-block; vertical-align: top; font-size: 9px; margin-left: 5px;">BETA</span> </a></li>
                    <li class = "nav-li"> <a href="GSEmailConfig" ><img src = "{!URLFOR($Resource.appStyles)}/img/emailconfig.png" /><span>Gainsight Email Configuration</span></a></li>
                </ul-->
                <!--  
                <a HREF="scorecardsetup">Scorecard</a>
                <a HREF="DashboardConfiguration"><img alt="Dashboard Configuration" title="Dashboard Configuration" class="pageTitleIconDashboard" src="/s.gif" /></a>
                <a HREF="ApplicationSettings"><img class="pageTitleIconAppSettings" title="Application Settings" alt="Application Settings" src="/s.gif"/></a>
                -->
            <!--/div-->

    <style>
        .message {
            background-color: #FFFFCC;
            border-style: solid;
            border-width: 1px;
            color: #000000;
            margin: 4px 12px;
            padding: 6px 8px 6px 6px;
        }
        .pageTitleIconAppSettings {
            background-image: url("/img/icon/custom51_100/gears32.png");
            background-position: 0 0;
            height: 32px;
            width: 32px;
        }
        .pageTitleIconDashboard{
            background-image: url("/img/sprites/master.png");
            background-position: 0 -1274px;
            height: 32px;
            width: 32px;
        }
        div.controlset {display: block; float:left; width: 100%; padding: 0.25em 0;}
        div.controlset label,
        div.controlset input,
        div.controlset div { display: inline; float: left; }
        div.form-container div.controlset label { width: 100px;}
        #tabs .ui-corner-all {
           border-radius:5px 5px 0px 0px;
           border-top:none;
           border-right:none;
           border-left:none;
        }
        #tabs .ui-widget-header {
            border:none;
            font-size:1em;
        }
        .ui-tabs .ui-tabs-nav {
            padding:0px;
            border:none;
        }
        .ui-tabs .ui-tabs-panel {
            display:block;
            border-width:0;
        }
        .HeaderAdministrationTabs{
             background:none;
        }
        .ui-state-active {
            border:1px solid #A6C9E2;
        }
        .ui-tabs .ui-tabs-nav li {
            border-bottom:0 none !important;
            float:left;
            list-style:none outside none;
            margin:0 5px 1px 0;
            padding:0;
            position:relative;
            top:1px;
            white-space:nowrap;
        }
        .ui-sort-position {
            text-align: center;
            font-size: 3.8em;
        }
        .listViewport .topNav .controls {
            display: none;
        }
        #Administration-NPS .pbBody a{
            color:#015BA7;
        }
        
        .BookingMapHeader {
            vertical-align: top;
        }
        
        /*Opportunity Map CSS Here */ 
        .dummyNonExistingBookingMap,.dummyExistingBookingMap {
            min-width: 230px;
            width: 100%;
        }
        
        select option,select optgroup {
            border-right: none;
            font-size: 100%;
        }
        
        .dummyRBtn,.dummyLBtn {
            cursor: pointer;
        }
        
        .jbaraErrorMessageClass{
            margin-top:20px;
            margin-bottom: 20px;
            margin-left: auto;
            margin-right: auto;
            width: 60%;
            padding: 10px;
        }
      .warningImageClass{
            background-image: url('/img/msg_icons/info16.png');
            width:16px;
            height:16px;
            display:inline-block;
            margin-bottom: 4px;
        } 
        .validationMsgClass{
            font-size:15px;
            font-family: "Proxima Nova Rg",sans-serif !important;
        }  
        
       .custom-ui-corner-all{
            border-radius: 5px;
        }
        .leftFloater {
            float: left;
        }
        .classFreq td {
            padding :3px;
        }
        .notiTableCommon .first {  
            font-size : 100% !important;
            font-weight: normal !important;
        }
        .leftPaddingErr {
            padding-left : 5px !important;
        }
        
        .rb_reportBuilder {
            font-size:14px; 
        }
        
        /*Opportunity Map Ends Here */  
        #AdministrationLog .btn.refreshListButton {
                background: url(/img/alohaSkin/sync.png) top left no-repeat !important;
                width: 22px !important;
                height: 23px !important;
        }
     </style>

     <script>
         var selectedTab;
        var dummyPicklistName;
        var dummyPicklistCategory;
        var dummyTransactionLineItem;
        var dummyFeatureItem;
        var selectedBookingTypeName = '';
        var statePreservString;
        var logTabSelected;
        var newStackURL = "{!(newStackURL)}";
        statePreservString      = eval({!(userStateDetailsJsonAdmin)});
        var isPackagedVersion = "{!(isPkgInstance)}"; //Clienside
        /** Variables to handle Notification configuration**/
        var allNotificationFields =  eval({!(userRefFieldsListJson)});
        var selectedNotificationFields = eval({!(selListOfUserFields)});
        selectedNotificationFields = selectedNotificationFields || [];
        var listOfUserFields = eval({!(selListOfUserFields)});
        listOfUserFields = listOfUserFields || [];
        var isNewLRMEnabled = {!(IsNewLRMEnabled)};
        var isRelationshipsEnabled = {!(IsRelationShipsEnabled)};
        var isRelScorecardEnabled = {!(IsRelScorecardEnabled)};
        var customerSearchConfig = {!(customerSearchConfig)};
        var GS = GS || {};
        GS.packageNS            = "{!(pkgNSInAdmin)}";
        GS.isPackagedInstance   = (GS.packageNS) ? "true" : "false";
        GS.userConfig = {
            userLocale  : {!(userLocaleDateFormatMap)},
            userName    : "{!$User.FirstName}"+" "+"{!$User.LastName}",
            userId      : "{!$User.Id}",
            emailId     : "{!$User.Email}",
            profilePhoto : "{!(profilePhoto)}",
            userDisplayName : "{!(userDisplayName)}",
            gainsightTabs: {!(churngainsightTabs)},
            isLightningEnabled: {!(isLightningEnabledInAdmin)}
        };
        GS.commonRemotingEndPoint     = '{!$RemoteAction.GSCommonBroker.gsCommonRequestBroker}';
        GS.remotingEndPoint           = '{!$RemoteAction.GSCommonBroker.gsCommonRequestBroker}';
        GS.remoting                 = "{!$RemoteAction.NSRemoting.apinsinvoke}";
        GS.sessionId                = "{!NSSessionId}";
        var nsChecksConfigflag = {!(isSuccessSnapshotEnabled)};
     </script>
  <apex:outputpanel rendered="{!If($CurrentPage.parameters.env == null , true, false)}">
      <c:AlertForm />
      <script>
         installResources({scripts: ["administration/scripts/administration.bundle.js"], styles:["administration/styles/administration.css"]});
      </script>
  </apex:outputpanel>
  <apex:outputpanel rendered="{!If($CurrentPage.parameters.env == "dev" , true, false)}">
     <script src = "https://localhost:9091/UI/administration/scripts/administration.bundle.js" />
     <link rel="stylesheet" type="text/css" href="https://localhost:9091/UI/administration/styles/administration.css" />
  </apex:outputpanel>

     <script type="text/javascript">
        window.j$ = jQuery.noConflict();
        window.jLatest = j$;



        if(nsChecksConfigflag === true) {
                j$(".snapshotTab").show();
            }
            else {
                j$(".snapshotTab").hide();
            }
        var validSelectedFields = [];

        for( var i = 0; i < selectedNotificationFields.length; i++) {
            if(allNotificationFields[selectedNotificationFields[i]]) {
                validSelectedFields.push(selectedNotificationFields[i]);
            }
        }
        var widgetJson = new Array();
                j$(document).ready(function() {
                 j$("body").show();




            var selectedIndex = (statePreservString.SubSection__c) ? j$.parseJSON(statePreservString.SubSection__c) : {};
            selectedIndex = (selectedIndex.index) ? selectedIndex.index : 0;
            j$('#tabs').tabs({ selected: selectedIndex, 
              create: function() {
                  var widget = j$(this).data('ui-tabs');
                  j$(window).on('hashchange', function() {
                      widget.option('active', widget._getIndex(location.hash));
                  });
              },
              activate :function(event, ui) {
                logTabSelected = j$(ui.newTab).text();
                if(logTabSelected=='Log'){
                    if(!ListViewport.instances['{!$component.AdministrationLog}'].grid){
                        ListViewport.instances['{!$component.AdministrationLog}'].init();
                    }
                    ListViewport.instances['{!$component.AdministrationLog}'].refreshList();
                }
                if(!{!(isLightningEnabledInAdmin)}){
                    top.location.href=j$(ui.newTab).find('a')[0];
                }

                statePreservString.SubSection__c = {};
                statePreservString.SubSection__c = {name: 'Administration',
                                                    index: ui.index};
                processEntireState();
                gainsightTrackEvents.pushPageViews('Administration - '+j$(ui.newTab).text() );
            }
            });
            systemDefinedCategories();
            j$("#tableSortable tbody").sortable().disableSelection();

            buildBookingTypeOpportunityRules();
            populateRevenueBandConfigDetails();//To populate revenue band list.
            widgetJson = eval({!(WidgetConfigJson)});
            buidWidgetConfigTable(widgetJson);
            buildTaskConfigSection();
            buildCSMFieldDD(allNotificationFields);
            displayNotificationCtl(allNotificationFields);
            gainsightTrackEvents.pushPageViews('Administration - '+j$(".ui-tabs-selected").find('a').text());

            j$(".rb_ChurnAnalyticsDashboard").click(function(event, ui) {
                j$("#reportBuilder").dialog({
                    modal: true,
                    resizable: false,
                    height: 100,
                    dialogClass: "rbDialogCls"
                });
            });

            if(isNewLRMEnabled === true) {
                j$(".LRMTab").show();
                j$(".admin-Transactions-li").hide();
            } else {
                j$(".LRMTab").hide();
                j$(".admin-Transactions-li").show();
            }

            //To toggle the Relationships navigation.
            if(isRelationshipsEnabled === true) {
                j$(".RelationshipsTab").show();
            } else {
                j$(".RelationshipsTab").hide();
            }
            //To toggle the Scorecard navigation.
            (isRelationshipsEnabled  === true && isRelScorecardEnabled === true) ? j$(".ScorecardConfigTab").show() : j$(".ScorecardConfigTab").hide();
            buildCustomerSearchGrid();
            j$("html,body").animate({scrollTop:0});
        });

        function getKey(key){
            return GS.packageNS + key
        }
        /*
        * Function used to build jbaraSelectCSMFieldCtrl select fro down
        */
        function buildCSMFieldDD( $dropdownList ) {
            var htmlStr = '';
            for(props in $dropdownList) {
                var isSelected = ($dropdownList[props] == '{!HTMLENCODE(csmFieldLabel)}') ? 'selected = "selected"' : '';
                htmlStr += '<option value = "'+props+'" '+isSelected+'>'+$dropdownList[props]+'</option>';
            }
            j$(".jbaraSelectCSMFieldCtrl").html(htmlStr);
        }
        /* function to capture CSM Field */
        function captureCSMField() {
            var dmyStr = (j$(".jbaraSelectCSMFieldCtrl").val() == 'None') ? '' : j$(".jbaraSelectCSMFieldCtrl").val();
            saveCSMFieldSettings(dmyStr, 'false')
            j$("#csmFieldLabel").html(j$(".jbaraSelectCSMFieldCtrl option:selected").text());
        }
         /**
         *This function is used to save the user state.
         */
         var actionTimer;
         function processEntireState() {
            clearTimeout(actionTimer);
            statePreservString.Name = 'Administration';
            statePreservString.SubSection__c = (typeof statePreservString.SubSection__c == 'string') ? statePreservString.SubSection__c :JSON.stringify(statePreservString.SubSection__c);
            actionTimer = setTimeout(function() {
                var dmyStr = (isPackagedVersion == "true") ? JSON.stringify(pushStatePreservationJbaraNameSpace(statePreservString)) : JSON.stringify(statePreservString);
                actionUpdateStatePreservation(dmyStr);
            }, 2000);
         }
        function buidWidgetConfigTable(widgetJson){

            var widgetHtml = '';
            var widgetAccTabs = [];
            var widgetOppTabs = [];

            for( var i = 0; i < widgetJson.length; i++){
                if(widgetJson[i].widgetName=='JBAccountWidget'){
                    if(widgetJson[i].visibilityMode== true){
                        widgetAccTabs.push(widgetJson[i].name);
                    }
                }
                else if(widgetJson[i].widgetName=='JBOpportunityWidget'){
                    if(widgetJson[i].visibilityMode== true){
                        widgetOppTabs.push(widgetJson[i].name);
                    }
                }
            }

            //removing the acct widget strip
            //widgetHtml += '<tr class="dataRow"><td style="width:15%;"><a style="color: #015BA7" href="WidgetTabsConfig?tabid={!JSENCODE($CurrentPage.parameters.sfdc.tabName)}&widget=account" class="actionLink">Edit</a></td><td style="width:20%;">Account</td><td style="width:65%;">'+widgetAccTabs+'</td></tr>';
            widgetHtml += '<tr class="dataRow"><td style="width:15%;"><a style="color: #015BA7" href="WidgetTabsConfig?tabid={!JSENCODE($CurrentPage.parameters.sfdc.tabName)}&widget=opp" class="actionLink">Edit</a></td><td style="width:20%;">Opportunity</td><td style="width:65%;">'+widgetOppTabs+'</td></tr>';
            j$(".jBaraWidgetSettingsTbody").html(widgetHtml);
        }
      
        function systemDefinedCategories(){
            j$("h2.mainTitle:contains('Customer Status')").append("<span style='color: rgb(255, 0, 0);'> (System Defined)</span>");
            //j$("h2.mainTitle:contains('Alert Status')").append("<span style='color: rgb(255, 0, 0);'> (System Defined)</span>");
            buidWidgetConfigTable(widgetJson)//Getting empty on save features.
        }

        function jbaraBookingTypeName(bookingTypeName){
            selectedBookingTypeName = bookingTypeName;
        }
        
        function saveAndRerenderCustomerSearch(data) {
            customerSearchConfig = data || customerSearchConfig;
            jbaraCloseOpportunityMapInputForm();
            buildCustomerSearchGrid();
        }
        //Opportunity Map Starts Here        
        function jbaraCloseOpportunityMapInputForm() {
              j$(".jbaraDummyOverLayForm").hide();
              j$(".inlineEditDialog").hide();
        }
      
       
        function saveAdminOppConnectorSettings(){
            removeDisabledForOppsettingsSaveBtn();                                  
            actionSaveAdminOppConnectorSettingsNames();  
        }
            
        function removeDisabledForOppsettingsSaveBtn(){
            j$(".dummyOppSettingsBtn").attr("disabled", true);
            j$(".dummyOppSettingsBtn").removeClass("btn").addClass("btnDisabled");
        }   
        function displayNotificationCtl($data) {
            var htmlStr = "";
            var ischecked = '';
            for(props in $data) {
                if(props != 'None') {
                    ischecked = (validSelectedFields.indexOf(props) != -1) ? 'checked' : '';
                    htmlStr += '<tr><td style = "text-align:center;"><input '+ischecked+' class = "notificationCheckBox" type = "checkbox" value = "'+props+'" /></td><td>'+$data[props]+'</td></tr>';
                }
            }   
            j$("#notificationFields").append(htmlStr);
        }
                                            
        //Opportunity Map Ends Here 
        
        function setHelpZindex() {
          j$(".helpText").css({
              'z-index': '6000',
              'position': 'fixed'
          })
       }
       //util function for all tranction types picklist catedgories and booking types overlay.
       function jbaraAllInputform(adminInputFormClass){
           selectedTab = j$("#tabs").tabs("option", "selected");
           j$("."+adminInputFormClass).draggable({
               handle: '.topRight'
           });
           var overLayHeight = j$(document).height();
           var overLayWidth = j$(window).width()
           j$(".jbaraDummyOverLayForm").css({
               'z-index': '4999',
               'left': 0,
               'position': 'fixed',
               'width': overLayWidth,
               'height': overLayHeight + 350,

           }).show();
           j$("."+adminInputFormClass).css({
               'z-index': '5000',
               'left': (screen.width / 5),
               'top': '30px',
               'position': 'fixed',
               'visibility': 'visible',
               'border': 'none'
           }).show();
           j$(".dummyAllAdminNewBtn").removeAttr("disabled");
           j$(".dummyAllAdminNewBtn").removeClass("btnDisabled").addClass("btn");   
       }

            //Showing Booking Type Opportunity Type Rules.
            function addHeaderHTML(){
                rulesFieldLabel= eval({!(rulesFieldsLabel)});
                strHTML  ='<thead class="rich-table-thead">';
                strHTML +='<tr class="headerRow">';
                strHTML +='<th class="headerRow  " scope="col" colspan="1" style="width:25%;">';
                strHTML +='<div>Gainsight Booking Type</div>';
                strHTML +='</th>';
                if(rulesFieldsList.indexOf(",")>0){
                    rulesFieldsItems= rulesFieldsList.split(",");
                }
                else {
                    rulesFieldsItems = new Array();
                    rulesFieldsItems.push(rulesFieldsList);
                }
                rulesFieldsCount = rulesFieldsItems.length;
                for(var Idx=0;Idx<rulesFieldsItems.length;Idx++){
                    strHTML +='<th class="headerRow" scope="col">';
                    if('RecordTypeId'==rulesFieldsItems[Idx]){
                        strHTML +='<div>Record Types</div>';
                    }
                    else{
                        strHTML +='<div>'+ getFieldLabel(rulesFieldsItems[Idx]) +'</div>';
                    }
                    strHTML +='</th>';
                }
                strHTML +='</thead>';
                j$("#tblRulesList").append(strHTML);

            }

            var hc= eval({!(headerConfig)});

         /* API call for SurveyV1 deprecate */
             function surveyV1Deprecated() {
                 var headers = {
                                 'Content-Type':'application/json',
                                 'appOrgId':hc.appOrgId,
                                 'appUserId':hc.appUserId,
                                 'appSessionId':hc.appSessionId
                               };
                 j$.ajax({
                                   type: 'GET',
                                   url: hc.gatewayURL + '/v1/surveys/featureFlag/SURVEY_V1_DEPRECATED',
                                   headers: headers,
                                  success: function(res) {
                                      if(res.data) {
                                        j$('.gs-non-deprecated').hide();
                                         j$('.gs-feature-disabled').addClass('gs-feature-flex');
                                      } else {
                                          j$('.gs-non-deprecated').show();
                                          j$('.gs-feature-disabled').hide();
                                      }
                                  },
                                    error: function(err) {
                                      console.log("Error: ", err.responseJSON. message);
                                       j$('.gs-non-deprecated').hide();
                                       j$('.gs-feature-disabled').addClass('gs-feature-flex');
                                  }
                                 });
             }

               surveyV1Deprecated();
              var npsV2URL;
              if(hc.isLightningEnabled) {
                 npsV2URL = '/lightning/n/'+ (GS.packageNS || '') +'SurveyV2';
              } else {
                 npsV2URL = '/apex/'+  (GS.packageNS || '') +'SurveyNative';
              }

              function redirectFeature() {
                 window.open(npsV2URL, '_blank');
              }

            /**
            *This function is used to To list the Revenue Band configuration.
            **/
            function populateRevenueBandConfigDetails() {
                var revenueBandConfigList = JSON.parse('{!JSENCODE(RevenueBandJson)}');
                var isRevenueBandConfigured = '{!(isRevenueBandConfigured)}';
                var uiCustomLablesMap       = {!(UICustomLabelsJSON)};
                if(isRevenueBandConfigured == 'true') {
                    j$('.RevenueBandConfigOn').html(''+uiCustomLablesMap.RevenueBand+' on : '+((revenueBandConfigList[0].type == "MRR__c") ? uiCustomLablesMap.MRR : uiCustomLablesMap.ASV)+'');

                    var htmlStr  ='<thead class="rich-table-thead">';
                    htmlStr +='<tr class="headerRow">';
                    htmlStr +='<th class="headerRow  " scope="col" colspan="1" style="width:25%;">';
                    htmlStr +='<div>Label</div>';
                    htmlStr +='</th>';
                    htmlStr +='<th class="headerRow  " scope="col" colspan="1" style="width:25%;">';
                    htmlStr +='<div>Minimum</div>';
                    htmlStr +='</th>';
                    htmlStr +='<th class="headerRow  " scope="col" colspan="1" style="width:25%;">';
                    htmlStr +='<div>Maximum</div>';
                    htmlStr +='</th></tr></thead>';
                    htmlStr +='<tbody>'
                    for(var i = 0; i < revenueBandConfigList.length; i++) {
                        htmlStr += '<tr class="dataRow">';
                        htmlStr += '<td class="dataCell" valign="top">'+escapeHTML(revenueBandConfigList[i].name)+'</td>';
                        htmlStr += '<td class="dataCell" valign="top">'+(((revenueBandConfigList[i].min) == 0) ? revenueBandConfigList[i].min : ((revenueBandConfigList[i].min)-1))+'+</td>';
                        htmlStr += '<td class="dataCell" valign="top">'+((revenueBandConfigList[i].max == null) ? '' : revenueBandConfigList[i].max) +'</td>';
                        htmlStr += '</tr>';
                    }
                    j$("#revenueBandList").html(htmlStr);
                }
                else {
                    j$("#noRevenueBandMessageDiv").show();
                }
            }

            function getFieldLabel(fldName){
                var fldLabel=fldName;
                for(var Ldx=0;Ldx<rulesFieldLabel.length;Ldx++){
                    var ItemFld= rulesFieldLabel[Ldx];
                    if(ItemFld.split('^')[0]==fldName){
                        fldLabel = ItemFld.split('^')[1];
                        break;
                    }
                }
                return fldLabel;
            }

            function addRulesHTML(){
                    strHTML ='<tbody id="rulesTbody"></tbody>';
                    j$("#tblRulesList").append(strHTML);
                    var rulesPerBookingType;
                    bookingType='';
                    var mapFilterValue;
                    for(var Mdx=0;Mdx<rulesBookingTypeMapItemList.length;Mdx++){
                        rulesPerBookingType = rulesBookingTypeMapItemList[Mdx].MapRules__c;
                        bookingType = rulesBookingTypeMapItemList[Mdx].JBaraField__c;
                        for(var Ndx=0;Ndx<rulesPerBookingType.length;Ndx++){
                            strHTML ='<tr class="dataRow filterRow JbaraRowFilter'+Mdx+Ndx+'"></tr>';
                            j$("#rulesTbody").append(strHTML);
                            strHTML ='<td class="dataCell filterBookingType" style="width:25%">'
                            strHTML +=dummyTransOTPLNameMapBySysNameJSONStr[rulesBookingTypeMapItemList[Mdx].JBaraField__c];
                            strHTML +='</td>';
                            j$(".JbaraRowFilter"+ Mdx +Ndx).append(strHTML);
                            for(var Fdx=0;Fdx<rulesPerBookingType[Ndx].mapRule.length;Fdx++){
                                mapFilterValue =rulesPerBookingType[Ndx].mapRule[Fdx].value;
                                if(rulesPerBookingType[Ndx].mapRule[Fdx].type=='RECORDTYPE'){
                                    if(mapFilterValue=='(jbara9999)'){
                                        strHTML ='<td class="dataCell filterCell" valign="top">Any</td>';
                                    }
                                    else {
                                        strHTML ='<td class="dataCell filterCell" valign="top">'+ getOppRecordTypeName(mapFilterValue) + '</td>';
                                    }
                                }
                                else if(rulesPerBookingType[Ndx].mapRule[Fdx].type=='CUSTOMPICKLIST'){
                                    mapFilterValue = j$.trim(mapFilterValue).substr(1, j$.trim(mapFilterValue).length-2);
                                    strHTML ='<td class="dataCell filterCell" valign="top">'+mapFilterValue.replace("jbara9999","Any")+'</td>';
                                }
                                else if(rulesPerBookingType[Ndx].mapRule[Fdx].type=='BOOLEAN'){

                                    if(j$.trim(mapFilterValue)=='true'){
                                        strHTML ='<td class="dataCell filterCell" valign="top">Yes</td>';
                                    }
                                    else {
                                        strHTML ='<td class="dataCell filterCell" valign="top">No</td>';
                                    }
                                }
                                else {
                                    strHTML ='<td class="dataCell filterCell" valign="top">'+mapFilterValue.replace("'","\\'")+'</td>';
                                }

                                j$(strHTML).appendTo(j$(".JbaraRowFilter"+ Mdx+ Ndx));
                            }


                        }

                    }


            }

            function getOppRecordTypeName(strIds){
                var strName='';
                if(strIds!=''){
                    strArrayIds= new Array();
                    strIds =j$.trim(strIds).split('(')[1].split(')')[0];
                    if(strIds.indexOf(',')>0){
                        strArrayIds = strIds.split(",");
                    }
                    else {
                        strArrayIds.push(strIds);
                    }

                    var oppRecordTypesJson =eval('{!oppRecordTypesJson}');
                    for(var Mdx=0;Mdx<strArrayIds.length;Mdx++){
                        for(var Cdx=0;Cdx<oppRecordTypesJson.length;Cdx++){
                            if(oppRecordTypesJson[Cdx].Id==strArrayIds[Mdx]){
                                strName += oppRecordTypesJson[Cdx].Name + ',';
                                break;
                            }
                        }
                    }
                    if(strName.indexOf(',')>0){
                        strName= strName.substring(0,strName.length-1);
                    }
                }

                return strName;
            }

            function buildCustomerSearchGrid() {
                var headerStr = "";
                var checked = '<img src="/img/checkbox_checked.gif" alt="Checked" width="21" height="16" class="checkImg" title="Checked">';
                var unchecked = '<img src="/img/checkbox_unchecked.gif" alt="Checked" width="21" height="16" class="checkImg" title="Checked">';
                var rowArr = [];
                if(!customerSearchConfig || !customerSearchConfig.length) {
                    customerSearchConfig = [{"displayOrder":0,"fieldType":"STRING","hasJBCXMNS":false,"isGroupable":false,"label":"Customer Name","name": getKey("CustomerName__c"),"objectName": getKey("CustomerInfo__c"),"visibilityMode":true,"includeInSearch":true}];
                }
                customerSearchConfig && customerSearchConfig.forEach(function(item) {
                    var checkbox = item.includeInSearch ? checked : unchecked;
                    var objName = (item.objectName === "Account" ? "Account" : "Customer Info") + " &rarr; ";
                    rowArr = ["<tr>","<td>", (objName + item.label), "</td>", "<td>",checkbox,"</td>","</tr>"];
                    headerStr += rowArr.join("");
                });

                j$("#customerSearchList tbody").html(headerStr);
            }

      </script>

     <apex:outputPanel id="jsPanel">
        <script type="text/javascript">
        
            //Script functions for picklist new and edit forms
            //Displays form for entering Admin details when clicked on new button.
            function jbaraShowNewAdminForm(category, adminInputFormClass) {
                j$(".dummyAllAdminNewBtn").removeAttr("disabled");
                j$(".dummyAllAdminNewBtn").removeClass("btnDisabled").addClass("btn");
                jbaraClearNewAdminForm();
                jbaraShowAdminForm('add',category,adminInputFormClass);
            }

            //Displays form for editing Admin details on clicking new button by passing parameters.
            function jbaraShowAdminForm(operationMode,categoryName,adminInputFormClass) {
                var val = categoryName;
                if (val == "Alert Severity" || val == "Alert Type" || val == "Adoption Measure Types" || val == "Alert Status") {
                        j$(".colorAttribute").show();
                        j$(".includeInWidget").show();
                        if(val == "Adoption Measure Types"){
                            j$(".DisplayOrderInputRequired").hide();
                            j$(".dummyIncludeInWidgetLabel").text("Usage Indicator");
                            j$(".UsageTrackingMeasureAttribute,.UsageGroupAdoptionAttribute,.UsageDefalutAdoptionAttribute").show();
                            j$(".AdoptionMeasureAttribute").show();
                        }
                        if(val == "Alert Status"){
                            j$(".includeInWidget").hide();
                            j$(".AlertStatusField").show();
                        }
                }else if(val == "Churn Reason" || val == "Alert Reason" || val == "Milestone"){
                    j$(".colorAttribute").show();
                    j$(".includeInWidget").hide();
                }else if(val == "Booking Type"){
                    j$(".colorAttribute").show();
                    j$(".mapToBookingType").show();                     
                    j$(".includeInWidget").hide();
                    j$(".activeTrClass").hide(); 
                    if(operationMode == 'edit'){
                        j$('.systemNameInputClass').attr("disabled", "disabled"); 
                    }                   
                }                
                else{
                     j$(".colorAttribute").hide();
                     j$(".includeInWidget").hide();
                }
                jbaraAllInputform(adminInputFormClass);
                j$('#jbaraColorPicker').colorPicker();
            }

            //Clears the previous values in the form.
            function jbaraClearNewAdminForm() {
                j$(".jbaraDummyAdminInputCtrl").val("");
                j$(".jbaraDummyAdminSelectCtrl").val("0");
                j$(".jbaraDummyAdminCheckboxCtrl").removeAttr('checked');
                j$("span[id*='jbaraAdminErrorMessages']").html("").hide();
            }

            //Hide the panel when the user clicks on save button.
            function jbaraAfterSaveClick() {
                j$(".dummyAllAdminSaveBtn").removeAttr("disabled");
                j$(".dummyAllAdminSaveBtn").removeClass("btnDisabled").addClass("btn");
                if ({!pickListValid}) {
                   jbaraCloseAdminInputForm();
                };
                j$("#tabs").tabs( {selected: selectedTab});
                systemDefinedCategories();
            }
            
            function jbaraAfterSaveLicensedUserClick() {
                j$(".dummyAllAdminSaveBtn").removeAttr("disabled");
                j$(".dummyAllAdminSaveBtn").removeClass("btnDisabled").addClass("btn");
                jbaraCloseAdminInputForm();
                j$("#tabs").tabs( {selected: selectedTab});
            }
            
            function jbaraAfterSaveSurveyPermissionsClick() {
                j$(".dummyAllAdminSaveBtn").removeAttr("disabled");
                j$(".dummyAllAdminSaveBtn").removeClass("btnDisabled").addClass("btn");
                jbaraCloseAdminInputForm();
                j$("#tabs").tabs( {selected: selectedTab});
            }
            
           function jbaraAfterSaveSurveyPermissionsClick() {
                //j$(".dummyAllAdminSaveBtn").removeAttr("disabled");
                //j$(".dummyAllAdminSaveBtn").removeClass("btnDisabled").addClass("btn");
                jbaraCloseAdminInputForm();
                j$("#tabs").tabs( {selected: selectedTab});
            }

            function jbaraAfterNPSMigrateClick() {
                j$(".dummyAllAdminSaveBtn").removeAttr("disabled");
                j$(".dummyAllAdminSaveBtn").removeClass("btnDisabled").addClass("btn");
                jbaraCloseAdminInputForm();
            }

            function jbaraAfterSaveDashboardPermissionsClick() {
                j$(".dummyAllAdminSaveBtn").removeAttr("disabled");
                j$(".dummyAllAdminSaveBtn").removeClass("btnDisabled").addClass("btn");
                jbaraCloseAdminInputForm();
                j$("#tabs").tabs( {selected: selectedTab});
            }
            
            function jbaraCloseAdminInputForm() {
                j$(".jbaraDummyOverLayForm").hide();
                j$(".jbaraDummyAdminInputForm").hide();
                j$(".jbaraDummyLicensedUsersSettingsForm").hide();   
                j$(".jbaraDummySurveyPermissionsForm").hide(); 
                j$(".jbaraDummySurveyAnalyticsPermissionsForm").hide();
                j$(".jbaraDummyDashboardPermissionsForm").hide();
                j$(".jbaraDummyEventConfigSettingsForm").hide();     
                j$(".jbaraDummyCSMFieldSettingsForm").hide();            
            }
            function disableBtn(obj) {
                j$(obj).attr("disabled", true);
                j$(obj).removeClass("btn").addClass("btnDisabled");
            }
            //Confirmation dialog before deleting
            function confirmDeleteItem(id,picklistCategory,picklistName) {
                dummyPicklistName = picklistName;
                dummyPicklistCategory = picklistCategory;
                selectedTab = j$("#tabs").tabs("option", "selected");
                if(picklistCategory=='Customer Stage'){
                    picklistCategory ='{!JSENCODE(saasMetricLabels['Stage'])}';
                }
                if(picklistCategory=='Milestones' || picklistCategory=='Adoption Measure Types'){
                    picklistCategory = picklistCategory.substring(0,picklistCategory.length-1)
                }
                
                if (confirm('Are you sure you want to delete "'+picklistName+'" '+picklistCategory+' ?')) deleteClicked(id);
            }

            //Rebuilds the Picklist Category when the user cliks on delete button.
            function jbaraAfterDeleteClick() {
                if (!{!isPickListDeleted}) {
                       j$('#tabs').tabs({ selected: selectedTab});
                       alert('This '+dummyPicklistCategory+' ("'+dummyPicklistName+'") is in use and cannot be deleted currently.');
                   }
                j$('#tabs').tabs({ selected: selectedTab});
                systemDefinedCategories();
            }



            //Script functions for Transaction Line new and edit forms
            //Displays form for entering Admin Transaction Line Items details when clicked on new button.
            function jbaraShowNewTransactionLineAdminForm(transactionLineInputFormClass) {
                j$(".dummyAllAdminNewBtn").removeAttr("disabled");
                j$(".dummyAllAdminNewBtn").removeClass("btnDisabled").addClass("btn");
                jbaraClearNewAdminTransactionTypeForm();
                jbaraShowTransactionLineAdminForm('add',transactionLineInputFormClass);
            }

            function jbaraCloseAdminTransactionLineInputForm() {
                j$(".jbaraDummyOverLayForm").hide();
                j$(".jbaraDummyAdminTransactionLineInputForm").hide();
            }

            //Displays form for editing Admin details on clicking new button by passing parameters.
            function jbaraShowTransactionLineAdminForm(operationMode,transactionLineInputFormClass) {
                jbaraAllInputform(transactionLineInputFormClass);
            }

            //Hide the panel when the user clicks on save button.
            function jbaraAfterTransactionLineSaveClick() {
                j$(".dummyAllAdminSaveBtn").removeAttr("disabled");
                j$(".dummyAllAdminSaveBtn").removeClass("btnDisabled").addClass("btn");
                if ({!transactionTypeValid}) {
                    jbaraCloseAdminTransactionLineInputForm();
                };
                j$("#tabs").tabs( {selected: selectedTab});
                systemDefinedCategories();
            }

            //Confirmation dialog before deleting
            function confirmTransactionTypeDelete(id,dummyTranLineName) {
                dummyTransactionLineItem = dummyTranLineName
                selectedTab = j$("#tabs").tabs("option", "selected");
                if (confirm('Are you sure you want to delete "'+dummyTransactionLineItem+'" Transaction Line Item ?')) deleteTransactionTypeClicked(id);
            }

            //Rebuilds the Transaction Type when the user cliks on delete button.
            function jbaraAfterTransactionTypeDeleteClick() {
                if (!{!isTransactionTypeDeleted}) {
                    j$('#tabs').tabs({ selected: selectedTab});
                    alert('This Transaction Line Item ("'+dummyTransactionLineItem+'") is in use and cannot be deleted currently.');
                }
                j$('#tabs').tabs({ selected: selectedTab});
                systemDefinedCategories();
            }

            //Clears the previous values in the form.
            function jbaraClearNewAdminTransactionTypeForm() {
                j$(".jbaraDummyAdminTransactionTypeInputCtrl").val("");
                j$(".jbaraDummyAdminTransactionTypeSelectCtrl").val("0");
                j$("span[id*='jbaraAdminTransactionLineItemsErrorMessages']").html("").hide();
            }
            
            function jbaraShowLicensedUsersAdminForm(licensedUsersFormClass) {
                j$(".licensedUsersSettingsBtn").removeAttr("disabled");
                j$(".licensedUsersSettingsBtn").removeClass("btnDisabled").addClass("btn");
                jbaraCloseAdminLicensedUsersInputForm();
                jbaraAllInputform(licensedUsersFormClass);
            }
            
            function jbaraCloseAdminLicensedUsersInputForm() {
                j$(".jbaraDummyOverLayForm").hide();
                j$(".jbaraDummyLicensedUsersSettingsForm").hide();
            }
            
            function jbaraSurveyPermissionsForm(surveyPermissionsFormClass) {
                j$(".surveyPermissionsSettingsBtn").removeAttr("disabled");
                j$(".surveyPermissionsSettingsBtn").removeClass("btnDisabled").addClass("btn");
                var surveyPerm = j$.parseJSON(j$(".surveyPermissionsCls").val());
                var surveyHTML = '<table width="100%" style="margin-bottom:15px;"  class="rounded-corner">';
                if(surveyPerm.length > 0){
                    for(var i = 0; i < surveyPerm.length; i++){
                        surveyHTML +='<tr id="'+surveyPerm[i].Id+'">';
                        surveyHTML +='<td class="header" width="25%">';
                        surveyHTML +=(surveyPerm[i].IsEnabled__c == true ? "Enabled Permissions" : 'Enable Permissions');
                        surveyHTML +='</td>';
                        surveyHTML +='<td width="25%">';
                        surveyHTML +='<input id="checkbox_id" type="checkbox" '+(surveyPerm[i].IsEnabled__c == true ? "checked" : "") + '/>';
                        surveyHTML +='</td>';
                        surveyHTML +='</tr>';
                    }
                }
                else{
                    surveyHTML +='<tr id="">';
                    surveyHTML +='<td class="header" width="25%">';
                    surveyHTML +='Enable Permissions';
                    surveyHTML +='</td>';
                    surveyHTML +='<td width="25%">';
                    surveyHTML +='<input id="checkbox_id" type="checkbox"/>';
                    surveyHTML +='</td>';
                    surveyHTML +='</tr>';   
                }                   
                surveyHTML += '</table>';                                                           
                j$('.surveyPermissionsSettingsCls').html(surveyHTML);   
                jbaraCloseSurveyPermissionsInputForm();
                jbaraAllInputform(surveyPermissionsFormClass);
            }

            function jbaraExtNPSMigrateForm(jbaraDummyExtNPSForm) {
                j$(".surveyExtNPSMigrateBtn").removeAttr("disabled");
                jbaraAllInputform(jbaraDummyExtNPSForm);
                j$('.nps-dialog').addClass("nps-migrate-overlay");
                document.querySelector('.nps-migration-ctn .loader').style.display = "block";
                //get external NPS here
                getMigratedSurveyList().then(function(data) {
                    var surveyCodes = data.data.map(function(d) {
                        return d.externalId;
                    });
                    var migrationStatus = document.querySelectorAll('.nps-migration-ctn .migration-status')
                    if(migrationStatus.length > 0){
                                        for(var i = 0; i < migrationStatus.length; i++){
                                            if (surveyCodes.indexOf(migrationStatus[i].getAttribute("data-id")) > -1)
                                                migrationStatus[i].style.visibility = "visible";
                                        }
                                    }
                    j$('.nps-dialog').removeClass("nps-migrate-overlay");
                    document.querySelector('.nps-migration-ctn .loader').style.display = "none";

                }, function() {
                    jbaraAllInputform(jbaraDummyExtNPSForm);
                    j$('.nps-dialog').removeClass("nps-migrate-overlay");
                    document.querySelector('.nps-migration-ctn .loader').style.display = "none";
                });
            }
            function getMigratedSurveyList(surveyIds) {
                var headers = {
                                'Content-Type':'application/json',
                                'appOrgId':GSGA.orgId,
                                'appUserId':GS.userConfig.userId,
                                'appSessionId':GS.sessionId
                              };
                return j$.ajax({
                                  type: 'GET',
                                  url: GS.gatewayURL + '/v1/surveys/list/EXTERNAL_NPS',
                                  headers: headers
                                });
            }
            function jbaraSurveyAnalyticsForm(surveyAnalyticsPermissionsFormClass) {

                j$(".surveyPermissionsSettingsBtn").removeAttr("disabled");
                j$(".surveyPermissionsSettingsBtn").removeClass("btnDisabled").addClass("btn");
                var surveyAnalyticsPerm = j$.parseJSON(j$(".surveyAnalyticsPermissionsCls").val());
                var surveyAnalyticsHTML = '<table width="100%" style="margin-bottom:15px;"  class="rounded-corner">';
                surveyAnalyticsHTML +='<tr id="surveyTextAnalyticsId">';
                surveyAnalyticsHTML +='<td class="header" width="25%">';
                surveyAnalyticsHTML +=(surveyAnalyticsPerm.isEnabled ? "Enabled Survey Analytics" : 'Enable Survey Analytics');
                surveyAnalyticsHTML +='</td>';
                surveyAnalyticsHTML +='<td width="25%">';
                surveyAnalyticsHTML +='<input id="checkbox_id" type="checkbox" '+(surveyAnalyticsPerm.isEnabled ? "checked" : "") + '/>';
                surveyAnalyticsHTML +='</td>';
                surveyAnalyticsHTML +='</tr>';
                surveyAnalyticsHTML += '</table>';
                j$('.surveyAnalyticsSettingsCls').html(surveyAnalyticsHTML);
                jbaraCloseSurveyPermissionsInputForm();
                jbaraAllInputform(surveyAnalyticsPermissionsFormClass);
            }
            
            function jbaraDashboardPermissionsForm(dashboardPermissionsFormClass) {
                j$(".dashboardPermissionsSettingsBtn").removeAttr("disabled");
                j$(".dashboardPermissionsSettingsBtn").removeClass("btnDisabled").addClass("btn");
                var dashboardPerm = j$.parseJSON(j$(".dashboardPermissionsCls").val());
                var dashboardHTML = '<table width="100%" style="margin-bottom:15px;"  class="rounded-corner">';
                if(dashboardPerm.length > 0){
                    for(var i = 0; i < dashboardPerm.length; i++){
                        dashboardHTML +='<tr id="'+dashboardPerm[i].Id+'">';
                        dashboardHTML +='<td class="header" width="25%">';
                        dashboardHTML +=(dashboardPerm[i].IsEnabled__c == true ? "Enabled" : 'Enable');
                        dashboardHTML +='</td>';
                        dashboardHTML +='<td width="25%">';
                        dashboardHTML +='<input id="checkbox_id" type="checkbox" '+(dashboardPerm[i].IsEnabled__c == true ? "checked" : "") + '/>';
                        dashboardHTML +='</td>';
                        dashboardHTML +='</tr>';
                    }
                }
                else{
                    dashboardHTML +='<tr id="">';
                    dashboardHTML +='<td class="header" width="25%">';
                    dashboardHTML +='Enable';
                    dashboardHTML +='</td>';
                    dashboardHTML +='<td width="25%">';
                    dashboardHTML +='<input id="checkbox_id" type="checkbox"/>';
                    dashboardHTML +='</td>';
                    dashboardHTML +='</tr>';    
                }                   
                dashboardHTML += '</table>';                                                            
                j$('.dashboardPermissionsSettingsCls').html(dashboardHTML); 
                jbaraCloseDashboardPermissionsInputForm();
                jbaraAllInputform(dashboardPermissionsFormClass);
            }
            
            function saveSurveyPermissionsSettingsClick(){
            
                var surveyPermissionsArr = new Array();
                var surveyPermissionsArrObj = new Object();
                var strNameSpace = getJbaraNameSpace();
                j$('.surveyPermissionsSettingsCls').find('table tr').each(function() {
                    surveyPermissionsArrObj = new Object();
                    surveyPermissionsArrObj.Id = (j$(this).attr("id")) ? j$(this).attr("id") : null;
                    surveyPermissionsArrObj.Name = 'SURVEY';
                    surveyPermissionsArrObj.IsEnabled__c = j$(this).find("#checkbox_id").is(":checked");                    
                    if(strNameSpace == ""){
                        surveyPermissionsArr.push(surveyPermissionsArrObj);
                    }
                    else{
                        surveyPermissionsArr.push(pushJbaraNameSpace(surveyPermissionsArrObj, strNameSpace));
                    }                   
                });
                saveSurveyPermissionsSettings(JSON.stringify(surveyPermissionsArr));
            }
            /* select all NPS surveys for migration */
            function checkAllMigrate(selectAll) {
                var migrateCheckboxes = document.querySelectorAll(".migrateNPSCheck input");
                for(var i=0; i<migrateCheckboxes.length; i++){
                    migrateCheckboxes[i].checked = selectAll.checked;
                }
            }
            /* uncheck all NPS surveys for migration */
            function unCheckAllMigrate() {
                var migrateCheckboxes = document.querySelectorAll(".migrateNPSCheck input");
                for(var i=0; i<migrateCheckboxes.length; i++){
                    migrateCheckboxes[i].checked = false;
                }
                document.querySelector(".migrateAllNPSCheck input").checked = false;

            }
            /* get all selected survey ids and call API */
            function migrateNPS(btn) {
                j$(".migration-fail").hide();
                var surveyIds = [];
                var migrateCheckboxes = document.querySelectorAll(".migrateNPSCheck input");
                for(var i=0; i<migrateCheckboxes.length; i++){
                    if(migrateCheckboxes[i].checked)
                        surveyIds.push(migrateCheckboxes[i].value);
                }
                if (surveyIds.length === 0) {
                    j$(".select-survey").show();
                    j$(btn).removeAttr("disabled");
                    j$(btn).removeClass("btnDisabled").addClass("btn");
                    return;
                }
                j$(".select-survey").hide();

                document.querySelector('.nps-migration-ctn .loader').style.display = "block";
                j$('.nps-dialog').addClass("nps-migrate-overlay");
                migrateExtNPS(surveyIds).then(function() {
                    jbaraCloseOpportunityMapInputForm();
                    j$(btn).removeAttr("disabled");
                    j$(btn).removeClass("btnDisabled").addClass("btn");
                    j$('.nps-dialog').removeClass("nps-migrate-overlay");
                    document.querySelector('.nps-migration-ctn .loader').style.display = "none";
                    unCheckAllMigrate();
                }, function() {
                    j$(btn).removeAttr("disabled");
                    j$(btn).removeClass("btnDisabled").addClass("btn");
                    j$(".migration-fail").show();
                    for(var i=0; i<migrateCheckboxes.length; i++){
                        migrateCheckboxes[i].checked = false;
                    }
                    j$('.nps-dialog').removeClass("nps-migrate-overlay");
                    document.querySelector('.nps-migration-ctn .loader').style.display = "none";
                    unCheckAllMigrate();
                });
            }
            /* API call for NPS migration */
            function migrateExtNPS(surveyIds) {
                var headers = {
                                'Content-Type':'application/json',
                                'appOrgId':GSGA.orgId,
                                'appUserId':GS.userConfig.userId,
                                'appSessionId':GS.sessionId
                              };
                return j$.ajax({
                                  type: 'POST',
                                  url: GS.gatewayURL + '/v1/surveys/external/SALESFORCE/importNPS',
                                  data: JSON.stringify({'surveyIds': surveyIds}),
                                  headers: headers
                                });
            }
            
            function saveCurrentSurveyAnalyticsSettings(schedulerId, isEnabled) {
                var surveyAnalyticsPermissionsArrObj = {"schedulerId" : schedulerId, "isEnabled" : isEnabled};
                saveSurveyAnalyticsSettings(JSON.stringify(surveyAnalyticsPermissionsArrObj));
            
            }
            
            function generateErrorMessage(error){
                var baseErrMsg = 'Save Failed. ';
                if(typeof error.statusText == 'string'){
                    baseErrMsg = baseErrMsg + error.statusText + '. ';
                }
                if('responseJSON' in error){
                    if(typeof error.responseJSON == 'object' && error.responseJSON !== null){
                        if('errorDesc' in error.responseJSON){
                            if(typeof error.responseJSON.errorDesc == 'string'){
                                baseErrMsg = baseErrMsg + error.responseJSON.errorDesc+'.';
                            }
                        }
                    }
                }

                return baseErrMsg;
            }
            
            function saveSurveyAnalyticsSettingsClick(){
                var enableState = j$('.surveyAnalyticsSettingsCls').find('table tr #checkbox_id').is(":checked");
                var surveyAnalyticsPerm = j$.parseJSON(j$(".surveyAnalyticsPermissionsCls").val());

                if(surveyAnalyticsPerm.isEnabled == enableState){
                    j$('#surveySaveStateInfo').html('Saving configuration.').css('color', '#676767');
                    setTimeout(function(){
                        j$(".jbaraDummyOverLayForm").hide();
                        j$(".jbaraDummySurveyAnalyticsPermissionsForm").hide();
                    }, 1000);

                } else {
                    j$('#surveySaveStateInfo').html('Saving configuration.').css('color', '#676767');
                    if(enableState){
                        saveSurveyAnalyticsSettingsToScheduler().then(
                                  function(resultData) {
                                    console.log("resultData when save is successful", resultData);
                                    j$('#surveySaveStateInfo').html('Save Successful.').css('color', 'green');
                                    saveCurrentSurveyAnalyticsSettings(resultData.data.scheduleId, true);
                                   },
                                  function(error){
                                    console.log('errorMsg when save fails', error);
                                    j$('#surveySaveStateInfo').html(generateErrorMessage(error)).css('color', 'red');
                                  }
                              );
                    } else {
                        deleteSurveyAnalyticsSettingsInScheduler(surveyAnalyticsPerm.schedulerId).then(
                                  function(resultData) {
                                    console.log("resultData when delete is successful", resultData);
                                    j$('#surveySaveStateInfo').html('Save Successful.').css('color', 'green');
                                    saveCurrentSurveyAnalyticsSettings(surveyAnalyticsPerm.schedulerId, false);
                                   },
                                  function(error){
                                    console.log('errorMsg when delete fails', error);
                                    j$('#surveySaveStateInfo').html(generateErrorMessage(error)).css('color', 'red');
                                  }
                              );
                    }
                }

            } 
            
            function deleteSurveyAnalyticsSettingsInScheduler(schedulerId){
                var schedulerUrl = newStackURL + '/api/schedule/' + schedulerId;
                var schedulerHeader = {
                                        'Content-Type':'application/json',
                                        'appOrgId':GSGA.orgId,
                                        'appUserId':GS.userConfig.userId,
                                        'appSessionId':GS.sessionId
                                      };

                return j$.ajax({
                          type: 'DELETE',
                          url: schedulerUrl,
                          headers: schedulerHeader
                        });

            }
            
            function saveSurveyAnalyticsSettingsToScheduler(){
                var schedulerUrl = newStackURL + '/api/schedule';
                var dataForScheduler = {
                                          "title": "sfdc_ds_survey",
                                          "inactive": false,
                                          "type": "CRON",
                                          "cronExpression": "0 0 11 1/1 * ? *",
                                          "timeZoneName": "America/Los_Angeles",
                                          "emailIdList": [

                                          ],
                                          "emailIdListSuccess": [

                                          ],
                                          "pastRunsAlso": false,
                                          "startTime": (new Date()).getTime(),
                                          "endTime": 0,
                                          "jobType": "DS_SURVEY_TEXT_ANALYTICS",
                                          "jobIdentifier": "86d06a57-686c-4683-be06-e8411d1af123"
                                      };

                var schedulerHeader = {
                                        'Content-Type':'application/json',
                                        'appOrgId':GSGA.orgId,
                                        'appUserId':GS.userConfig.userId,
                                        'appSessionId':GS.sessionId
                                      };

                    return j$.ajax({
                              type: 'POST',
                              url: schedulerUrl,
                              data: JSON.stringify(dataForScheduler),
                              headers: schedulerHeader,
                              dataType: "json"
                              });
            }
            
            function saveDashboardPermissionsSettingsClick(isEnabled){
                var dashboardPermissionsArr = new Array();
                var dashboardPermissionsArrObj = new Object();
                var strNameSpace = getJbaraNameSpace();
                var dashboardPerm = j$.parseJSON(j$(".dashboardPermissionsCls").val());
                dashboardPermissionsArrObj = new Object();
                if(dashboardPerm[0] && dashboardPerm[0].Id){
                    dashboardPermissionsArrObj.Id = dashboardPerm[0].Id;
                }
                dashboardPermissionsArrObj.Name = 'DASHBOARD';
                dashboardPermissionsArrObj.IsEnabled__c = isEnabled;
                if(strNameSpace == ""){
                    dashboardPermissionsArr.push(dashboardPermissionsArrObj);
                }else{
                    dashboardPermissionsArr.push(pushJbaraNameSpace(dashboardPermissionsArrObj, strNameSpace));
                }
                saveDashboardPermissionsSettings(JSON.stringify(dashboardPermissionsArr));
            } 
                       
            function pushJbaraNameSpace(item, nameSpacePrefix) {
                for (var key in item) {
                    if (key != 'Id' && key != 'Name') {
                        item[nameSpacePrefix + key] = item[key];
                        delete item[key];
                    }
                }
                return item;
            }
    
            function getJbaraNameSpace() {
                var strFieldName = "{!$ObjectType.JBCXM__Alert__c.Fields.JBCXM__Date__c.Name}";
                if (j$.trim(strFieldName.split('Date__c')[0]) != '') {
                    return j$.trim(strFieldName.split('Date__c')[0]);
                } else {
                    return '';
                }
            }
        
            function jbaraCloseSurveyPermissionsInputForm() {
                j$(".jbaraDummyOverLayForm").hide();
                j$(".jbaraDummySurveyPermissionsForm").hide();
                j$(".jbaraDummySurveyAnalyticsPermissionsForm").hide();
            }
            
            function jbaraCloseDashboardPermissionsInputForm() {
                j$(".jbaraDummyOverLayForm").hide();
                j$(".jbaraDummyDashboardPermissionsForm").hide();
            }
            
            //script for CSM Field popup
            function jbaraShowCSMAdminForm(csmUsersFormClass) {
                j$(".csmFieldSettingsBtn").removeAttr("disabled");
                j$(".csmFieldSettingsBtn").removeClass("btnDisabled").addClass("btn");
                jbaraCloseCSMFieldSettingForm();
                jbaraAllInputform(csmUsersFormClass);
            }
            
            //script for Notification Field popup 
            function jbaraShowNotiForm(csmUsersFormClass) {
                j$(".notiFieldSettingsBtn").removeAttr("disabled");
                j$(".notiFieldSettingsBtn").removeClass("btnDisabled").addClass("btn");
                jbaraCloseNotiForm();
                jbaraAllInputform(csmUsersFormClass);
            }
            
            function jbaraCloseNotiForm() {
                j$(".jbaraDummyOverLayForm").hide();
                j$(".jbaraDummyNotifSettingsForm").hide();
                j$(".dummyNotiSettingsSaveBtn").removeAttr("disabled");
                j$(".dummyNotiSettingsSaveBtn").removeClass("btnDisabled").addClass("btn");
            }
            //Function to show Gainsight notification configuration form - azhar
             function jbaraShowNotiFreqForm(csmUsersFormClass) {
                j$(".notiFieldSettingsBtn").removeAttr("disabled");
                j$(".notiFieldSettingsBtn").removeClass("btnDisabled").addClass("btn");
                jbaraCloseNotiForm();
                jbaraAllInputform(csmUsersFormClass);
            }
            function jbaraCloseNotiFreqForm() {
                j$(".jbaraDummyOverLayForm").hide();
                j$(".jbaraDummyNotifFreqSettingsForm").hide();
                j$(".dummyFreqSaveBtn").removeAttr("disabled");
                j$(".dummyFreqSaveBtn").removeClass("btnDisabled").addClass("btn");
            }
            // function to save selected Fields for notification
            
            function collectSelectedFieldsNoti() {
                var finalNotiList = [],
                    finalNotiObj = {}, 
                    notiDumpArray = [];
                j$(".notificationCheckBox").each(function() {
                    if(j$(this).is(":checked")) {
                        notiDumpArray.push(j$(this).val())
                    }
                });
                var dmyStr = JSON.stringify(notiDumpArray);
                validSelectedFields = notiDumpArray;
                saveNotificationSettings(dmyStr, 'true');
                push2MessengerApp(validSelectedFields);
            }

            function push2MessengerApp(fields){
                var xhr = new XMLHttpRequest();
                xhr.open("POST", GS.gatewayURL + "/v1/messenger/sfdc/admin/settings");
                xhr.setRequestHeader("appOrgId", GS.orgDetails[0].Id);
                xhr.setRequestHeader("appSessionId", GS.sessionId);
                xhr.setRequestHeader("appUserId", GS.userConfig.userId);
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.send(JSON.stringify(fields));
            }

            function jbaraCloseCSMFieldSettingForm() {
                j$(".jbaraDummyOverLayForm").hide();
                j$(".jbaraDummyCSMFieldSettingsForm").hide();
            }
            function jbaraAfterSaveCSMFieldClick() {
                j$(".dummyAllAdminSaveBtn").removeAttr("disabled");
                j$(".dummyAllAdminSaveBtn").removeClass("btnDisabled").addClass("btn");
                jbaraCloseAdminInputForm();
                j$("#tabs").tabs( {selected: selectedTab});
            }
            
            //Script functions for Feature new and edit forms
            //Displays form for entering Admin Feature Items details when clicked on new button.
            function jbaraShowNewFeatureAdminForm(featureInputFormClass) {
                j$(".dummyAllAdminNewBtn").removeAttr("disabled");
                j$(".dummyAllAdminNewBtn").removeClass("btnDisabled").addClass("btn");
                jbaraClearNewAdminFeatureForm();
                jbaraShowFeatureAdminForm('add',featureInputFormClass);
            }
            function jbaraCloseAdminFeatureInputForm() {
                j$(".jbaraDummyOverLayForm").hide();
                j$(".jbaraDummyAdminFeatureInputForm").hide();
            }

            //Displays form for editing Admin details on clicking new button by passing parameters.
            function jbaraShowFeatureAdminForm(operationMode,featureInputFormClass) {
                jbaraAllInputform(featureInputFormClass);
            }
            
            //Clears the previous values in the form.
            function jbaraClearNewAdminFeatureForm() {
                j$(".jbaraDummyAdminFeatureInputCtrl").val("");
                j$(".jbaraDummyAdminFeatureSelectCtrl").val("0");
                j$("span[id*='jbaraAdminFeatureErrorMessages']").html("").hide();
            }
            
            
            //Hide the panel when the user clicks on save button.
            function jbaraAfterFeatureSaveClick() {
                j$(".dummyAllAdminSaveBtn").removeAttr("disabled");
                j$(".dummyAllAdminSaveBtn").removeClass("btnDisabled").addClass("btn");
                if ({!isFeatureValid}) {
                    jbaraCloseAdminFeatureInputForm();
                };
                j$("#tabs").tabs( {selected: selectedTab});
                systemDefinedCategories();
            }

            //Confirmation dialog before deleting
            function confirmFeatureDelete(id,dummyFeatureName) {
                dummyFeatureItem = dummyFeatureName
                selectedTab = j$("#tabs").tabs("option", "selected");
                if (confirm('Are you sure you want to delete "'+dummyFeatureName+'" Feature ?')) deleteFeatureClicked(id);
            }
 
            //Rebuilds the Feature  when the user cliks on delete button.
            function jbaraAfterFeatureDeleteClick() {
                if (!{!isFeatureDeleted}) {
                    j$('#tabs').tabs({ selected: selectedTab});
                    alert('This Feature ("'+dummyFeatureItem+'") is in use and cannot be deleted currently.');
                }
                j$('#tabs').tabs({ selected: selectedTab});
                systemDefinedCategories();
            }
            
            //Confirmation dialog before deleting UIView
            function confirmUIViewDelete(id,dummyUITabName) {
                selectedTab = j$("#tabs").tabs("option", "selected");
                if (confirm('Are you sure you want to delete "'+dummyUITabName+'" UI View ?')) deleteUIViewClicked(id);
            }
            //ability to side visiblity for only standard views @Author Azhar
            
            function toggleUIViewVisibility(thisPtr, viewId) {
                var dmS = (j$(thisPtr).attr("data-cs") == 'Hide') ? 'Show' : 'Hide';
                actionfunctionToToggleVisbiily(viewId, j$(thisPtr).attr("data-cs"));
                j$(thisPtr).attr("data-cs", dmS).html(dmS).attr('title',(dmS == 'Show') ? 'Click to show' : 'Click to hide');
                
            }  
            //Rebuilds the UIView  when the user cliks on delete button.
            function jbaraAfterUIViewDeleteClick() {
                j$('#tabs').tabs({ selected: selectedTab});
                systemDefinedCategories();
            }

            //Script functions for Booking Types mapping with transaction types.
            //Displays form for editing Booking Types Admin details on clicking new button by passing parameters.
            function jbaraShowBookingTypesAdminForm(bookingTypesInputForm) {
                j$("#tableSortable tbody").sortable({
                    cursor: "move",
                    placeholder: "ui-state-highlight ui-sort-position"
                }).disableSelection();
                jbaraAllInputform(bookingTypesInputForm);
                j$('h2.dummyBookingTypeName').html('Map "Transaction Line Items" for "'+selectedBookingTypeName+'"');
            }

            //Close function for booking types input form.
            function jbaraCloseAdminBookingTypesInputForm() {
                j$(".jbaraDummyOverLayForm").hide();
                j$(".jbaraDummyAdminBookingTypesInputForm").hide();
            }
        
            //Save the booking types map.
            function saveAdminBookingTypes(){
                var bookingTypeMapIds='';
                    j$(".jbaraDummyOrderType:checkbox").each(function() {
                        if(j$(this).is(':checked')){
                            if(bookingTypeMapIds==''){
                                bookingTypeMapIds=j$(this).next().val() ;
                            }
                            else{
                                bookingTypeMapIds += ','+j$(this).next().val();
                            }
                        }
                    });
                j$(".jbaraDummyOrderBookingTypeMapIds").val(bookingTypeMapIds);
                actionSaveAdminBookingTypes();
            }

            //set order id for edit.
            function setOrderIdForEdit(orderId){
                j$(".jbaraDummyEditOrderId").val(orderId);
            }

            //Sets the selected tab after save booking transactions map.
            function jbaraAfterAdminBookingSaveClick(){
                j$(".jbaraDummyOverLayForm").hide();
                j$(".jbaraDummyAdminBookingTypesInputForm").hide();
                j$("#tabs").tabs( {selected: selectedTab});
                systemDefinedCategories();
            }
            
            
            function newUIViewBtnClicked(){
                window.top.location.href='/apex/UIViewsForm?tabid={!JSENCODE($CurrentPage.parameters.sfdc.tabName)}';
            }
            function editUIViewBtnClicked(id){
               window.top.location.href='/apex/UIViewsForm?tabId={!JSENCODE($CurrentPage.parameters.sfdc.tabName)}&viewId='+id;
            }
            function mapLabelsBtnClicked(){
                window.top.location.href='/apex/CustomLabelsForm?tabid={!JSENCODE($CurrentPage.parameters.sfdc.tabName)}';
            }
            
            function editOppConnectorSettingsClicked(){
                window.top.location.href='/apex/OpportunityConnectorSettings?tabid={!JSENCODE($CurrentPage.parameters.sfdc.tabName)}';
            }
            
            function editOppTransactionBookingMapClicked(){
                window.top.location.href='/apex/OpportunityBookingTypeRules?tabid={!JSENCODE($CurrentPage.parameters.sfdc.tabName)}';
            }            
            
            function editOppJBaraHeaderClicked(){
                window.top.location.href='/apex/OpportunityMap?tabid={!JSENCODE($CurrentPage.parameters.sfdc.tabName)}';
            }
            function editOppLineItemClicked(){
                window.top.location.href='/apex/OpportunityMap?tabid={!JSENCODE($CurrentPage.parameters.sfdc.tabName)}&showPnl=jbaraLineItems';
            }
            function adoptionDataConfigClicked(){
                    window.top.location.href='/apex/UsageConfiguration?tabid={!JSENCODE($CurrentPage.parameters.sfdc.tabName)}';
            }
            
            function editRevenueBandConfingClicked() {
                window.top.location.href='/apex/RevenueBandConfig?tabid={!JSENCODE($CurrentPage.parameters.sfdc.tabName)}';
            }
            
            function surveyLanguagesBtnClicked(){
                window.location.href='/apex/SurveyDesign?tabid={!JSENCODE($CurrentPage.parameters.sfdc.tabName)}';
            }
            
            //Showing Booking Type Opportunity Type Rules.  
            function buildBookingTypeOpportunityRules() {
                j$("#tblRulesList").html('');
                rulesFieldsList= '{!(rulesFields)}';
                dummyTransOTPLNameMapBySysNameJSONStr = eval({!(transOTPLNameMapBySysNameJSONAdmin)});              
                if(rulesFieldsList!=''){
                    j$("#rulesFormDiv").show();
                    j$("#noFieldsMessageDiv").hide();
                    jBaraBookingTypes = eval('{!(jBaraBookingTypes)}');
                    rulesBookingTypeMapItemList =eval('{!(rulesBookingTypeMapJson)}');
                    if(rulesBookingTypeMapItemList.length==0){
                        j$("#noRulesMessageDiv").show();
                        j$("#rulesFormDiv").hide();
                        j$("#noFieldsMessageDiv").hide();
                    }
                    else {
                        blnRuleFound=false;
                        for(var Mdx=0;Mdx<rulesBookingTypeMapItemList.length;Mdx++){
                                if(rulesBookingTypeMapItemList[Mdx].MapRules__c.length>0){
                                    blnRuleFound =true;
                                    break;
                                }
                        }
                        if(blnRuleFound){
                            addHeaderHTML();
                            addRulesHTML();
                        }
                        else {
                            j$("#noRulesMessageDiv").show();
                            j$("#rulesFormDiv").hide();
                            j$("#noFieldsMessageDiv").hide();
                        }   
                    }
                    
                }
                else{
                    j$("#noFieldsMessageDiv").show();
                    j$("#rulesFormDiv").hide();
                }
            }
            
            function buildTaskConfigSection(){
                var sfTaskLinked= "{!(sfTaskLinked)}";
                var existingFieldJson= eval({!(taskFieldsJson)});
                if(sfTaskLinked=='true'){
                    j$(".rbtnSFTask").attr("checked","checked");
                }
                else{
                    j$(".rbtnCSTask").attr("checked","checked");
                    
                }
                j$(".rbtnSFTask,.rbtnCSTask").attr("disabled","disabled");
                var taskHTML;
                var defaultExistingVal;
                var defValueList;
                for(var Ndx=0;Ndx<existingFieldJson.length;Ndx++){
                    defValueList='';
                    taskHTML  ='<tr class="dataRow">';
                    taskHTML  +='<td class="dataCell">'+ existingFieldJson[Ndx].fieldName+ '</td>';
                    taskHTML  +='<td class="dataCell">'+ existingFieldJson[Ndx].label + '</td>';
                    taskHTML  +='<td class="dataCell">';
                    if((existingFieldJson[Ndx].value).length>0){
                        defValueList ='';
                        defaultExistingVal = existingFieldJson[Ndx].value;
                        for(var Pdx=0;Pdx<defaultExistingVal.length;Pdx++){
                            defValueList +=defaultExistingVal[Pdx].value + ',';
                        }
                        defValueList =defValueList.substring(0,defValueList.length-1);
                    }
                    if(existingFieldJson[Ndx].fieldType=='BOOLEAN'){
                        defValueList = (defValueList=='true')? 'Yes' : 'No';
                    }
                    taskHTML  += defValueList;
                    taskHTML  +='</td>';
                    taskHTML  +='</tr>';
                    j$("#taskSelectedFieldsTBody").append(taskHTML);
                }
            }
            
            function taskConfigureClicked(){
                window.top.location.href='/apex/TaskConfiguration?tabid={!JSENCODE($CurrentPage.parameters.sfdc.tabName)}';
            }
            
            function editSearchSetting() {

                j$(".editSearchBtn").attr("disabled","disabled");
                j$(".jbaraDummyCustomerSearchSettingsForm").find("iframe").hide();
                var iframeURl = "/apex/alertsByOpportunity?callback=callbackAfterSummarySave&callbackCancel=callbackAfterSummaryCancel&name=customersearch";
                j$(".jbaraDummyCustomerSearchSettingsForm").find("iframe").attr("src", iframeURl)
                var $target = j$(".jbaraDummyCustomerSearchSettingsForm");
                setTimeout(function() {
                    j$(".editSearchBtn").removeAttr("disabled");
                    jbaraShowTransactionLineAdminForm('edit','jbaraDummyCustomerSearchSettingsForm');
                    j$(".jbaraDummyCustomerSearchSettingsForm").find("iframe").show();
                    $target.css("left" , (window.innerWidth - $target.width())/ 2);
                }, 1000);
            }

            function isSFLightning() {
                var j$ = jQuery.noConflict();
                if (j$("#userNavButton").length>0 ||
                    j$("#toolbar #tsid").length>0 ||
                    j$("#bodyTable").length>0 ||
                    j$("#phSearchInput").length > 0 || window["GS"].isFromWidgets || window["GS"].isReadOnlyApp) {
                    return false;
                }
                return true;
                /**
                * the logic below will fail if classic URLs are being used directly in lightning mode
                * if (window["UITheme"] && window["UITheme"].getUITheme() === "Theme4d") { return true;} return false;
                *
                */
            }

            function redirectTo(URL) {
                if(isSFLightning()) {
                    window.top.location.href = "/one/one.app#/alohaRedirect/apex/" + getKey(URL);
                } else {
                    window.top.location.href = "/apex/" + URL;
                }
            }
            buildBookingTypeOpportunityRules();

            populateRevenueBandConfigDetails(); //To populate revenue band list.

            buildTaskConfigSection();

        </script>
    </apex:outputPanel>




        <apex:outputPanel id="allAdminCategoryTypes">
            <div class="AdministrationTabs" style="display: inline; width:99%; height: auto; min-height: 100px;">
                <div id="tabs" class ="ui-corner-top" style="padding: 0px !important; border:none;">
                    <ul class="HeaderAdministrationTabs">
                        <li><a href="#Administration-Customers">Customers</a></li>
                        <li class="admin-Transactions-li"><a href="#Administration-Transactions">Transactions</a></li>
                        <li><a href="#Administration-Features">Features</a></li>
                        <li><a href="#Administration-SecurityControls">Security Controls</a></li>
                        <li><a href="#Administration-EventsFramework">Events</a></li>
                        <li><a href="#Administration-GainsightPermissions">Gainsight Permissions</a></li>
                        <li><a href="#Administration-Retention">Retention</a></li>
                        <li><a href="#Administration-NPS">Survey</a></li>
                        <li><a href="#AdministrationLog">Log</a></li>
                        <li class="admin-Transactions-li"><a href="#Administration-Opportunity">Opportunity Connector</a></li>
                        <li><a href="#Administration-UIViews">UI Settings</a></li> 
                       <!--  <li><a href="#Administration-RulesEngine">Rules Engine</a></li>  -->
                        <li><a href="#Administration-Notifications">Notifications</a></li>
                        <li><a href="#Administration-SallySlackUsers">Slack Users</a></li>
                        <li><a href="#Administration-Segmentation">Segmentation</a></li>
                        <li><a href="#Administration-SallyQuickInsights">Quick Insights</a></li>

                    </ul>

                    <apex:form >
                        <!-- Administration Customers Tab Starts Here -->
                        <div id="Administration-Customers" style="align:center;">

                            <apex:pageBlock title="{!saasMetricLabels['Stage']}">
                                <apex:pageBlockButtons location="top" >
                                     <div style="float: right">
                                            <input type="button" value="NEW" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);newCustomerStageClicked()"/>
                                        <apex:actionFunction name="newCustomerStageClicked"  action="{!resetPickListId}" oncomplete="return jbaraShowNewAdminForm('Customer Stage','jbaraDummyAdminInputForm');"
                                             reRender="panelNewAdminForm">
                                             <apex:param name="paramPicklistCustomerStageCategory" value="Customer Stage" />
                                        </apex:actionFunction>
                                    </div>
                                </apex:pageBlockButtons>
                                <apex:actionFunction name="editCustomerStageClicked" action="{!getPickListById}" oncomplete="return jbaraShowAdminForm('edit','Customer Stage','jbaraDummyAdminInputForm');"
                                              reRender="panelNewAdminForm">
                                                  <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:actionFunction name="deleteClicked" action="{!deletePickListRecord}" reRender="jsPanel,allAdminCategoryTypes"
                                                 oncomplete="return jbaraAfterDeleteClick();">
                                             <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:pageBlockTable value="{!CustomerStageList}" var="customerStage">
                                    <apex:column style="width:10%" >
                                        <apex:facet name="header">Actions</apex:facet>
                                        <a style="color: #015BA7" class="actionLink" onclick="editCustomerStageClicked('{!JSENCODE(customerStage.Id)}'); return false;" href="#">Edit</a>&nbsp;|
                                        <a style="color: #015BA7" class="actionLink" onclick="confirmDeleteItem('{!JSENCODE(customerStage.Id)}','Customer Stage','{!JSENCODE(customerStage.Name)}'); return false;" href="#">Delete</a>
                                    </apex:column>
                                    <apex:column headerValue="Name" style="width:20%" value="{!customerStage.Name}"/>
                                    <apex:column headerValue="System Name" style="width:20%" value="{!customerStage.JBCXM__SystemName__c}"/>
                                    <apex:column headerValue="Short Name"  style="width:10%" value="{!customerStage.JBCXM__ShortName__c}"/>
                                    <apex:column headerValue="Active" style="width:10%" value="{!customerStage.JBCXM__Active__c}"/>
                                    <apex:column headerValue="Display Order"  style="width:10%" value="{!customerStage.JBCXM__DisplayOrder__c}"/>
                                </apex:pageBlockTable>
                            </apex:pageBlock>
                             <apex:pageBlock title="Customer Status" id="customerStatusColor">
                                <apex:pageBlockTable value="{!CustomerStatusList}" var="customerStatus">
                                    <apex:column headerValue="Name" style="width:20%" value="{!customerStatus.Name}" styleClass="inlineEditWrite CustomerStatusNameLabel"/>
                                    <apex:column headerValue="System Name" style="width:20%" value="{!customerStatus.JBCXM__SystemName__c}"/>
                                    <apex:column headerValue="Active" style="width:20%" value="{!customerStatus.JBCXM__Active__c}"/>
                                    <apex:column headerValue="System Defined"  style="width:20%" value="{!customerStatus.JBCXM__SystemDefined__c}"/>
                                    <apex:column headerValue="Display Order"  style="width:20%" value="{!customerStatus.JBCXM__DisplayOrder__c}"/>
                                </apex:pageBlockTable>
                            </apex:pageBlock>
                            
                             <apex:pageBlock title="Customer Search Settings" id="customerSearchConfig">
                                 <apex:pageBlockButtons location="top" >
                                    <div style = "display:block;float:right;"><input type="button" value=" Configure " class="btn dummyAllAdminNewBtn editSearchBtn" onclick="editSearchSetting(this); return false;" /></div>
                                 </apex:pageBlockButtons>
                                <table class="list " border="0" cellpadding="0" cellspacing="0" id="customerSearchList">
                                    <thead class="rich-table-thead">
                                        <tr><th class = "headerRow">Field Name</th><th class = "headerRow">Include In Search</th></tr>
                                    </thead>
                                    <tbody>

                                    </tbody>

                                </table>
                            </apex:pageBlock>
                            
                            <apex:pageBlock title="{!UICustomLabels['RevenueBand']} Configuration" id="revenueBandBlock">
                                <apex:pageBlockButtons location="top">
                                    <div style="float: right;">
                                        <input type="button" value=" Configure " class="btn dummyAllAdminNewBtn" onclick="disableBtn(this); editRevenueBandConfingClicked();return false;" />
                                    </div>
                                </apex:pageBlockButtons>                        
                                 <div id="revBandFormDiv" style="max-width:1250px;overflow-x:auto;">
                                    <div style="text-align:center;" class="RevenueBandConfigOn"></div>
                                    <table class="list " border="0" cellpadding="0" cellspacing="0" id="revenueBandList"></table>
                                </div>
                                <div id="noRevenueBandMessageDiv" align="center" class="jbaraErrorMessageClass ui-widget ui-widget-content custom-ui-corner-all" style="margin-top:20px;display:none;vertical-align:center;">
                                    <span class="warningImageClass">&nbsp;</span> 
                                    <span class="validationMsgClass" style="position: relative; top: 1px;">
                                         No Revenue bands are configured.
                                    </span>
                                </div>
                            </apex:pageBlock>
                            
                            <!--Displays page block for CSM Field Settings-->
                             <apex:pageBlock title="CSM" id="csmFieldSettingsBlock">
                                <apex:pageBlockButtons location="top">
                                    <div style="float: right;">
                                        <input type="button" value="Configure" class="btn csmFieldSettingsBtn" onclick="disableBtn(this); jbaraShowCSMAdminForm('jbaraDummyCSMFieldSettingsForm'); " />   
                                    </div>
                                </apex:pageBlockButtons>
                                 <apex:pageBlockSection columns="1">
                                    <apex:pageBlockSectionItem >                                      
                                        <apex:outputLabel value="Customer Success Manager is :"/> 
                                        <div id = "csmFieldLabel">{!HTMLENCODE(csmFieldLabel)}</div>
                                    </apex:pageBlockSectionItem>                                      
                                </apex:pageBlockSection>                                  
                             </apex:pageBlock>

                        </div>
                        
                       
                        <!-- Administration Customers Tab Ends Here -->


                        <!-- Administration Transactions Tab Starts Here -->
                        <apex:outputPanel rendered="{!IF((IsNewLRMEnabled == false) ,true,false)}">
                        
                          <div id="Administration-Transactions" style="align:center;">
                            <apex:pageBlock title="Booking Types" id="transactionBookingTypesPanel">
                                 <apex:pageBlockButtons location="top" >
                                     <div style="float:right;">
                                            <input type="button" value="New" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);newBookingTypeClicked()"/>
                                        <apex:actionFunction name="newBookingTypeClicked"  action="{!resetPickListId}" oncomplete="return jbaraShowNewAdminForm('Booking Type','jbaraDummyAdminInputForm');"
                                             reRender="panelNewAdminForm">
                                             <apex:param name="paramPicklistOrderTypeCategory" value="Order Type" />
                                        </apex:actionFunction>
                                    </div>
                                </apex:pageBlockButtons>
                                
                                
                                <apex:actionFunction name="editBookingTypesClicked" action="{!getPickListById}" oncomplete="return jbaraShowAdminForm('edit','Booking Type','jbaraDummyAdminInputForm');"
                                              reRender="panelNewAdminForm">
                                                  <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:actionFunction name="mapBookingTypesClicked"  oncomplete="return jbaraShowBookingTypesAdminForm('jbaraDummyAdminBookingTypesInputForm');"
                                        reRender="panelNewAdminBookingTypesForm">
                                        <apex:param name="paramBookingTypesId" value="" />
                                </apex:actionFunction>
                                <apex:actionFunction name="deleteClicked" action="{!deletePickListRecord}" reRender="jsPanel,allAdminCategoryTypes"
                                                 oncomplete="return jbaraAfterDeleteClick();">
                                             <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:pageBlockTable value="{!OrderTypeList}" var="orderType"> 
                                    <apex:column style="width:12%" >
                                        <apex:facet name="header">Actions</apex:facet>
                                            <a style="color: #015BA7" class="actionLink" onclick="editBookingTypesClicked('{!JSENCODE(orderType.rowItem.Id)}'); return false;" href="#">Edit</a>&nbsp;
                                            <apex:outputPanel rendered="{!IF((orderType.rowItem.JBCXM__SystemName__c!= 'Renewal with Upsell') && (orderType.rowItem.JBCXM__SystemName__c!= 'Renewal with Downsell') && (orderType.rowItem.JBCXM__SystemName__c!= 'Churn') ,true,false)}">
                                                | <a style="color: #015BA7" class="actionLink" onclick="setOrderIdForEdit('{!JSENCODE(orderType.rowItem.Id)}');mapBookingTypesClicked('{!JSENCODE(orderType.rowItem.Id)}');jbaraBookingTypeName('{!JSENCODE(orderType.rowItem.Name)}');return false;" href="#">Map</a> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!IF((orderType.rowItem.JBCXM__SystemDefined__c != true) ,true,false)}">
                                                | <a style="color: #015BA7" class="actionLink" onclick="confirmDeleteItem('{!JSENCODE(orderType.rowItem.Id)}','Booking Type','{!JSENCODE(orderType.rowItem.Name)}'); return false;" href="#">Delete</a>
                                            </apex:outputPanel>                                    
                                      </apex:column>           
                                    
                                    <apex:column headerValue="Name" style="width:15%" value="{!orderType.rowItem.Name}"/>   
                                    <apex:column headerValue="Transaction Line Items"  style="width:35%" value="{!orderType.transactionTypes}"/>
                                    <apex:column headerValue="System Name"  style="width:15%" value="{!orderType.rowItem.JBCXM__SystemName__c}"/>
                                    <apex:column style="width:12%">
                                        <apex:facet name="header">Color</apex:facet>
                                                <span style="margin-left:5px;padding:0px;width:20px;background-color:{!JSENCODE(orderType.rowItem.Attribute1__c)}">
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;{!orderType.rowItem.Attribute1__c}
                                    </apex:column>
                                    <apex:column headerValue="Type"  style="width:15%" value="{!IF((orderType.rowItem.JBCXM__SystemDefined__c == true) ,'System','Custom-')}{!orderType.rowItem.JBCXM__MapToBookingType__c}"/>                                        
                                    <apex:column headerValue="Display Order"  style="width:10%" value="{!orderType.rowItem.JBCXM__DisplayOrder__c}"/>
                                </apex:pageBlockTable>
                            </apex:pageBlock>

                            <apex:pageBlock title="Transaction Line Items" id="Transactions">
                                 <apex:pageBlockButtons location="top" >
                                     <div style="float: right;">
                                        <input type="button" value="New" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);newTransactionLineItemsClicked()"/>
                                        <apex:actionFunction name="newTransactionLineItemsClicked"  action="{!resetTransactionTypeId}" oncomplete="return jbaraShowNewTransactionLineAdminForm('jbaraDummyAdminTransactionLineInputForm');"
                                             reRender="panelNewAdminTransactionLineItemsForm">
                                        </apex:actionFunction>
                                    </div>
                                 </apex:pageBlockButtons>
                                 <apex:actionFunction name="edittransactionTypeLineItemClicked" action="{!getTransactionTypeById}" oncomplete="return jbaraShowTransactionLineAdminForm('edit','jbaraDummyAdminTransactionLineInputForm');"
                                    reRender="panelNewAdminTransactionLineItemsForm">
                                    <apex:param name="paramTransactionTypeId" value="" />
                                 </apex:actionFunction>
                                 <apex:actionFunction name="deleteTransactionTypeClicked" action="{!deleteTransactionTypeRecord}" reRender="jsPanel,allAdminCategoryTypes"
                                     oncomplete="return jbaraAfterTransactionTypeDeleteClick();">
                                    <apex:param name="paramTransactionTypeId" value="" />
                                 </apex:actionFunction>
                                 <apex:pageBlockTable value="{!TransactionTypeItems}" var="transactionTypeLineItem">
                                    <apex:column style="width:12%" >
                                        <apex:facet name="header">Actions</apex:facet>
                                        <a style="color: #015BA7" class="actionLink" onclick="edittransactionTypeLineItemClicked('{!JSENCODE(transactionTypeLineItem.Id)}'); return false;" href="#">Edit</a>&nbsp;|
                                        <a style="color: #015BA7" class="actionLink" onclick="confirmTransactionTypeDelete('{!JSENCODE(transactionTypeLineItem.Id)}','{!JSENCODE(transactionTypeLineItem.Name)}'); return false;" href="#">Delete</a>
                                    </apex:column>
                                     <apex:column >
                                        <apex:outputLabel value="{!transactionTypeLineItem.Name}"/>
                                        <apex:facet name="header">Name</apex:facet>
                                    </apex:column>
                                    <apex:column >
                                        <apex:outputLabel value="{!transactionTypeLineItem.JBCXM__Type__c}"/>
                                        <apex:facet name="header">Type</apex:facet>
                                    </apex:column>
                                 </apex:pageBlockTable>
                            </apex:pageBlock>

                            <apex:pageBlock title="{!(transOTPLNameMapBySysNameAdmin['Churn'])} Reason" id="churnReasonAdminIdBlock">
                                <apex:pageBlockButtons location="top" >
                                     <div style="float: right;">
                                            <input type="button" value="New" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);newChurnReasonClicked()"/>
                                        <apex:actionFunction name="newChurnReasonClicked"  action="{!resetPickListId}" oncomplete="return jbaraShowNewAdminForm('Churn Reason','jbaraDummyAdminInputForm');"
                                             reRender="panelNewAdminForm">
                                             <apex:param name="paramPicklistChurnReasonCategory" value="Churn Reason" />
                                        </apex:actionFunction>
                                    </div>
                                </apex:pageBlockButtons>
                                <apex:actionFunction name="editChurnReasonClicked" action="{!getPickListById}" oncomplete="return jbaraShowAdminForm('edit','Churn Reason','jbaraDummyAdminInputForm');"
                                    reRender="panelNewAdminForm">
                                    <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:actionFunction name="deleteClicked" action="{!deletePickListRecord}" reRender="jsPanel,allAdminCategoryTypes"
                                     oncomplete="return jbaraAfterDeleteClick();">
                                    <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:pageBlockTable value="{!ChurnReasonList}" var="churnReason">
                                    <apex:column style="width:12%" >
                                        <apex:facet name="header">Actions</apex:facet>
                                        <a style="color: #015BA7" class="actionLink" onclick="editChurnReasonClicked('{!JSENCODE(churnReason.Id)}'); return false;" href="#">Edit</a>&nbsp;|
                                        <a style="color: #015BA7" class="actionLink" onclick="confirmDeleteItem('{!JSENCODE(churnReason.Id)}','Churn Reason','{!JSENCODE(churnReason.Name)}'); return false;" href="#">Delete</a>

                                    </apex:column>
                                    <apex:column headerValue="Name" style="width:20%" value="{!churnReason.Name}"/>
                                    <apex:column headerValue="System Name" style="width:17%" value="{!churnReason.JBCXM__SystemName__c}"/>
                                    <apex:column headerValue="Short Name"  style="width:15%" value="{!churnReason.JBCXM__ShortName__c}"/>
                                    <apex:column style="width:12%">
                                        <apex:facet name="header">Color</apex:facet>
                                                <span style="margin-left:5px;padding:0px;width:20px;background-color:{!JSENCODE(churnReason.Attribute1__c)}">
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;{!churnReason.Attribute1__c}
                                    </apex:column>
                                    <apex:column headerValue="Active" style="width:12%" value="{!churnReason.JBCXM__Active__c}"/>
                                    <apex:column headerValue="Display Order"  style="width:12%" value="{!churnReason.JBCXM__DisplayOrder__c}"/>
                                </apex:pageBlockTable>
                            </apex:pageBlock>
                            
                            <apex:pageBlock title="{!(transOTPLNameMapBySysNameAdmin['Churn'])} Tab Settings" id="churnSettingsIdBlock">
                                <apex:pageBlockButtons location="top">
                                        <div style="float: right;">
                                            <input type="button" value="Edit Settings" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);editChurnSettingsClicked();return false;" />
                                            <apex:actionFunction name="editChurnSettingsClicked" action="{!showChurnSettingsForm}"
                                                oncomplete="return jbaraShowOppConnectorSettingsAdminForm('jbaraDummyAdminOppConnectorSettingsForm','Churn');" reRender="jsPanelOppConnectorSettingType">
                                            </apex:actionFunction>
                                            <input type="button" value="Edit BOP" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);editChurnBOPSettingsClicked();return false;" />
                                            <apex:actionFunction name="editChurnBOPSettingsClicked" action="{!showChurnBOPSettingsForm}"
                                                oncomplete="return jbaraShowChurnBOPSettingsAdminForm('jbaraDummyAdminChurnSettingsForm');" reRender="jsPanelChurnBOPSettingType, panelChurnSettingsForm">
                                            </apex:actionFunction>
                                        </div>
                                    </apex:pageBlockButtons>
                                    <apex:pageblocksection columns="7">
                                        <tr>
                                            <td class="tdlabel" style="padding:5px;width:300px;border-bottom:none;" colspan ="15">
                                                <span style="width:300px;display:inline-block;"><b>Booking types:</b></span>                                                
                                                <img height="16" width="21" src="/img/checkbox_checked.gif"/><b>{!(transOTPLNameMapBySysNameAdmin['Churn'])}</b>&nbsp;&nbsp;&nbsp;<span style="color:red">(System Defined)</span>&nbsp;&nbsp;&nbsp;
                                                <img height="16" width="21" src="/img/{!IF(downsellInChurn,'checkbox_checked.gif', 'checkbox_unchecked.gif')}"/><b>{!(transOTPLNameMapBySysNameAdmin['Downsell'])}</b>&nbsp;&nbsp;&nbsp;
                                                <img height="16" width="21" src="/img/{!IF(renewalWithDownsellInChurn,'checkbox_checked.gif', 'checkbox_unchecked.gif')}"/><b>{!(transOTPLNameMapBySysNameAdmin['Renewal with Downsell'])}</b>
                                            </td>
                                                                       
                                        </tr>
                                        <tr>
                                            <td class="tdDescription" style="padding: 5px 5px 10px;max-width:300px;border-bottom:none;" colspan ="7">
                                                <span style="width:300px;display:inline-block;"><b>Show {!(transOTPLNameMapBySysNameAdmin['Renewal'])} based {!(transOTPLNameMapBySysNameAdmin['Churn'])}:</b></span>
                                                <img height="16" width="21" src="/img/{!IF(renewalBasedChurn,'checkbox_checked.gif', 'checkbox_unchecked.gif')}"/>
                                            </td>
                                            <td class="tdlabel" style="padding:5px;width:400px;border-bottom:none;"></td>
                                        </tr>
                                        <tr>
                                            <td class="tdlabel" style="padding: 10px 5px 5px;width:300px;border-bottom:none; border-top:2px dashed #626262;" colspan="7" >
                                                <b>Use manually entered BOP for {!(transOTPLNameMapBySysNameAdmin['Churn'])} calculation:</b><img height="16" width="21" src="/img/{!IF(ChurnByBOP,'checkbox_checked.gif', 'checkbox_unchecked.gif')}"/>
                                            </td>
                                            <td class="tdlabel" style="padding:5px;width:400px;border-bottom:none;border-top:2px dashed #626262;"></td>
                                        </tr>
                                                                       
                                        </apex:pageblocksection>
                                        
                                        <apex:pageBlockTable value="{!ChurnBOPSettings}" var="churnBOPCalDisp" rendered="{!ChurnByBOP}">                                  
                                            <apex:column headerValue="Year" style="width:20%" value="{!churnBOPCalDisp.year}"/>
                                            <apex:column headerValue="Customers" style="width:17%" value="{!churnBOPCalDisp.customers}"/>
                                            <apex:column headerValue="Users"  style="width:15%" value="{!churnBOPCalDisp.users}"/>                                    
                                            <apex:column headerValue="MRR" style="width:12%" value="{!churnBOPCalDisp.MRR}"/>
                                            <apex:column headerValue="ASV"  style="width:12%" value="{!churnBOPCalDisp.ASV}"/>
                                        </apex:pageBlockTable>
                            </apex:pageBlock>
                            
                            <!-- Transaction aditional configurations -->
                            <apex:outputPanel rendered="{!showTransAdditionalConfig}" styleClass="transAddConfigCls">
                                <apex:pageBlock title="Additional Configuration" id="TransactionsAddConfig">
                                    <apex:outputPanel rendered="{!isASVCalByTerm}">
                                        <div style="padding:5px;">
                                            <span style="font-size:20px;vertical-align: top;">*</span>&nbsp;&nbsp; Calculation by term is enabled - When term is less than 12, {!(UICustomLabels['ASV'])} is calculated as {!(UICustomLabels['MRR'])}*term or {!(UICustomLabels['MRR'])} is calculated as {!(UICustomLabels['ASV'])}/term.
                                        </div>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!disableUpdateCust}">
                                        <div style="padding:5px;">
                                            <span style="font-size:20px;vertical-align: top;">*</span>&nbsp;&nbsp; Customer {!(UICustomLabels['ASV'])}, {!(UICustomLabels['MRR'])}, {!(UICustomLabels['Users'])}, {!(UICustomLabels['OneTime'])}, Status, {!(UICustomLabels['OCD'])} and {!(UICustomLabels['RenewalDate'])} are not updated from transactions.
                                        </div>
                                    </apex:outputPanel>
                                </apex:pageBlock>
                            </apex:outputPanel>
                        </div>
                        </apex:outputPanel>
                        <!-- Administration Transactions Tab Ends Here -->
                        
                        <!-- Administration Features Tab Starts Here -->
                        <div id="Administration-Features" style="align:center;">
                        
                            <apex:pageBlock title="Features">
                                 <apex:pageBlockButtons location="top" >
                                     <div style="float: right">
                                        <input type="button" value="New" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);newFeatureClicked()"/>
                                        <apex:actionFunction name="newFeatureClicked"  action="{!resetFeatureTypeId}" oncomplete="return jbaraShowNewFeatureAdminForm('jbaraDummyAdminFeatureInputForm');"
                                             reRender="panelNewAdminFeatureForm">
                                        </apex:actionFunction>
                                    </div>
                                 </apex:pageBlockButtons>
                                 <apex:actionFunction name="editFeatureItemClicked" action="{!getCustomerFeatureById}" oncomplete="return jbaraShowFeatureAdminForm('edit','jbaraDummyAdminFeatureInputForm');"
                                    reRender="panelNewAdminFeatureForm">
                                    <apex:param name="paramFeatureId" value="" />
                                 </apex:actionFunction>
                                 <apex:actionFunction name="deleteFeatureClicked" action="{!deleteFeatureRecord}" reRender="jsPanel,allAdminCategoryTypes"
                                     oncomplete="return jbaraAfterFeatureDeleteClick();">
                                    <apex:param name="paramFeatureId" value="" />
                                 </apex:actionFunction>
                                 <apex:pageBlockTable value="{!CustomerFeatureItems}" var="customerFeatureItem">
                                    <apex:column style="width:15%" >
                                        <apex:facet name="header">Actions</apex:facet>
                                        <a style="color: #015BA7" class="actionLink" onclick="editFeatureItemClicked('{!JSENCODE(customerFeatureItem.Id)}'); return false;" href="#">Edit</a>&nbsp;|
                                        <a style="color: #015BA7" class="actionLink" onclick="confirmFeatureDelete('{!JSENCODE(customerFeatureItem.Id)}','{!JSENCODE(customerFeatureItem.Feature__c)}'); return false;" href="#">Delete</a>
                                    </apex:column> 
                                    <apex:column headerValue="Feature Name" style="width:30%" value="{!customerFeatureItem.JBCXM__Feature__c}"/>
                                    <apex:column headerValue="Product Name" style="width:30%" value="{!customerFeatureItem.JBCXM__Product__c}"/>
                                    <apex:column headerValue="System Name"  style="width:15%" value="{!customerFeatureItem.JBCXM__SystemName__c}"/>
                                 </apex:pageBlockTable>
                            </apex:pageBlock>
                            
                        </div>
                         <!-- Administration Features Tab Ends Here -->

                        <!-- Administration sharing settings Tab Starts Here-->
                         <div id="Administration-SecurityControls" style="align:center;">
                         </div>
                         <!-- Administration sharing settings Tab Ends Here-->
                         
                        <!-- Administration events framework Tab Starts Here-->
                         <div id="Administration-EventsFramework" style="align:center;">
                         </div>
                        <!-- Administration events framework Tab Ends Here-->

                        <!-- Sally quick insights Tab Starts Here-->
                         <div id="Administration-SallyQuickInsights" style="align:center;">
                         </div>
                        <!-- Sally quick insights Tab Ends Here-->

            <!-- Administration Gainsight Permissions Tab Ends Here-->
            <div id="Administration-GainsightPermissions" style="align:center;">
            </div>
            <!-- Administration Gainsight Permissions Tab Ends Here-->
            <!-- Administration Segmentation Tab Starts Here-->
         <div id="Administration-Segmentation" style="align:center;">
            </div>
            <!-- Administration Gainsight Segmentation Tab Ends Here-->

                        <!-- Administration Sally Slack Users Tab Starts Here-->
                         <div id="Administration-SallySlackUsers" style="align:center;">
                         </div>
                        <!-- Administration Sally Slack Users Tab Ends Here-->

                        <!--Administration Alerts Tab Starts Here-->
                        <div id="Administration-Retention" style="align:center;">

                            <apex:pageBlock title="Alert Type" >
                                <apex:pageBlockButtons location="top" >
                                     <div style="float: right">
                                            <input type="button" value="New" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);newAlertTypeClicked()"/>
                                        <apex:actionFunction name="newAlertTypeClicked"  action="{!resetPickListId}" oncomplete="return jbaraShowNewAdminForm('Alert Type','jbaraDummyAdminInputForm');"
                                             reRender="panelNewAdminForm">
                                             <apex:param name="paramPicklistAlertTypeCategory" value="Alert Type" />
                                        </apex:actionFunction>
                                    </div>
                                </apex:pageBlockButtons>
                                <apex:actionFunction name="editAlertTypeClicked" action="{!getPickListById}" oncomplete="return jbaraShowAdminForm('edit','Alert Type','jbaraDummyAdminInputForm');"
                                            reRender="panelNewAdminForm">
                                    <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:actionFunction name="deleteClicked" action="{!deletePickListRecord}" reRender="jsPanel,allAdminCategoryTypes"
                                             oncomplete="return jbaraAfterDeleteClick();">
                                    <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:pageBlockTable value="{!AlertTypeList}" var="alertType">
                                    <apex:column style="width:10%" >
                                        <apex:facet name="header">Actions</apex:facet>
                                        <a style="color: #015BA7" class="actionLink" onclick="editAlertTypeClicked('{!JSENCODE(alertType.Id)}'); return false;" href="#">Edit</a>&nbsp;|
                                        <a style="color: #015BA7" class="actionLink" onclick="confirmDeleteItem('{!JSENCODE(alertType.Id)}','Alert Type','{!JSENCODE(alertType.Name)}'); return false;" href="#">Delete</a>
                                    </apex:column>
                                    <apex:column headerValue="Name" style="width:20%" value="{!alertType.Name}"/>
                                    <apex:column headerValue="System Name" style="width:20%" value="{!alertType.JBCXM__SystemName__c}"/>
                                    <apex:column headerValue="Short Name"  style="width:10%" value="{!alertType.JBCXM__ShortName__c}"/>
                                    <apex:column style="width:10%">
                                        <apex:facet name="header">Color</apex:facet>
                                                <span style="margin-left:5px;padding:0px;width:20px;background-color:{!JSENCODE(alertType.Attribute1__c)}">
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;{!alertType.Attribute1__c}
                                    </apex:column>
                                    <apex:column headerValue="Active" style="width:10%" value="{!alertType.JBCXM__Active__c}"/>
                                    <apex:column headerValue="Include In Widget"  style="width:10%" value="{!alertType.JBCXM__IncludeInWidget__c}"/>
                                    <apex:column headerValue="Display Order"  style="width:10%" value="{!alertType.JBCXM__DisplayOrder__c}"/>
                                </apex:pageBlockTable>
                            </apex:pageBlock>

                            <apex:pageBlock title="Alert Severity">
                                <apex:pageBlockButtons location="top" >
                                     <div style="float: right;">
                                            <input type="button" value="New" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);newAlertSeverityClicked()"/>
                                        <apex:actionFunction name="newAlertSeverityClicked"  action="{!resetPickListId}" oncomplete="return jbaraShowNewAdminForm('Alert Severity','jbaraDummyAdminInputForm');"
                                             reRender="panelNewAdminForm">
                                             <apex:param name="paramPicklistAlertSeverityCategory" value="Alert Severity" />
                                        </apex:actionFunction>
                                    </div>
                                </apex:pageBlockButtons>
                                <apex:actionFunction name="editAlertSeverityClicked" action="{!getPickListById}" oncomplete="return jbaraShowAdminForm('edit','Alert Severity','jbaraDummyAdminInputForm');"
                                            reRender="panelNewAdminForm">
                                                <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:actionFunction name="deleteClicked" action="{!deletePickListRecord}" reRender="jsPanel,allAdminCategoryTypes"
                                         oncomplete="return jbaraAfterDeleteClick();">
                                <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:pageBlockTable value="{!AlertSeverityList}" var="alertSeverity">
                                    <apex:column style="width:10%" >
                                        <apex:facet name="header">Actions</apex:facet>
                                        <a style="color: #015BA7" class="actionLink" onclick="editAlertSeverityClicked('{!JSENCODE(alertSeverity.Id)}'); return false;" href="#">Edit</a>&nbsp;|
                                        <a style="color: #015BA7" class="actionLink" onclick="confirmDeleteItem('{!JSENCODE(alertSeverity.Id)}','Alert Severity','{!JSENCODE(alertSeverity.Name)}'); return false;" href="#">Delete</a>
                                    </apex:column>
                                    <apex:column headerValue="Name" style="width:20%" value="{!alertSeverity.Name}"/>
                                    <apex:column headerValue="System Name" style="width:20%" value="{!alertSeverity.JBCXM__SystemName__c}"/>
                                    <apex:column headerValue="Short Name"  style="width:10%" value="{!alertSeverity.JBCXM__ShortName__c}"/>
                                    <apex:column style="width:10%">
                                        <apex:facet name="header">Color</apex:facet>
                                                <span style="margin-left:5px;padding:0px;width:20px;background-color:{!JSENCODE(alertSeverity.Attribute1__c)}">
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;{!alertSeverity.Attribute1__c}
                                    </apex:column>
                                    <apex:column headerValue="Active" style="width:10%" value="{!alertSeverity.JBCXM__Active__c}"/>
                                    <apex:column headerValue="Include In Widget"  style="width:10%" value="{!alertSeverity.JBCXM__IncludeInWidget__c}"/>
                                    <apex:column headerValue="Display Order"  style="width:10%" value="{!alertSeverity.JBCXM__DisplayOrder__c}"/>
                                </apex:pageBlockTable>
                            </apex:pageBlock>


                            <apex:pageBlock title="Alert Reason">
                                <apex:pageBlockButtons location="top" >
                                     <div style="float: right;">
                                            <input type="button" value="New" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);newAlertReasonClicked()"/>
                                        <apex:actionFunction name="newAlertReasonClicked"  action="{!resetPickListId}" oncomplete="return jbaraShowNewAdminForm('Alert Reason','jbaraDummyAdminInputForm');"
                                             reRender="panelNewAdminForm">
                                             <apex:param name="paramPicklistAlertReasonCategory" value="Alert Reason" />
                                        </apex:actionFunction>
                                    </div>
                                </apex:pageBlockButtons>
                                <apex:actionFunction name="editAlertReasonClicked" action="{!getPickListById}" oncomplete="return jbaraShowAdminForm('edit','Alert Reason','jbaraDummyAdminInputForm');"
                                            reRender="panelNewAdminForm">
                                    <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:actionFunction name="deleteClicked" action="{!deletePickListRecord}" reRender="jsPanel,allAdminCategoryTypes"
                                     oncomplete="return jbaraAfterDeleteClick();">
                                    <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:pageBlockTable value="{!AlertReasonList}" var="alertReason">
                                    <apex:column style="width:10%" >
                                        <apex:facet name="header">Actions</apex:facet>
                                        <a style="color: #015BA7" class="actionLink" onclick="editAlertReasonClicked('{!JSENCODE(alertReason.Id)}'); return false;" href="#">Edit</a>&nbsp;|
                                        <a style="color: #015BA7" class="actionLink" onclick="confirmDeleteItem('{!JSENCODE(alertReason.Id)}','Alert Reason','{!JSENCODE(alertReason.Name)}'); return false;" href="#">Delete</a>
                                    </apex:column>
                                    <apex:column headerValue="Name" style="width:20%" value="{!alertReason.Name}"/>
                                    <apex:column headerValue="System Name" style="width:20%" value="{!alertReason.JBCXM__SystemName__c}"/>
                                    <apex:column headerValue="Short Name"  style="width:10%" value="{!alertReason.JBCXM__ShortName__c}"/>
                                    <apex:column style="width:10%" >
                                        <apex:facet name="header">Color</apex:facet>
                                        <span style="margin-left:5px;padding:0px;width:20px;background-color:{!JSENCODE(alertReason.Attribute1__c)}">
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;{!alertReason.Attribute1__c}
                                    </apex:column>
                                    <apex:column headerValue="Active" style="width:10%" value="{!alertReason.JBCXM__Active__c}"/>
                                    <apex:column headerValue="Display Order"  style="width:10%" value="{!alertReason.JBCXM__DisplayOrder__c}"/>
                                </apex:pageBlockTable>
                            </apex:pageBlock>

                            <apex:pageBlock title="Alert Status">
                                <apex:pageBlockButtons location="top" >
                                     <div style="float: right;">
                                            <input type="button" value="New" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);newAlertStatusClicked()"/>
                                        <apex:actionFunction name="newAlertStatusClicked"  action="{!resetPickListId}" oncomplete="return jbaraShowNewAdminForm('Alert Status','jbaraDummyAdminInputForm');"
                                             reRender="panelNewAdminForm">
                                             <apex:param name="paramPicklistAlertStatusCategory" value="Alert Status" />
                                        </apex:actionFunction>
                                    </div>
                                </apex:pageBlockButtons>
                                <apex:actionFunction name="editAlertStatusClicked" action="{!getPickListById}" oncomplete="return jbaraShowAdminForm('edit','Alert Status','jbaraDummyAdminInputForm');"
                                            reRender="panelNewAdminForm">
                                    <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:actionFunction name="deleteClicked" action="{!deletePickListRecord}" reRender="jsPanel,allAdminCategoryTypes"
                                     oncomplete="return jbaraAfterDeleteClick();">
                                    <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:pageBlockTable value="{!AlertStatusList}" var="alertStatus">
                                    <apex:column style="width:10%" >
                                        <apex:facet name="header">Actions</apex:facet>
                                        <a style="color: #015BA7" class="actionLink" onclick="editAlertStatusClicked('{!JSENCODE(alertStatus.Id)}'); return false;" href="#">Edit</a>&nbsp;|
                                        <a style="color: #015BA7" class="actionLink" onclick="confirmDeleteItem('{!JSENCODE(alertStatus.Id)}','Alert Status','{!JSENCODE(alertStatus.Name)}'); return false;" href="#">Delete</a>
                                    </apex:column>
                                    <apex:column headerValue="Name" style="width:20%" value="{!alertStatus.Name}"/>
                                    <apex:column headerValue="System Name" style="width:20%" value="{!alertStatus.JBCXM__SystemName__c}"/>
                                    <apex:column headerValue="Short Name"  style="width:10%" value="{!alertStatus.JBCXM__ShortName__c}"/>
                                    <apex:column headerValue="Status"  style="width:10%">
                                        <apex:outputText Value="Active" rendered="{!alertStatus.JBCXM__IncludeInWidget__c}" />
                                        <apex:outputText Value="Closed" rendered="{!not(alertStatus.JBCXM__IncludeInWidget__c)}" />
                                    </apex:column>
                                    <apex:column style="width:10%">
                                        <apex:facet name="header">Color</apex:facet>
                                                <span style="margin-left:5px;padding:0px;width:20px;background-color:{!JSENCODE(alertStatus.Attribute1__c)}">
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;{!alertStatus.Attribute1__c}
                                    </apex:column>                             
                                    <apex:column headerValue="Active" style="width:10%" value="{!alertStatus.JBCXM__Active__c}"/>
                                    <apex:column headerValue="Display Order"  style="width:10%" value="{!alertStatus.JBCXM__DisplayOrder__c}"/>
                                </apex:pageBlockTable>
                            </apex:pageBlock>
                            
                            <apex:pageBlock title="Task Configuration">
                                <apex:pageBlockButtons location="top" >
                                     <div style="clear: both;">
                                            <input type="button" value="Configure" class="btn dummyTaskConfigure" onclick="disableBtn(this);taskConfigureClicked()"/>
                                     </div>
                                </apex:pageBlockButtons>
                                <div Style="background:#f2f3f3;height:25px;padding-left:8px;">
                                <h3 id='formTitle'>Integration mode</h3>
                                </div>
                                <table width="100%">
                                    <tbody>
                                       <tr>
                                            <td class="labelCol" width="20%">
                                                   Integrate with Salesforce tasks:
                                             </td>
                                            <td width="80%">
                                              
                                                    <input type="radio" class="rbtnSFTask" name="taskType"/> 
                                                
                                           
                                           </td>
                            
                                        </tr>
                                         <tr>
                                            <td class="labelCol" width="20%">
                                                   Integrate with Gainsight tasks:
                                             </td>
                                            <td width="80%">
                                                <input type="radio" class="rbtnCSTask" name="taskType" />
                                              </td>
                                             </tr>
                                    </tbody>
                                </table>
                                <div id="divFieldsSelector">
                                        <div Style="background:#f2f3f3;height:25px;padding-left:8px;">
                                            <h3 id='formTitle'>Configured Fields</h3>
                                        </div>
                                
                                    <div style="width:850px;height:220px;border:1px solid #A6C9E2;overflow:auto;background-color:#FFFFFF;">
                                        <table id="tblTaskSelectedFields" class="list">
                                            <thead>
                                            <tr class="headerRow taskSelectedFieldsHeaderRow">
                                                <th class="headerRow" width="250px">API Name</th>
                                                <th class="headerRow" width="225px">Display Label</th>
                                                <th class="headerRow" width="375px">Default Value</th>
                                            </tr>   
                                            </thead>
                                            <tbody id="taskSelectedFieldsTBody">
                                            </tbody>
                                            
                                        </table>
                                    </div>
                                </div>  
                             </apex:pageBlock>   
                            
                            <apex:pageBlock title="Events Type" >
                                <apex:pageBlockButtons location="top" >
                                     <div style="float: right;">
                                            <input type="button" value="New" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);newEventTypeClicked()"/>
                                        <apex:actionFunction name="newEventTypeClicked"  action="{!resetPickListId}" oncomplete="return jbaraShowNewAdminForm('Event Type','jbaraDummyAdminInputForm');"
                                             reRender="panelNewAdminForm">
                                             <apex:param name="paramPicklistEvenTypeCategory" value="SalesRep Name" />
                                        </apex:actionFunction>
                                    </div>
                                </apex:pageBlockButtons>
                                <apex:actionFunction name="editEventTypeClicked" action="{!getPickListById}" oncomplete="return jbaraShowAdminForm('edit','Event Type','jbaraDummyAdminInputForm');"
                                            reRender="panelNewAdminForm">
                                    <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:actionFunction name="deleteClicked" action="{!deletePickListRecord}" reRender="jsPanel,allAdminCategoryTypes"
                                             oncomplete="return jbaraAfterDeleteClick();">
                                    <apex:param name="paramPickListId" value="" />
                                </apex:actionFunction>
                                <apex:pageBlockTable value="{!EventTypeList}" var="eventType">
                                    <apex:column style="width:10%" >
                                        <apex:facet name="header">Actions</apex:facet>
                                        <a style="color: #015BA7" class="actionLink" onclick="editEventTypeClicked('{!JSENCODE(eventType.Id)}'); return false;" href="#">Edit</a>&nbsp;|
                                        <a style="color: #015BA7" class="actionLink" onclick="confirmDeleteItem('{!JSENCODE(eventType.Id)}','Event Type','{!JSENCODE(eventType.Name)}'); return false;" href="#">Delete</a>
                                    </apex:column>
                                    <apex:column headerValue="Name" style="width:20%" value="{!eventType.Name}"/>
                                    <apex:column headerValue="System Name" style="width:20%" value="{!eventType.JBCXM__SystemName__c}"/>
                                    <apex:column headerValue="Short Name"  style="width:10%" value="{!eventType.JBCXM__ShortName__c}"/>
                                    <apex:column headerValue="Active" style="width:10%" value="{!eventType.JBCXM__Active__c}"/>
                                    <apex:column headerValue="Display Order"  style="width:10%" value="{!eventType.JBCXM__DisplayOrder__c}"/>
                                </apex:pageBlockTable>
                            </apex:pageBlock>
                        </div>
                        
                        <!--Administration Retention Tab Ends Here-->
                        
                

                        <!--Administration NPS Tab Starts Here-->
                        <div id="Administration-NPS" style="align:center;">
                                  <div class="gs-non-deprecated">
                                <apex:pageBlock title="Survey Permissions" id="panelSurveyPermissionsPageblock">
                                    <apex:pageBlockButtons location="top" >
                                        <div style="float:right;">
                                            <input type="button" value="Configure" class="btn surveyPermissionsSettingsBtn" onclick="disableBtn(this);surveyPermissionsBtnClicked();return false;" />   
                                            <apex:actionFunction name="surveyPermissionsBtnClicked" action="{!showLicensedUsersForm}"
                                                oncomplete="return jbaraSurveyPermissionsForm('jbaraDummySurveyPermissionsForm');" reRender="panelSurveyPermissionsForm">
                                            </apex:actionFunction>                                      
                                        </div>                                  
                                    </apex:pageBlockButtons>
                                    <apex:pageBlockTable value="{!PermissionsConfigList}" var="SurveyPermissions" style="color:#015BA7" rendered ="{!PermissionsConfigList.size>0}">
                                        <apex:column headerClass="SurveyPermCls" style="width:13%" >
                                            <apex:outputPanel rendered="{!IF((SurveyPermissions.JBCXM__IsEnabled__c == true) ,true,false)}">
                                                Enabled Permissions
                                            </apex:outputPanel>   
                                            <apex:outputPanel rendered="{!IF((SurveyPermissions.JBCXM__IsEnabled__c != true) ,true,false)}">
                                                Enable Permissions
                                            </apex:outputPanel>                                         
                                        </apex:column>      
                                        <apex:column headerClass="SurveyPermCls"  style="width:10%" value="{!SurveyPermissions.JBCXM__IsEnabled__c}"/>
                                        <apex:column headerClass="SurveyPermCls" style="width:77%" >
                                            <apex:outputPanel rendered="{!IF((SurveyPermissions.JBCXM__IsEnabled__c == true) ,true,false)}">
                                                <a style="color:#015BA7" class="actionLink" onclick="redirectTo('SurveyModulePermissions')" target="_self">Click here to configure permissions</a>
                                           </apex:outputPanel>                                          
                                        </apex:column>                                      
                                    </apex:pageBlockTable>
                                    <apex:outputPanel rendered="{!PermissionsConfigList.size == 0}">
                                        <table class="rich-table-thead" style="border: 1px solid #C0C0C0;width:100%;background-color:#FFFFFF; width: 100%;">
                                          <tr class="dataRow even">
                                            <td style="width:10%" class="dataCell">
                                                Enable
                                            </td>
                                            <td style="width:10%" class="dataCell">
                                                <img height="16" width="21" src="/img/checkbox_unchecked.gif" />
                                            </td>
                                            <td style="width:80%" class="dataCell">
                                            
                                            </td>
                                          </tr>
                                        </table>
                                    </apex:outputPanel>
                                    <input type="text" value="{!(permissionSettings)}" class="surveyPermissionsCls" style="display:none;"/>
                                </apex:pageBlock>

                                <apex:outputPanel rendered="true">
                                <apex:pageBlock title="Survey Text Analytics" id="panelSurveyAnalyticsPageblock">
                                    <apex:pageBlockButtons location="top" >
                                        <div style="float:right;">
                                            <input type="button" value="Configure" class="btn surveyPermissionsSettingsBtn" onclick="disableBtn(this);surveyAnalyticsConfigureBtnClicked();return false;" />
                                            <apex:actionFunction name="surveyAnalyticsConfigureBtnClicked" action="{!showLicensedUsersForm}"
                                                oncomplete="return jbaraSurveyAnalyticsForm('jbaraDummySurveyAnalyticsPermissionsForm');" reRender="panelSurveyAnalyticsForm">
                                            </apex:actionFunction>                                      
                                        </div>                                  
                                    </apex:pageBlockButtons>
                                    <apex:pageBlockTable value="{!SurveyTextAnalyticsConfigDetails}" var="surveyTextAnalytics" style="color:#015BA7" rendered ="{!SurveyTextAnalyticsConfigDetails.size>0}">
                                        <apex:column headerClass="SurveyPermCls" style="width:13%" >
                                            <apex:outputPanel rendered="{!IF((surveyTextAnalytics['isEnabled'] == true) ,true,false)}">
                                                Enabled Survey Analytics
                                            </apex:outputPanel>   
                                            <apex:outputPanel rendered="{!IF((surveyTextAnalytics['isEnabled'] == false),true,false)}">
                                                Enable Survey Analytics
                                            </apex:outputPanel>                                         
                                        </apex:column>      
                                        <apex:column headerClass="SurveyPermCls"  style="width:87%" > 
                                            <apex:outputPanel rendered="{!IF((surveyTextAnalytics['isEnabled'] == true) ,true,false)}">
                                                <img height="16" width="21" src="/img/checkbox_checked.gif" title='Survey Text Analytics is enabled'/>
                                            </apex:outputPanel>   
                                            <apex:outputPanel rendered="{!IF((surveyTextAnalytics['isEnabled'] == false),true,false)}">
                                                <img height="16" width="21" src="/img/checkbox_unchecked.gif" title='Survey Text Analytics is disabled'/>
                                            </apex:outputPanel> 
                                        </apex:column>                                    
                                    </apex:pageBlockTable>
                                    <input type="text" value="{!(surveyAnalyticsPermissionSettings)}" class="surveyAnalyticsPermissionsCls" style="display:none;"/>
                                </apex:pageBlock>
                                </apex:outputPanel>
                                
                                <apex:pageBlock title="NPS® Survey Master" id="NPSSurveyMaster">
                                    <apex:pageBlockButtons location="top" >
                                          <div style="display: flex; justify-content: flex-end">
                                             <div>
                                                 <input type="button" value="Migrate External NPS® Surveys" class="surveyExtNPSMigrateBtn" onclick="jbaraExtNPSMigrateForm('jbaraDummyExtNPSForm'); return false;" />
                                             </div>
                                            <div class="external-nps-survey-disabled">
                                                  <apex:outputLink value="{!URLFOR($Action.JBCXM__SurveyMaster__c.New)}" styleClass="btn dummyAllAdminNewBtn disabled" style="text-decoration:none;padding:4px;">
                                                     New
                                                 </apex:outputLink>
                                                 <span>You cannot create External NPS Survey anymore</span>
                                             </div>
                                         </div>
                                     </apex:pageBlockButtons>
                                    <apex:pageBlockTable value="{!AllSurveyMasterList}" var="SurveyMasterList" style="color:#015BA7">
                                        <apex:column style="width:5%" >
                                            <apex:facet name="header">Actions</apex:facet>
                                            <apex:outputLink value="{!URLFOR($Action.JBCXM__SurveyMaster__c.Edit,SurveyMasterList.Id)}" > 
                                            Edit
                                        </apex:outputLink>
                                        </apex:column>
                                        <apex:column headerValue="Survey Code" style="width:20%" value="{!SurveyMasterList.Name}"/>
                                        <apex:column headerValue="Survey Name" style="width:20%" value="{!SurveyMasterList.JBCXM__SurveyName__c}"/>
                                        <apex:column headerValue="Published Date" style="width:10%" value="{!SurveyMasterList.JBCXM__PublishDate__c}"/>
                                        <apex:column headerValue="Start Date"  style="width:10%" value="{!SurveyMasterList.JBCXM__StartDate__c}"/>
                                        <apex:column headerValue="End Date"  style="width:10%" value="{!SurveyMasterList.JBCXM__EndDate__c}"/>
                                        <apex:column headerValue="Customer Distribution Count"  style="width:15%" value="{!SurveyMasterList.JBCXM__CustomerDistributionCount__c}"/>
                                        <apex:column headerValue="User Distribution Count"  style="width:15%" value="{!SurveyMasterList.JBCXM__UserDistributionCount__c}"/>
                                    </apex:pageBlockTable>
                                </apex:pageBlock>
                            </div>

                            <div class="gs-feature-disabled">
                                     <div class="gs-feature-image"></div>
                                     <h2>Page no longer exists</h2>
                                     <p>Survey 1.0 is retired and is no longer available. Gainsight offers Survey 2.0 to address all of your needs</p>
                                     <a href="javascript:;" target="_blank" onclick="redirectFeature()"  class="gs-btn-raised gs-feature-redirect">Go to Survey 2.0</a>
                               </div>
                        </div>
                            <!--Administration NPS Tab Ends Here-->

                            <!--Administration Opportunity Map Starts Here-->
                            <apex:outputPanel rendered="{!IF((IsNewLRMEnabled == false) ,true,false)}">

                            <div id="Administration-Opportunity" style="align:center;">

                                <apex:pageBlock title="Opportunity Booking Types Rules" id="bookingTypesIdBlock">
                                    <apex:pageBlockButtons location="top">
                                        <div style="float: right;">
                                            <input type="button" value="Map" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);editOppTransactionBookingMapClicked();return false;" />
                                        </div>
                                    </apex:pageBlockButtons>
                                     <div id="rulesFormDiv" style="width:1250px;overflow-x:auto;">
                                        <table class="list " border="0" cellpadding="0" cellspacing="0" id="tblRulesList"></table>
                                    </div>
                                    <div id="noFieldsMessageDiv" align="center" class="jbaraErrorMessageClass ui-widget ui-widget-content custom-ui-corner-all" style="margin-top:20px;display:none;vertical-align:center;">
                                        <span class="warningImageClass">&nbsp;</span>
                                        <span class="validationMsgClass" style="vertical-align: text-top;">
                                             No Opportunity rules fields had been configured.Please configure those fields by
                                                     navigating to Opportunity Connector Settings section.
                                        </span>
                                    </div>
                                    <div id="noRulesMessageDiv" align="center" class="jbaraErrorMessageClass ui-widget ui-widget-content custom-ui-corner-all" style="margin-top:20px;display:none;vertical-align:center;">
                                        <span class="warningImageClass">&nbsp;</span>
                                        <span class="validationMsgClass" style="position: relative; top: 1px;">
                                             No rules have been configured.
                                        </span>
                                    </div>
                                </apex:pageBlock>


                                <apex:pageBlock title="Gainsight Header Field" id="JBaraHeaderFieldIdBlock">
                                    <apex:pageBlockButtons location="top">
                                        <div style="float: right;">
                                            <input type="button" value="Map" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);editOppJBaraHeaderClicked();return false;" />

                                        </div>
                                    </apex:pageBlockButtons>
                                    <apex:pageBlockTable value="{!CustomOpportunityHeaderList}"
                                        var="Items">
                                        <apex:column headerValue="Gainsight Field" style="width:25%"
                                            value="{!Items.jBaraFieldLabel}" />
                                        <apex:column headerValue="Opportunity Field" style="width:75%"
                                            value="{!Items.opportunityField}" />
                                    </apex:pageBlockTable>
                                </apex:pageBlock>


                                <apex:pageBlock title="Gainsight Line Item" id="JBaraLineItemIdBlock">
                                    <apex:pageBlockButtons location="top">
                                        <div style="float: right">
                                            <input type="button" value="Map" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);editOppLineItemClicked();return false;" />
                                        </div>
                                    </apex:pageBlockButtons>
                                    <apex:pageBlockTable value="{!CustomOpportunityLineItemList}"
                                        var="Items">
                                        <apex:column headerValue="Gainsight Field" style="width:25%"
                                            value="{!Items.jBaraFieldLabel}" />
                                        <apex:column headerValue="Opportunity Field" style="width:75%"
                                            value="{!Items.opportunityField}" />
                                    </apex:pageBlockTable>
                                </apex:pageBlock>

                                <apex:pageBlock title="Opportunity Connector Settings" id="OpportunityConnectorSettingsIdBlock">
                                    <apex:pageBlockButtons location="top">
                                        <div style="float: right">
                                            <input type="button" value="Map" class="btn dummyAllAdminNewBtn" onclick="disableBtn(this);editOppConnectorSettingsClicked();return false;" />
                                        </div>
                                    </apex:pageBlockButtons>
                                    <apex:pageblocksection >
                                        <tr>
                                            <td class="tdlabel" style="padding:5px;width:300px;border-bottom:none;">
                                                Opportunity Close Date:
                                            </td>
                                            <td class="tdDescription" style="padding:5px;width:300px;border-bottom:none;">
                                               {!opportunityCloseDate}
                                            </td>

                                        </tr>

                                        <tr>
                                            <td class="tdlabel" style="padding:5px;width:300px;border-bottom:none;">
                                                Opportunity Rules Fields:
                                            </td>
                                            <td class="tdDescription" style="padding:5px;width:300px;border-bottom:none;">
                                               {!opportunityRulesFields}
                                            </td>

                                        </tr>
                                </apex:pageblocksection>

                                </apex:pageBlock>

                            </div>
                            </apex:outputPanel>

                            <div id="Administration-UIViews" style="align:center;">
                                <div id='mda-admin-permission-panel'></div>

                                <input type="text" value="{!(dashboardPermissionList)}" class="dashboardPermissionsCls" style="display:none;"/>
                                 <apex:pageBlock title="UI Views" id="uiViewsIdBlock">
                                    <apex:pageBlockButtons location="top">
                                        <div style="float: right;">
                                            <input type="button" value="New" class="btn uiViewNewBtn" onclick="disableBtn(this);newUIViewBtnClicked();return false;" />
                                        </div>
                                    </apex:pageBlockButtons>
                                    <apex:actionFunction name="deleteUIViewClicked" action="{!deleteUIViewIdRecord}" reRender="jsPanel,allAdminCategoryTypes"
                                         oncomplete="return jbaraAfterUIViewDeleteClick();">
                                        <apex:param name="paramUIViewId" value="" />
                                    </apex:actionFunction>
                                    <apex:actionFunction name="actionfunctionToToggleVisbiily" action="{!setUIViewVisibility}" oncomplete="return false;">
                                        <apex:param name="paramUIViewId" value="" />
                                        <apex:param name="toupdateVisib" value="" />
                                    </apex:actionFunction>

                                    <apex:pageBlockTable value="{!UIViewsItems}" var="UIViewsItem" styleClass="tablesorter uiViewTable">
                                        <apex:column style="width:15%" >
                                            <apex:facet name="header">Actions</apex:facet>
                                            <apex:outputText >
                                                <a style="color: #015BA7" class="actionLink"  onclick="editUIViewBtnClicked('{!JSENCODE(UIViewsItem.Id)}');return false;" href="#">Edit</a>&nbsp;|
                                                <a style="color: #015BA7" class="actionLink" onclick="confirmUIViewDelete('{!JSENCODE(UIViewsItem.Id)}','{!JSENCODE(UIViewsItem.Name)}'); return false;" href="#">Delete</a>&nbsp;|
                                                <a href = "#" class="actionLink"  title = "{!IF(UIViewsItem.IsShown__c == true,'Click to hide','Click to show')}"
                                                        style="color: #015BA7" data-cs = "{!IF(UIViewsItem.IsShown__c == true,'Hide','Show')}"
                                                        onclick = "toggleUIViewVisibility(this, '{!JSENCODE(UIViewsItem.Id)}'); return false;" >
                                                            {!IF(UIViewsItem.IsShown__c == true,'Hide','Show')}
                                                </a>
                                            </apex:outputText>
                                        </apex:column>
                                        <apex:column headerValue="Tab Name" style="width:30%" value="{!uiTabLables[UIViewsItem.JBCXM__UITabName__c]}" rendered="{!IF(UIViewsItem.JBCXM__SectionId__c == null,true,false)}"/>
                                        <apex:column headerValue="Tab Name" style="width:30%" value="{!UIViewsItem.SectionId__r.Name}" rendered="{!IF(UIViewsItem.JBCXM__SectionId__c != null,true,false)}"/>
                                        <apex:column headerValue="View Name" style="width:30%" value="{!UIViewsItem.Name}"/>
                                        <apex:column headerValue="Is Standard" style="width:30%" value="{!UIViewsItem.IsStandard__c }"/>

                                        <apex:column headerValue="Show By Default" style="width:20%" value="{!UIViewsItem.JBCXM__ShowDefault__c}"/>

                                    </apex:pageBlockTable>
                                </apex:pageBlock>
                                <script type="text/javascript">
                                    var $j = j$
                                    $j(".uiViewTable").tablesorter( {sortList: [[1,0], [2,0]]});
                                    $j(".uiViewTable").find("tr.last").removeClass("last").end().find("tr").last().addClass("last");
                                    $j(".uiViewTable").find("tr.first").removeClass("first").end().find("tr").first().addClass("first");
                                </script>
                                <apex:pageBlock title="Custom Labels" id="uiViewsCustomLabelBlock">
                                    <apex:pageBlockButtons location="top">
                                        <div style="float: right">
                                            <input type="button" value="Map" class="btn uiCustomLabelBtn" onclick="disableBtn(this);mapLabelsBtnClicked();return false;" />
                                        </div>
                                    </apex:pageBlockButtons>
                                    <apex:pageBlockTable value="{!UICustomLabels}" var="LabelItem" StyleClass="tblCustomLabelsList">
                                        <apex:column headerValue="Gainsight Label" style="width:50%" value="{!LabelItem}"/>
                                        <apex:column headerValue="Custom Label" style="width:50%" value="{!UICustomLabels[LabelItem]}"/>
                                    </apex:pageBlockTable>
                                </apex:pageBlock>



                            <!--    <apex:pageBlock title="Gainsight Widget Settings" id="uiJBaraWidgetSettingsBlock">
                                    <apex:pageBlockSection columns="1">
                                        <table width="100%" style="overflow:auto;border: 1px solid #DDDDDD; border-collapse: collapse;" id="tblMeasureColumnForm" class="list">
                                            <thead class="rich-table-thead">
                                                <tr class="headerRow">
                                                    <th style="width:15%;" colspan="1" scope="col" class="headerRow">
                                                        <div>Action</div>
                                                    </th>
                                                    <th style="width:20%;" colspan="1" scope="col" class="headerRow">
                                                        <div>Widget Type</div>
                                                    </th>
                                                    <th style="width:65%;" colspan="1" scope="col" class="headerRow">
                                                        <div>Tab Names</div>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody class="jBaraWidgetSettingsTbody">

                                            </tbody>
                                        </table>
                                    </apex:pageBlockSection>
                                </apex:pageBlock>   -->

                            </div>

                            </apex:form>

                            <!--  Panel for Notification Seting Murali -->
                            <div id="Administration-Notifications" style="align:center;background: none repeat scroll 0 0 #f0f3f6;">
                                <apex:form id="frm">
                                <apex:pageBlock title="Notification Frequency" id="NotifcationFreqDisplay">

                                        <div class = "noFreqSet" style = "display:none;">No frequency is enabled and notifications are currently off.</div>
                                        <table cellspacing="0" cellpadding="0" class = "notiTableCommon notiFrequencyTab" style = "display:none;">
                                            <tr class = "classFreq">
                                                <td>
                                                    <apex:inputCheckbox value="{!realTimeSchedule}" id="realTime" disabled="true"></apex:inputCheckbox>
                                                    <apex:outputText styleClass="labelCol first" value=" Real-Time notifications every " />
                                                </td>
                                                <td>
                                                    <apex:selectRadio value="{!realTimeMinuteValue}" styleClass="leftFloater" disabled="true">
                                                        <apex:selectOptions value="{!ListOfRealTimeMinuteValue}"/>
                                                    </apex:selectRadio>
                                                </td>
                                            </tr>
                                            <tr class = "classFreq">
                                                <td>
                                                    <apex:inputCheckbox value="{!dailySchedule}" id="daily" disabled="true"></apex:inputCheckbox>
                                                    <apex:outputText styleClass="labelCol first" value=" Daily notifications " />
                                                </td>
                                                <td>


                                                </td>
                                            </tr>
                                            <tr class = "classFreq">
                                                <td>
                                                    <apex:inputCheckbox value="{!weeklySchedule}" id="weekly" disabled="true"></apex:inputCheckbox>
                                                    <apex:outputText styleClass="labelCol first" value=" Weekly notifications every " /></td>
                                                <td>
                                                    <apex:selectList value="{!dayValue}" size="1" multiselect="false" disabled="true" >
                                                        <apex:selectOptions value="{!ListOfDayValue}" />
                                                   </apex:selectList>
                                                </td>
                                            </tr>
                                            <tr class = "classFreq" >
                                                <td style = "width: 215px;">
                                                    <apex:outputText styleClass="labelCol first" value="Time at which daily and weekly email notifications should be delivered" />
                                                </td>
                                                <td>
                                                     <apex:selectList value="{!hourValue}" size="1" multiselect="false"  disabled="true">
                                                    <apex:selectOptions value="{!ListOfHourValue}" /> </apex:selectList>

                                                    <apex:outputText styleClass="labelCol first" value=" Hours " />

                                                    <apex:selectList value="{!minuteValue}" size="1" multiselect="false" disabled="true" >
                                                         <apex:selectOptions value="{!ListOfMinuteValue}" /> </apex:selectList>
                                                    <apex:outputText styleClass="labelCol first" value=" Minutes " />
                                                </td>

                                            </tr>
                                        </table>
                                <apex:pageBlockButtons location="top">
                                        <input type = "button" class = "btn" value = "Configure" onclick="jbaraShowNotiFreqForm('jbaraDummyNotifFreqSettingsForm');"/>
                                    </apex:pageBlockButtons>
                                 <apex:actionFunction name="saveNotiFrequency" action="{!runScheduler}" />
                                <script>
                                    var isFreqDis = eval({!(isNotificationDisabled)});
                                    if(isFreqDis == true) {
                                        j$(".noFreqSet").show();
                                        j$(".notiFrequencyTab").hide();
                                    }
                                    else {
                                        j$(".noFreqSet").hide();
                                        j$(".notiFrequencyTab").show();
                                    }
                                </script>
                                    </apex:pageBlock>
                                </apex:form>
                                <script type="text/javascript">
                                function checkAll(cb)
                                {
                                    var inputElem = document.getElementsByClassName("notificationCheck");
                                    if(cb.checked){
                                        for(var i=0; i<inputElem.length; i++){
                                            inputElem[i].checked = true;
                                        }
                                    }else{
                                        for(var i=0; i<inputElem.length; i++){
                                            inputElem[i].checked = false;
                                        }
                                    }

                                }
                                </script>
                                <apex:pageBlock title="Selected User Lookup Fields for Autosubscription" id="NotificationTable">
                                    <apex:pageBlockButtons location="top">
                                            <div style="clear: both;">
                                                <input type="button" value="Configure" class="btn notiFieldSettingsBtn" onclick="disableBtn(this); jbaraShowNotiForm('jbaraDummyNotifSettingsForm'); " />
                                            </div>
                                    </apex:pageBlockButtons>
                                        <table id = "notificationDisplayTable" style = "width:500px;">
                                            <tbody id = "notificationFieldsToDisplay">

                                            </tbody>

                                        </table>
                                        <div id = "noFieldsMessage" style = "display:none;"></div>
                                         <script>
                                                function displaySelectedFields($data) {
                                                    var htmlStr = "";
                                                    var ischecked = '';
                                                    for(props in $data) {
                                                        if(props != 'None') {
                                                            ischecked = (validSelectedFields.indexOf(props) != -1) ? 'checked' : '';
                                                            htmlStr += '<tr><td style = "text-align:center; width: 10px;"><input '+ischecked+' disabled = "disabled" type = "checkbox" value = "'+props+'" /></td><td style = "padding-left: 5px;">'+$data[props]+'</td></tr>';
                                                        }
                                                    }
                                                    j$("#notificationFieldsToDisplay").append(htmlStr);
                                                }
                                                displaySelectedFields(allNotificationFields);

                                        </script>
                                </apex:pageBlock>


                           </div>
                            
                            <apex:form >
                            
                            <!-- CSM Field Settings Container Starts Here-->
                            <apex:outputPanel id="panelCSMFieldSettingsForm">
                                <div class="overlayDialog inlineEditDialog jbaraDummyCSMFieldSettingsForm bPageBlock"
                                    style="position: absolute; min-width: 700px; max-width: 800px; max-height: 300px; display: none;">
                                    <div class="topRight" style='cursor: move'>
                                        <div class="topLeft">
                                            <img src="/s.gif" class="dialogClose" onclick="jbaraCloseAdminInputForm()" onmouseout="this.className = 'dialogClose'"
                                                onmouseover="this.className = 'dialogCloseOn'" id="InlineEditDialogX" />
                                            <h2 id="InlineEditDialogTitle" class='dummyCSMFieldName'>
                                                CSM
                                            </h2>
                                        </div>
                                    </div>
                                    <div class="middle" style="min-width: 680px;">
                                        <div id="InlineEditDialogContent" class="innerContent">
                                            <div class="activeField">
                                                <div class="inlineEditCompoundDiv">                                                     
                                                    <table width="100%" style="margin-bottom:15px;"  class="rounded-corner">                                                            
                                                        <tr class="CSMFieldSettingsCls">
                                                            <td class="header" width="41%">
                                                                CSM Field
                                                            </td>
                                                            <td width="41%">
                                                                <select class = "jbaraSelectCSMFieldCtrl">
                                                                
                                                                </select>
                                                            </td>
                                                        </tr>
                                                    </table>                                                          
                                                </div>
                                            </div>
                                            <div style="display: none;"></div>
                                            <div class="buttons" id="InlineEditDialog_buttons">
                                                <input type="button" onclick="disableBtn(this); captureCSMField();" value="Save" class="btn dummyCSMFieldSettingsSaveBtn dummyAllAdminSaveBtn btn-save" />
                                                <input type="button" onclick="jbaraCloseAdminInputForm()" value="Cancel" class="btn btn-cancel" />
                                                <apex:actionFunction name="saveCSMFieldSettings" action="{!saveAutosubscriptionFields}" oncomplete="return jbaraAfterSaveCSMFieldClick();">
                                                    <apex:param name="selectedNotiFields" value="" />
                                                    <apex:param name="fromFieldSetting" value="" />
                                                </apex:actionFunction>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="bottomRight">
                                        <div class="bottomLeft"></div>
                                    </div>
                                </div>
                            </apex:outputPanel>
                            
                            
                            
                            <apex:outputPanel id="panelNotificationFieldsConfig">
                                <div class="overlayDialog inlineEditDialog jbaraDummyNotifSettingsForm bPageBlock"
                                    style="position: absolute; min-width: 700px; min-height: 220px; max-width: 800px; max-height: 300px; display: none;">
                                    <div class="topRight" style='cursor: move'>
                                        <div class="topLeft">
                                            <img src="/s.gif" class="dialogClose" onclick="jbaraCloseNotiForm()" onmouseout="this.className = 'dialogClose'"
                                                onmouseover="this.className = 'dialogCloseOn'" id="InlineEditDialogX" />
                                            <h2 id="InlineEditDialogTitle" class='dummyCSMFieldName'>
                                                Select user lookup fields for auto subscription 
                                            </h2>
                                        </div>
                                    </div>
                                    <div class="middle" style="min-width: 680px; min-height: 280px;">
                                        <div id="InlineEditDialogContent" class="innerContent">
                                            <div class="activeField">
                                                <div class="inlineEditCompoundDiv">                                                     
                                                    <table width="100%" style="margin-bottom:15px;"  class="rounded-corner">                                                            
                                                        <thead>
                                                        <tr>
                                                          <th style = "text-align:center;">Select</th>
                                                          <th>Fields</th>
                                                        </tr>
                                                        <tbody id = "notificationFields">
                                                            
                                                        </tbody>
                                                      </thead>
                                                    </table>                                                          
                                                </div>
                                            </div>
                                            <div style="display: none;"></div>
                                            <div class="buttons" id="InlineEditDialog_buttons">
                                                <input type="button" onclick="disableBtn(this); collectSelectedFieldsNoti();" value="Save" class="btn dummyNotiSettingsSaveBtn dummyFreqSaveBtn btn-save" />
                                                <input type="button" onclick="jbaraCloseNotiForm()" value="Cancel" class="btn btn-cancel" />
                                                <apex:actionFunction name="saveNotificationSettings" action="{!saveAutosubscriptionFields}" reRender="NotificationTable" oncomplete="return jbaraCloseNotiForm();">
                                                    <apex:param name="selectedNotiFields" value="" />
                                                    <apex:param name="fromFieldSetting" value="" />
                                                </apex:actionFunction>
                                                
                                            </div>
                                        </div>
                                    </div>
                                    <div class="bottomRight">
                                        <div class="bottomLeft"></div>
                                    </div>
                                </div>
                            </apex:outputPanel>
                            
                            
                            <apex:outputPanel id="panelNotificationFreqConfig">
                                <div class="overlayDialog inlineEditDialog jbaraDummyNotifFreqSettingsForm bPageBlock"
                                    style="position: absolute; min-width: 700px; min-height: 220px; max-width: 800px; max-height: 300px; display: none;">
                                    <div class="topRight" style='cursor: move'>
                                        <div class="topLeft">
                                            <img src="/s.gif" class="dialogClose" onclick="cancelNotificationFreq()" onmouseout="this.className = 'dialogClose'"
                                                onmouseover="this.className = 'dialogCloseOn'" id="InlineEditDialogX" />
                                            <h2 id="InlineEditDialogTitle" class='dummyCSMFieldName'>
                                                Notification Frequency Setup
                                            </h2>
                                        </div>
                                    </div>
                                    <div class="middle" style="min-width: 680px; min-height: 280px;">
                                        <div id="InlineEditDialogContent" class="innerContent">
                                            <div class="activeField">
                                                <div class="inlineEditCompoundDiv" style ="text-align:left;">                                                     
                                                   <!-- Frequency setup standard controls  -->      
                                                            <table cellspacing="0" cellpadding="0" class = "notiTableCommon">
                                                                <tr class = "classFreq">
                                                                    <td>
                                                                        <apex:inputCheckbox value="{!notificationOn}" styleClass="enableNotifCheck" id="turnOn" onclick="checkAll(this)" >
                                                                        </apex:inputCheckbox> <apex:outputText styleClass="labelCol first enableNotifi" value=" Enable notification " />
                                                                    </td>
                                                                    <td></td>
                                                                </tr>
                                                                <tr class = "classFreq">
                                                                <td>    
                                                                    <apex:inputCheckbox value="{!realTimeSchedule}" id="realTime" styleClass="notificationCheck leftFloater"></apex:inputCheckbox>
                                                                    <apex:outputText styleClass="labelCol first leftPaddingErr" value=" Real-Time notifications every"/>
                                                                </td>
                                                                <td>
                                                                    <apex:selectRadio value="{!realTimeMinuteValue}" styleClass="leftFloater freqTimeSelect">
                                                                        <apex:selectOptions value="{!ListOfRealTimeMinuteValue}" />
                                                                    </apex:selectRadio> 
                                                                </td>
                                                                </tr>
                                                                <tr class = "classFreq">
                                                                    <td class = "labelCol first leftFloater">
                                                                        <apex:inputCheckbox value="{!dailySchedule}" id="daily" styleClass="notificationCheck"></apex:inputCheckbox>
                                                                        <apex:outputText styleClass="labelCol first" value=" Daily notifications" />
                                                                    </td>
                                                                    <td>
                                                                    
                                                                    </td>
                                                                </tr>
                                                                
                                                                <tr class = "classFreq">
                                                                <td>
                                                                    <apex:inputCheckbox value="{!weeklySchedule}" id="weekly" styleClass="notificationCheck"></apex:inputCheckbox>
                                                                    <apex:outputText styleClass="labelCol first" value=" Weekly notifications every" />
                                                                </td>
                                                                <td>
                                                                       <apex:selectList value="{!dayValue}" size="1" multiselect="false"  >
                                                                            <apex:selectOptions value="{!ListOfDayValue}" /> 
                                                                       </apex:selectList>  
                                                                </td>
                                                                </tr>   
                                                                <tr  class = "classFreq">
                                                                    <td style = "width: 215px;">
                                                                        <apex:outputText styleClass="labelCol first" value="Time at which daily and weekly email notifications should be delivered" />
                                                                    </td>
                                                                    <td>
                                                                        <apex:selectList value="{!hourValue}" size="1" multiselect="false"  >
                                                                        <apex:selectOptions value="{!ListOfHourValue}" /> </apex:selectList>
                                                                        <apex:outputText styleClass="labelCol first" value=" Hours " />
                                                                        <apex:selectList value="{!minuteValue}" size="1" multiselect="false"  >
                                                                                    <apex:selectOptions value="{!ListOfMinuteValue}" /> </apex:selectList>
                                                                        <apex:outputText styleClass="labelCol first" value=" Minutes " />
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                            <script>
                                                                if(j$(".freqTimeSelect").find("input[type='radio']:checked").length == 0) {
                                                                    j$(".freqTimeSelect").find("input[type='radio']").eq(0).attr("checked","checked");
                                                                }
                                                            </script>
                                                        <!-- Kiran -->                                              
                                                </div>
                                            </div>
                                            <div style="display: none;"></div>
                                            <div class="buttons" id="InlineEditDialog_buttons">
                                                <input type="button" onclick="disableBtn(this); saveNotificationFreq();" value="Save" class="btn dummyNotiSettingsSaveBtn dummyAllAdminSaveBtn btn-save" />
                                                <input type="button" onclick="cancelNotificationFreq()" value="Cancel" class="btn btn-cancel" />
                                                <apex:actionFunction name="saveNotificationFreq" action="{!runScheduler}" reRender="panelNotificationFreqConfig, NotifcationFreqDisplay" oncomplete="return jbaraCloseNotiFreqForm();" />
                                                <apex:actionFunction name="cancelNotificationFreq" action="{!notificationFreqInit}" reRender="panelNotificationFreqConfig, NotifcationFreqDisplay" oncomplete="return jbaraCloseNotiFreqForm();" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="bottomRight">
                                        <div class="bottomLeft"></div>
                                    </div>
                                </div>
                            </apex:outputPanel>
                            
                            
                                <!-- Opp Connector Settings Container Starts Here-->
                                <apex:outputPanel id="panelNewOppConnectorSettingsForm">
                                    <div class="overlayDialog inlineEditDialog jbaraDummyAdminOppConnectorSettingsForm bPageBlock"
                                        style="position: absolute; min-width: 700px; min-height: 220px; max-width: 800px; max-height: 300px; display: none;">
                                        <div class="topRight" style='cursor: move'>
                                            <div class="topLeft">
                                                <img src="/s.gif" class="dialogClose" onclick="jbaraCloseOpportunityMapInputForm()" onmouseout="this.className = 'dialogClose'"
                                                    onmouseover="this.className = 'dialogCloseOn'" id="InlineEditDialogX" />
                                                <h2 id="InlineEditDialogTitle" class='dummySettingsTypeName'>
                                                    Opportunity Connector Settings
                                                </h2>
                                            </div>
                                        </div>
                                        <div class="middle" style="min-width: 680px; min-height: 280px;">
                                            <div id="InlineEditDialogContent" class="innerContent">
                                                <div class="activeField">
                                                    <div class="inlineEditCompoundDiv">
                                                        <apex:pageMessages id="jbaraAdminOppConnectorSettingsErrorMessages" />
                                                            <table class="rounded-corner" width="100%">
                                                                <tbody>
                                                                <tr class="churnSettingsCls">
                                                                    <td width="50%">
                                                                        <b>Additional booking types to show in {!(transOTPLNameMapBySysNameAdmin['Churn'])}</b>
                                                                    </td>
                                                                    <td width="50%">
                                                                    </td>
                                                                </tr>
                                                                <tr class="churnSettingsCls">
                                                                    <td width="50%" style="float:right;">
                                                                        {!(transOTPLNameMapBySysNameAdmin['Downsell'])}
                                                                    </td>
                                                                    <td width="50%">
                                                                        <apex:inputCheckbox value="{!downsellInChurn}" StyleClass="jbaraDummyAdminCheckboxCtrl checkboxChurnInput"/>
                                                                    </td>
                                                                </tr>
                                                                <tr class="churnSettingsCls">
                                                                    <td width="50%" style="float:right;padding-bottom:10px;">
                                                                        {!(transOTPLNameMapBySysNameAdmin['Renewal with Downsell'])}
                                                                    </td>
                                                                    <td width="50%" style="padding-bottom:10px;">
                                                                        <apex:inputCheckbox value="{!renewalWithDownsellInChurn}" StyleClass="jbaraDummyAdminCheckboxCtrl checkboxChurnInput"/>
                                                                    </td>
                                                                </tr>
                                                                <tr class="churnSettingsCls" style="border-top:2px dashed;">
                                                                    <td width="50%" style="padding-top:10px;">
                                                                        <b>Show {!(transOTPLNameMapBySysNameAdmin['Renewal'])} based {!(transOTPLNameMapBySysNameAdmin['Churn'])}</b>
                                                                    </td>
                                                                    <td width="50%" style="padding-top:10px;">
                                                                        <apex:inputCheckbox value="{!renewalBasedChurn}" StyleClass="jbaraDummyAdminCheckboxCtrl checkboxChurnInput"/>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>                                                        
                                                    </div>
                                                </div>
                                                <div style="display: none;"></div>
                                                <div class="buttons" id="InlineEditDialog_buttons">
                                                    <input type="button" onclick="saveAdminOppConnectorSettings()" value="Save" class="btn dummyAllAdminOppConnectorSettingsSaveBtn dummyOppSettingsBtn btn-save" />
                                                    <input type="button" onclick="jbaraCloseOpportunityMapInputForm()" value="Cancel" class="btn btn-cancel" />
                                                    <apex:actionFunction name="actionSaveAdminOppConnectorSettingsNames" action="{!saveAppSettingsItem}"
                                                        reRender=" OpportunityConnectorSettingsIdBlock, churnSettingsIdBlock, jbaraAdminOppConnectorSettingsErrorMessages, jsAfterSaveAppSettings">
                                                    </apex:actionFunction>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bottomRight">
                                            <div class="bottomLeft"></div>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <!--Opp Connector Settings Container Ends Here-->
                                
                                <!-- Churn Settings Container Starts Here-->
                                <apex:outputPanel id="panelChurnSettingsForm">
                                    <div class="overlayDialog inlineEditDialog jbaraDummyAdminChurnSettingsForm bPageBlock"
                                        style="position: absolute; min-width: 700px; min-height: 220px; max-width: 800px; max-height: 300px; display: none;">
                                        <div class="topRight" style='cursor: move'>
                                            <div class="topLeft">
                                                <img src="/s.gif" class="dialogClose" onclick="jbaraCloseOpportunityMapInputForm()" onmouseout="this.className = 'dialogClose'"
                                                    onmouseover="this.className = 'dialogCloseOn'" id="InlineEditDialogX" />
                                                <h2 id="InlineEditDialogTitle" class='dummyBookingTypeName'>
                                                    {!(transOTPLNameMapBySysNameAdmin['Churn'])} Settings
                                                </h2>
                                            </div>
                                        </div>
                                        <div class="middle" style="min-width: 680px; min-height: 280px;">
                                            <div id="InlineEditDialogContent" class="innerContent">
                                                <div class="activeField">
                                                <apex:pageMessages id="jbaraAdminBOPSettingsErrorMessages" />
                                                    <div class="inlineEditCompoundDiv">
                                                        
                                                        <div id="bopDiv">
                                                        <table width="100%" style="margin-bottom:15px;">
                                                            <tr class="churnBOPSettingsCls">
                                                                <td width="50%">
                                                                    <b>Use manually entered BOP for {!(transOTPLNameMapBySysNameAdmin['Churn'])} calculation:</b>
                                                                </td>
                                                                <td width="50%">
                                                                    <apex:inputCheckbox value="{!churnByBOP}" StyleClass="jbaraDummyAdminCheckboxCtrl checkboxChurnBOPInput" onclick="toggleChurnBOPTable()"/>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                        <table id="churnBOPSettingsId" style="display:none;">
                                                            <tr style="font-weight:bold">
                                                                    <td style="width:50px;padding-right:20px;padding-bottom:7px;">Year</td>
                                                                    <td style="width:80px;padding-right:20px;padding-bottom:7px;">Customers</td>
                                                                    <td style="width:80px;padding-right:20px;padding-bottom:7px;">Users</td>
                                                                    <td style="width:80px;padding-right:20px;padding-bottom:7px;">MRR</td>
                                                                    <td style="width:80px;padding-right:20px;padding-bottom:7px;">ASV</td>
                                                            </tr>
                                                            <apex:repeat value="{!ChurnBOPSettings}" var="churnBOPCal" id="repeatChurnBOPEntry">
                                                                <tr style="margin-bottom:3px;">
                                                                    <td style="width:50px;font-weight:bold;padding-bottom:3px;">
                                                                        <apex:outputText value="{!churnBOPCal.year}" id="yearVal" /> 
                                                                    </td>
                                                                    <td style="width:80px;padding-right:20px;padding-bottom:3px;">
                                                                        <apex:inputText value="{!churnBOPCal.customers}" maxlength="13" size="13" styleClass="churnBOPItemValNum" title="Please enter a number"/> 
                                                                    </td>
                                                                    <td style="width:80px;padding-right:20px;padding-bottom:3px;">
                                                                         <apex:inputText value="{!churnBOPCal.users}" maxlength="13" size="13" styleClass="churnBOPItemValNum" title="Please enter a number"/>
                                                                    </td>
                                                                    <td style="width:80px;padding-right:20px;padding-bottom:3px;">
                                                                        <apex:inputText value="{!churnBOPCal.MRR}" maxlength="13" size="13" styleClass="churnBOPMRR churnBOPItemVal" onChange="populateASV(this)" title="Please enter a decimal / number"/> 
                                                                    </td>
                                                                    <td style="width:80px;padding-right:20px;padding-bottom:3px;">
                                                                         <apex:inputText value="{!churnBOPCal.ASV}" maxlength="13" size="13" styleClass="churnBOPASV churnBOPItemVal" onChange="populateMRR(this)" title="Please enter a decimal / number"/>
                                                                    </td>   
                                                                </tr>
                                                            </apex:repeat>
                                                            
                                                        </table>
                                                    </div>                                                      
                                                    </div>
                                                </div>
                                                <div style="display: none;"></div>
                                                <div class="buttons" id="InlineEditDialog_buttons">
                                                    <input type="button" onclick="saveAdminOppConnectorSettings()" value="Save" class="btn dummyAllAdminOppConnectorSettingsSaveBtn dummyOppSettingsBtn btn-save" />
                                                    <input type="button" onclick="jbaraCloseOpportunityMapInputForm()" value="Cancel" class="btn btn-cancel" />
                                                    <apex:actionFunction name="actionSaveAdminOppConnectorSettingsNames" action="{!saveAppSettingsItem}"
                                                        reRender=" OpportunityConnectorSettingsIdBlock, churnSettingsIdBlock, jbaraAdminBOPSettingsErrorMessages, jsAfterSaveAppSettings">
                                                    </apex:actionFunction>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bottomRight">
                                            <div class="bottomLeft"></div>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <!--Churn Settings Container Ends Here-->
                                
                                
                                <!-- Licensed Users Settings Container Starts Here-->
                                <apex:outputPanel id="panelLicensedUsersSettingsForm">
                                    <div class="overlayDialog inlineEditDialog jbaraDummyLicensedUsersSettingsForm bPageBlock"
                                        style="position: absolute; min-width: 700px; min-height: 220px; max-width: 800px; max-height: 300px; display: none;">
                                        <div class="topRight" style='cursor: move'>
                                            <div class="topLeft">
                                                <img src="/s.gif" class="dialogClose" onclick="jbaraCloseOpportunityMapInputForm()" onmouseout="this.className = 'dialogClose'"
                                                    onmouseover="this.className = 'dialogCloseOn'" id="InlineEditDialogX" />
                                                <h2 id="InlineEditDialogTitle" class='dummyBookingTypeName'>
                                                    UI Settings - 'Licensed Users'
                                                </h2>
                                            </div>
                                        </div>
                                        <div class="middle" style="min-width: 680px; min-height: 280px;">
                                            <div id="InlineEditDialogContent" class="innerContent">
                                                <div class="activeField">
                                                    <div class="inlineEditCompoundDiv">                                                     
                                                        <table width="100%" style="margin-bottom:15px;"  class="rounded-corner">                                                            
                                                            <tr class="LicensedUsersSettingsCls">
                                                                <td class="header" width="25%">
                                                                    Disable in Adoption Graph
                                                                </td>
                                                                <td width="25%">
                                                                    <apex:inputCheckbox value="{!disableLicensedUserInGraph}" StyleClass="jbaraDummyAdminCheckboxCtrl licensedUsersInput"/>
                                                                </td>
                                                            </tr>
                                                            <tr class="LicensedUsersSettingsCls">
                                                                <td class="header" width="25%">
                                                                    Disable in Adoption Grid
                                                                </td>
                                                                <td width="25%">
                                                                    <apex:inputCheckbox value="{!disableLicensedUserInGrid}" StyleClass="jbaraDummyAdminCheckboxCtrl licensedUsersInput"/>
                                                                </td>
                                                            </tr>
                                                        </table>                                                        
                                                    </div>
                                                </div>
                                                <div style="display: none;"></div>
                                                <div class="buttons" id="InlineEditDialog_buttons">
                                                    <input type="button" onclick="disableBtn(this);saveAdminLicensedUserSettings();" value="Save" class="btn dummyAllAdminLicensedUserSettingsSaveBtn dummyAllAdminSaveBtn btn-save" />
                                                    <input type="button" onclick="jbaraCloseAdminInputForm()" value="Cancel" class="btn btn-cancel" />
                                                    <apex:actionFunction name="saveAdminLicensedUserSettings" action="{!saveAppSettingsItem}"
                                                        reRender="licensedUsersSettingsBlock" oncomplete="return jbaraAfterSaveLicensedUserClick();">
                                                    </apex:actionFunction>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bottomRight">
                                            <div class="bottomLeft"></div>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <!--Licensed Users Settings Container Ends Here-->
                                
                                <!-- Enable Survey Permissions Starts Here-->
                                <apex:outputPanel id="panelSurveyPermissionsForm">
                                    <div class="overlayDialog inlineEditDialog jbaraDummySurveyPermissionsForm bPageBlock"
                                        style="position: absolute; min-width: 700px; min-height: 100px; max-width: 800px; max-height: 200px !important; display: none;">
                                        <div class="topRight" style='cursor: move'>
                                            <div class="topLeft">
                                                <img src="/s.gif" class="dialogClose" onclick="jbaraCloseOpportunityMapInputForm()" onmouseout="this.className = 'dialogClose'"
                                                    onmouseover="this.className = 'dialogCloseOn'" id="InlineEditDialogX" />
                                                <h2 id="InlineEditDialogTitle" class='dummyBookingTypeName'>
                                                    Survey Permissions
                                                </h2>
                                            </div>
                                        </div>
                                        <div class="middle" style="min-width: 680px; min-height: 150px;">
                                            <div id="InlineEditDialogContent" class="innerContent">
                                                <div class="activeField"><br/>
                                                    <div class="inlineEditCompoundDiv surveyPermissionsSettingsCls">                                                        
                                                                                                                
                                                    </div>
                                                </div>
                                                <div style="display: none;"></div>
                                                <div class="buttons" id="InlineEditDialog_buttons">
                                                    <input type="button" onclick="disableBtn(this);saveSurveyPermissionsSettingsClick();" value="Save" class="btn dummySurveyPermissionsSaveBtn dummyAllAdminSaveBtn btn-save" />
                                                    <input type="button" onclick="jbaraCloseAdminInputForm()" value="Cancel" class="btn btn-cancel" />
                                                    <apex:actionFunction name="saveSurveyPermissionsSettings" action="{!savePermissionsConfigList}"
                                                            reRender="panelSurveyPermissionsPageblock" oncomplete="return jbaraAfterSaveSurveyPermissionsClick();">
                                                        <apex:param name="surveyPermissionsJSON" value="" />
                                                    </apex:actionFunction>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bottomRight">
                                            <div class="bottomLeft"></div>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <!-- Enable Survey Permissions Ends Here-->

                                <!-- Migrate Ext NPS Starts Here-->
                                <apex:outputPanel id="panelExtNPSMigrate">
                                    <div class="overlayDialog inlineEditDialog jbaraDummyExtNPSForm bPageBlock nps-dialog"
                                        style="position: absolute; min-width: 700px; min-height: 100px; max-width: 800px; display: none;">
                                        <div class="topRight" style='cursor: move'>
                                            <div class="topLeft">
                                                <img src="/s.gif" class="dialogClose" onclick="jbaraCloseOpportunityMapInputForm()" onmouseout="this.className = 'dialogClose'"
                                                    onmouseover="this.className = 'dialogCloseOn'" id="InlineEditDialogX" />
                                                <h2 id="InlineEditDialogTitle" class='dummyBookingTypeName'>
                                                    External NPS<sup>&reg;</sup> Migration to Survey 2.0
                                                </h2>
                                            </div>
                                        </div>
                                        <div class="middle" style="min-width: 680px; min-height: 150px;">
                                            <div id="InlineEditDialogContent" class="innerContent">
                                                <apex:pageBlock >
                                                    <div class="nps-migration-ctn">

                                                    <div class="loader gs-loader-container-32"><div class="preloader-wrapper preloader-wrapper-medium active" style="float : left;"><div class="spinner-layer spinner-blue-only no-left"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div><div class="gs-loader-message-32">Loading...</div></div>
                                                        <div class="select-survey" style="display:none; padding: 5px 0;border: 1px solid #EA4335;">Select survey to migrate</div>
                                                        <div class="migration-fail" style="display:none">Migration failed. Try again!</div>

                                                            <table style="color:#015BA7; width: 100%">
                                                                <tbody>
                                                                    <thead>
                                                                        <tr>
                                                                            <th>
                                                                                  <div  class="migrateAllNPSCheck" style="padding:10px 0; text-align: left;">
                                                                                      <input type="checkbox" onclick="checkAllMigrate(this)"/>
                                                                                  </div>
                                                                              </th>
                                                                              <th>Survey</th>
                                                                        </tr>
                                                                      </thead>
                                                                     <apex:repeat value="{!AllSurveyMasterList}" var="SurveyMasterList" rendered="true">
                                                                         <apex:outputPanel rendered="{!SurveyMasterList.JBCXM__SurveyId__c == null}" layout="none">
                                                                            <tr>
                                                                                <td>
                                                                                    <div class="migrateNPSCheck">
                                                                                        <input type="checkbox" value="{!SurveyMasterList.Id}"/>
                                                                                    </div>
                                                                                </td>
                                                                                <td>{!SurveyMasterList.JBCXM__SurveyName__c}
                                                                                    <span class='migration-status' data-id="{!SurveyMasterList.Id}" style="visibility:hidden">Migrated</span>
                                                                                </td>
                                                                            </tr>
                                                                        </apex:outputPanel>
                                                                    </apex:repeat>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </apex:pageBlock>
                                                    <div class="buttons" id="InlineEditDialog_buttons">
                                                        <input type="button" onclick="disableBtn(this);migrateNPS(this);" value="Migrate" class="btn dummyNPSMigrateBtn dummyAllAdminSaveBtn btn-save" />
                                                        <input type="button" onclick="jbaraCloseOpportunityMapInputForm();unCheckAllMigrate();" value="Cancel" class="btn btn-cancel" />
                                                    </div>
                                                </div>
                                            </div>
                                    </div>
                                </apex:outputPanel>
                                <!-- Migrate Ext NPS Ends Here-->

                                <!-- Enable Survey Text Analytics Starts Here-->
                                <apex:outputPanel id="panelSurveyAnalyticsForm">
                                    <div class="overlayDialog inlineEditDialog jbaraDummySurveyAnalyticsPermissionsForm bPageBlock"
                                        style="position: absolute; min-width: 700px; min-height: 100px; max-width: 800px; max-height: 200px !important; display: none;">
                                        <div class="topRight" style='cursor: move'>
                                            <div class="topLeft">
                                                <img src="/s.gif" class="dialogClose" onclick="jbaraCloseOpportunityMapInputForm()" onmouseout="this.className = 'dialogClose'"
                                                    onmouseover="this.className = 'dialogCloseOn'" id="InlineEditDialogX" />
                                                <h2 id="InlineEditDialogTitle" class='dummyBookingTypeName'>
                                                    Survey Text Analytics
                                                </h2>
                                            </div>
                                        </div>
                                        <div class="middle" style="min-width: 680px; min-height: 150px;">
                                            <div id="InlineEditDialogContent" class="innerContent">
                                                <div class="activeField"><br/>
                                                    <div class="inlineEditCompoundDiv surveyAnalyticsSettingsCls">
                                                                                                                
                                                    </div>
                                                </div>
                                                <div style="display: none;"></div>
                                                <div class="buttons" id="InlineEditDialog_buttons">
                                                    <input type="button" id="saveSurveyStateBtn" onclick="saveSurveyAnalyticsSettingsClick();" value="Save" class="btn dummySurveyPermissionsSaveBtn dummyAllAdminSaveBtn btn-save" />
                                                    <input type="button" onclick="jbaraCloseAdminInputForm()" value="Cancel" class="btn btn-cancel" />
                                                    <p id='surveySaveStateInfo'></p>
                                                    <apex:actionFunction name="saveSurveyAnalyticsSettings" action="{!updateSurveyTextAnalyticsConfig}"
                                                            reRender="panelSurveyAnalyticsPageblock" oncomplete="return jbaraAfterSaveSurveyPermissionsClick();">
                                                        <apex:param name="surveyTextAnalyticsConfig" value="" />
                                                    </apex:actionFunction>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bottomRight">
                                            <div class="bottomLeft"></div>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <!-- Enable Survey Text Analytics Ends Here-->
                                
                                <!-- Enable Dashboard Permissions Starts Here-->
                                <apex:outputPanel id="panelDashboardPermissionsForm">
                                    <div class="overlayDialog inlineEditDialog jbaraDummyDashboardPermissionsForm bPageBlock"
                                        style="position: absolute; min-width: 700px; min-height: 100px; max-width: 800px; max-height: 200px !important; display: none;">
                                        <div class="topRight" style='cursor: move'>
                                            <div class="topLeft">
                                                <img src="/s.gif" class="dialogClose" onclick="jbaraCloseOpportunityMapInputForm()" onmouseout="this.className = 'dialogClose'"
                                                    onmouseover="this.className = 'dialogCloseOn'" id="InlineEditDialogX" />
                                                <h2 id="InlineEditDialogTitle" class='dummyBookingTypeName'>
                                                    Dashboard Permissions
                                                </h2>
                                            </div>
                                        </div>
                                        <div class="middle" style="min-width: 680px; min-height: 150px;">
                                            <div id="InlineEditDialogContent" class="innerContent">
                                                <div class="activeField"><br/>
                                                    <div class="inlineEditCompoundDiv dashboardPermissionsSettingsCls">                                                     
                                                                                                                
                                                    </div>
                                                </div>
                                                <div style="display: none;"></div>
                                                <div class="buttons" id="InlineEditDialog_buttons">
                                                    <input type="button" onclick="disableBtn(this);saveDashboardPermissionsSettingsClick();" value="Save" class="btn dummyDashboardPermissionsSaveBtn dummyAllAdminSaveBtn btn-save" />
                                                    <input type="button" onclick="jbaraCloseAdminInputForm()" value="Cancel" class="btn btn-cancel" />
                                                    <apex:actionFunction name="saveDashboardPermissionsSettings" action="{!saveDashboardPermissionsConfigList}"
                                                            reRender="panelDashboardPermissionsPageblock" oncomplete="return jbaraAfterSaveDashboardPermissionsClick();">
                                                        <apex:param name="dashboardPermissionsJSON" value="" />
                                                    </apex:actionFunction>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bottomRight">
                                            <div class="bottomLeft"></div>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <!-- Enable Dashboard Permissions Ends Here-->
                                
                                
                                <apex:inputTextArea value="{!existingHeaderFieldNames}" style="display:none;" styleClass="jbaraDummyHeaderFieldNames" />
                        
                                <!-- Overlay Container Starts Here-->
                                <div class="overlayBackground jbaraDummyOverLayForm" style="position: absolute; display: none;"></div>
                                                
                            
                            <!--Administration Opportunity Map Ends Here-->
                        
                    </apex:form>

                        <!--Administration Log Tab Starts Here-->
                        <!--Administration Log Tab Starts Here-->
                        <div id="AdministrationLog" style="align:center;">
                            <apex:enhancedList type="Log__c" rowsPerPage="25" height="300" id="AdministrationLog" customizable="false" />
                        </div>
                        <!--Administration Log Tab Ends Here-->

                </div>
            </div>
        </apex:outputPanel>


    <apex:form >
        <!-- Overlay Container Starts Here-->
        <div class="overlayBackground jbaraDummyOverLayForm" style="position: absolute; display: none;">
        </div>

        <!-- Admin Entry Form Container Starts Here-->
        <apex:outputPanel id="panelNewAdminForm">
            <div class="overlayDialog inlineEditDialog jbaraDummyAdminInputForm bPageBlock"
            style="position: absolute; min-width: 800px; min-height: 220px; max-width: 800px; max-height: 400px; display: none;">
                <div class="topRight" style='cursor: move'>
                    <div class="topLeft">
                        <img src="/s.gif" class="dialogClose" onclick="jbaraCloseAdminInputForm()"
                        onmouseout="this.className = 'dialogClose'" onmouseover="this.className = 'dialogCloseOn'"
                        id="InlineEditDialogX" />
                        <h2 id="InlineEditDialogTitle">
                            <apex:outputPanel rendered="{!IF((picklistCategory == 'SalesRep Name') ,true,false)}" styleClass="DialogTitleClass">
                                Event Type
                           </apex:outputPanel>
                           <apex:outputPanel rendered="{!IF((picklistCategory == 'Customer Stage') ,true,false)}" styleClass="DialogTitleClass">
                                {!JSENCODE(saasMetricLabels['Stage'])}
                           </apex:outputPanel>
                           <apex:outputPanel rendered="{!IF((picklistCategory != 'Customer Stage' && picklistCategory != 'Order Type' && picklistCategory != 'SalesRep Name') ,true,false)}" styleClass="DialogTitleClass">
                                {!JSENCODE(picklistCategory)}
                           </apex:outputPanel>
                           <apex:outputPanel rendered="{!IF((picklistCategory == 'Order Type') ,true,false)}" styleClass="DialogTitleClass">
                                Booking Type    
                           </apex:outputPanel>
                        </h2>
                        <span class="pbSubExtra" style='float: right; margin-right: 10px; margin-top: 15px;'>
                            <span class="requiredLegend">
                                <span class="requiredExampleOuter">
                                    <span class="requiredExample">
                                        &nbsp;
                                    </span>
                                </span>
                                <span class="requiredMark">
                                    *
                                </span>
                                <span class="requiredText">
                                    = Required Information
                                </span>
                            </span>
                        </span>
                    </div>
                </div>
                <div class="middle" style="min-width: 680px; min-height: 280px;">
                    <div id="InlineEditDialogContent" class="innerContent">
                        <div class="activeField">
                            <div class="inlineEditCompoundDiv">
                                <apex:pageMessages id="jbaraAdminErrorMessages" />
                                <script type="text/javascript" >
                                        var hlpCatergory = "{!JSENCODE(picklistCategory)}";
                                        if(hlpCatergory=='Customer Stage'){
                                            hlpCatergory = "{!JSENCODE(saasMetricLabels['Stage'])}"; 
                                        }
                                        
                                        //To change the churn label.
                                        if(j$.trim(j$("span.DialogTitleClass").text()) == "Churn Reason") {
                                            j$("span.DialogTitleClass").text(''+dummyTransOTPLNameMapBySysNameJSONStr['Churn']+' Reason');
                                        }
                                                           
                                 </script>
                                <table class="rounded-corner" width="100%">
                                    <tbody>
                                        
                                        <tr>
                                            <td class="header" width="25%">
                                                   <span id="Name-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                        Name:
                                                        <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"
                                                        />
                                                        <script type="text/javascript" >
                                                           sfdcPage.setHelp('Name', 'Enter '+hlpCatergory+' name.');
                                                        </script>
                                                    </span>
                                                </td>
                                                <td width="25%">
                                                    <apex:outputPanel styleClass="requiredInput" layout="block">
                                                       <apex:outputPanel styleClass="requiredBlock" layout="block" />
                                                            <apex:inputText value="{!picklistName}" size="50" maxlength="30" StyleClass="jbaraDummyAdminInputCtrl subjectInput nameInputClass"
                                                        />
                                                    </apex:outputPanel>
                                                </td>
                                        </tr>
                                        <tr class="UsageGroupAdoptionAttribute" style="display:none">                                            
                                               <td class="header" width="25%">
                                                   <span id="Group-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                       Group:
                                                       <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif" />
                                                       <script type="text/javascript" >
                                                           sfdcPage.setHelp('Group', 'Enter Adoption group.');
                                                       </script>
                                                   </span>
                                                </td>
                                                <td width="75%">
                                                       <apex:selectList value="{!adoptionGroupName}" multiselect="false" size="1" StyleClass="jbaraDummyAdoptionGroupNameSelectCtrl jbaraDummyAdminSelectCtrl" >
                                                                <apex:selectOptions value="{!AdoptionGroupOptions}" />
                                                         </apex:selectList>     
                                                         <span Class="jbaraDummyNewAdoptionGroupName" title="Click on icon to add new Adoption group" style="background-image: url('/img/alohaSkin/addTabs.png');height: 12px;width: 12px;display:inline-block;cursor:pointer;" >&nbsp;</span>
                                                         <br/><apex:inputText value="{!adoptionGroupName}" Styleclass="theHiddenAdoptionGroupName jbaraDummyAdminInputCtrl"  style="display:none;margin-top:5px"/>
                                                   
                                                </td>
                                        </tr>
                                        <tr>
                                             <td class="header" width="25%">
                                                 <span id="DisplayOrder-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                     Display Order:
                                                     <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"
                                                     />
                                                     <script type="text/javascript" >
                                                        sfdcPage.setHelp('DisplayOrder', 'Enter display order (must be unique within '+hlpCatergory+').');
                                                     </script>
                                                 </span>
                                             </td>
                                             <td width="25%">
                                                  <apex:outputPanel styleClass="requiredInput" layout="block">
                                                    <apex:outputPanel styleClass="requiredBlock DisplayOrderInputRequired" layout="block" />
                                                    <apex:inputText value="{!displayOrder}" size="10" maxlength="4" StyleClass="jbaraDummyAdminInputCtrl DisplayOrderInput"
                                                     />
                                                 </apex:outputPanel>
                                             </td>
                                        </tr>
                                        <tr>
                                            <td class="header" width="25%">
                                                System Name:
                                                <apex:outputPanel rendered="{!$ObjectType.JBCXM__PickList__c.Fields.JBCXM__SystemName__c.inlineHelpText != null}">
                                                      <span id="SystemName-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                          <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"
                                                          />
                                                          <script type="text/javascript" >
                                                              sfdcPage.setHelp('SystemName', '{!JSENCODE($ObjectType.PickList__c.Fields.SystemName__c.inlineHelpText)}');
                                                          </script>
                                                      </span>
                                                 </apex:outputPanel>
                                            </td>
                                            <td width="25%">
                                                 <apex:outputPanel styleClass="requiredInput" layout="block">
                                                   <apex:outputPanel styleClass="requiredBlock" layout="block" />
                                                    <apex:inputText value="{!systemName}" size="50" maxlength="30" StyleClass="jbaraDummyAdminInputCtrl subjectInput systemNameInputClass"
                                                        />
                                                </apex:outputPanel>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="header" width="25%">
                                                   <span id="ShortName-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                        Short Name:
                                                        <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"
                                                        />
                                                        <script type="text/javascript" >
                                                              sfdcPage.setHelp('ShortName', '{!JSENCODE($ObjectType.PickList__c.Fields.ShortName__c.inlineHelpText)}');
                                                        </script>
                                                    </span>
                                                </td>
                                                <td width="25%">
                                                    <apex:inputText value="{!shortName}" size="50" maxlength="15" StyleClass="jbaraDummyAdminInputCtrl subjectInput shortNameInputClass"
                                                        />
                                                </td>
                                        </tr>
                                        <tr class="includeInWidget">
                                            <td class="header" width="25%">
                                                <span id="IncludeInWidget-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                    <span class="dummyIncludeInWidgetLabel">Include In Widget:</span>
                                                    <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"/>
                                                    <script type="text/javascript" >
                                                            if("{!JSENCODE(picklistCategory)}"=="Adoption Measure Types"){
                                                                sfdcPage.setHelp('IncludeInWidget', 'Use this measure for calculating usage % in relation to licensed users.');
                                                              }
                                                            else{
                                                                sfdcPage.setHelp('IncludeInWidget', 'Include this '+hlpCatergory+' in widget.');
                                                             }
                                                    </script>
                                                </span>
                                            </td>
                                            <td width="25%">
                                                <apex:inputCheckbox value="{!includeInWidget}" StyleClass="jbaraDummyAdminCheckboxCtrl checkboxSystemDefinedInput"/>
                                            </td>
                                        </tr>
                                        <tr class="AdoptionMeasureAttribute" style="display:none">
                                            <td class="header" width="25%">
                                                Include In Adoption:
                                                <apex:outputPanel rendered="{!$ObjectType.JBCXM__PickList__c.Fields.JBCXM__AdoptionMeasure__c.inlineHelpText != null}">
                                                      <span id="AdoptionMeasure-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                          <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"
                                                          />
                                                          <script type="text/javascript" >
                                                              sfdcPage.setHelp('AdoptionMeasure', '{!JSENCODE($ObjectType.PickList__c.Fields.AdoptionMeasure__c.inlineHelpText)}');
                                                          </script>
                                                      </span>
                                                 </apex:outputPanel>
                                            </td>
                                            <td width="25%">
                                                <apex:inputCheckbox value="{!includeInAdoption}" StyleClass="jbaraDummyAdminCheckboxCtrlAdoptionMeasure"/>
                                            </td>
                                        </tr>
                                        
                                        <tr class="UsageTrackingMeasureAttribute" style="display:none">
                                            <td class="header" width="25%">
                                                Include In Usage Tracker:
                                                <apex:outputPanel rendered="{!$ObjectType.JBCXM__PickList__c.Fields.JBCXM__UsageTrackingMeasure__c.inlineHelpText != null}">
                                                      <span id="UsageTrackingMeasure-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                          <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"
                                                          />
                                                          <script type="text/javascript" >
                                                              sfdcPage.setHelp('UsageTrackingMeasure', '{!JSENCODE($ObjectType.PickList__c.Fields.UsageTrackingMeasure__c.inlineHelpText)}');
                                                          </script>
                                                      </span>
                                                 </apex:outputPanel>
                                            </td>
                                            <td width="25%">
                                                <apex:inputCheckbox value="{!includeInUsageTracking}" StyleClass="jbaraDummyAdminCheckboxCtrlUsageTracking "/>
                                            </td>
                                        </tr>
                                        
                                        <tr class="UsageDefalutAdoptionAttribute" style="display:none">
                                            <td class="header" width="25%">
                                                Default Visible:
                                                <apex:outputPanel rendered="{!$ObjectType.JBCXM__PickList__c.Fields.JBCXM__Attribute4__c.inlineHelpText != null}">
                                                      <span id="Attribute4-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                          <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"
                                                          />
                                                          <script type="text/javascript" >
                                                              sfdcPage.setHelp('Attribute4', 'Check to visble by default in Adoption Graph / Uncheck to hide by default in Adoption Graph.');
                                                          </script>
                                                      </span>
                                                 </apex:outputPanel>
                                            </td>
                                            <td width="25%">
                                                <apex:inputCheckbox value="{!includeAdoptionByDefault}" StyleClass="jbaraDummyAdminCheckboxCtrlUsageDefalutAdoption jbaraDummyAdminCheckboxCtrl"/>
                                            </td>
                                        </tr>
                                        
                                        <tr class="AlertStatusField" style="display:none">
                                            <td class="header" width="25%">
                                                <span id="AlertStatusField-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                    <span class="dummyAlertStatusFieldLabel">Alert Status:</span>
                                                    <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"/>
                                                    <script type="text/javascript" >                                                        
                                                        sfdcPage.setHelp('AlertStatusField', 'Alert Stage is defaulted to Active. For alert status that requir no further action, use closed stage');
                                                    </script>
                                                </span>
                                            </td>
                                            <td width="25%">
                                                <apex:selectList id="chooseColor" value="{!AlertStatusOpenClosed}" size="1">
                                                    <apex:selectOption itemValue="true" itemLabel="Active"/>
                                                    <apex:selectOption itemValue="false" itemLabel="Closed"/>
                                                </apex:selectList>
                                            </td>
                                        </tr>
                                        
                                        
                                        <tr class="colorAttribute">
                                            <td class="header" width="25%">
                                                Color:
                                                <apex:outputPanel rendered="{!$ObjectType.JBCXM__PickList__c.Fields.JBCXM__Attribute1__c.inlineHelpText != null}">
                                                      <span id="Color-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                          <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"
                                                          />
                                                          <script type="text/javascript" >
                                                              sfdcPage.setHelp('Color', '{!JSENCODE($ObjectType.PickList__c.Fields.Attribute1__c.inlineHelpText)}');
                                                          </script>
                                                      </span>
                                                 </apex:outputPanel>
                                            </td>
                                            <td width="25%">
                                                <div class="controlset">
                                                    <input id="jbaraColorPicker" type="text" name="color1" value="{!colorAttribute}" />
                                                    <apex:inputText value="{!colorAttribute}" styleClass="dummySubjectColorInputText color_value" style="display:none"/>
                                                </div>
                                            </td>
                                        </tr>
                                        
                                        <tr class="mapToBookingType" style="display:none">                                          
                                            <td class="header" width="25%">
                                                <apex:outputPanel rendered="{!IF((isSystemDefined != true && picklistCategory == 'Order Type'),true,false)}" >
                                                    <span id="MapToBookingType-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                        <span class="dummyMapToBookingTypeLable">Map to Booking Type:</span>
                                                        <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"/>
                                                        <script type="text/javascript" >
                                                            sfdcPage.setHelp('MapToBookingType', 'Map custom Booking Type to existing booking type(Upsell,Downsell,Debook)');
                                                        </script>
                                                    </span>
                                                </apex:outputPanel>
                                            </td>
                                            <td width="25%">
                                                <apex:outputPanel rendered="{!IF((isSystemDefined != true && picklistCategory == 'Order Type'),true,false)}" >
                                                    <apex:outputPanel styleClass="requiredInput" layout="block">
                                                        <apex:outputPanel styleClass="requiredBlock" layout="block" />
                                                        <apex:selectList id="mapToBookingTypeSelect" value="{!mapToBookingType}" size="1" styleClass="mapToBookingTypeSelectClass" disabled="{!hasTransInOrderType}">  
                                                            <apex:selectOption itemValue="" itemLabel="None"/>
                                                            <apex:selectOption itemValue="Upsell" itemLabel="Upsell"/>
                                                            <apex:selectOption itemValue="Downsell" itemLabel="Downsell"/>
                                                            <apex:selectOption itemValue="Debook" itemLabel="Debook"/>
                                                        </apex:selectList>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                            </td>
                                            
                                        </tr>
                                        <tr class="activeTrClass">
                                            <td class="header" width="25%">
                                                <span id="Active-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                    Active:
                                                    <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"/>
                                                    <script type="text/javascript" >
                                                        sfdcPage.setHelp('Active', 'Check to Activate / Uncheck to Deactivate.');
                                                    </script>
                                                </span>
                                            </td>
                                            <td width="25%">
                                                <apex:inputCheckbox value="{!isActive}" StyleClass="jbaraDummyAdminCheckboxCtrlActive checkboxActiveInput"/>
                                            </td>
                                        </tr>


                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div>
                        </div>
                        <div style="display: none;">
                        </div>
                        <div class="buttons" id="InlineEditDialog_buttons">
                            <input type="button" onclick="disableBtn(this);actionSaveAdmin()" value="Save"
                            class="btn dummyAllAdminSaveBtn btn-save"/>
                            <input type="button" onclick="jbaraCloseAdminInputForm()" value="Cancel"
                            class="btn btn-cancel"/>
                            <apex:actionFunction name="actionSaveAdmin" action="{!savePickList}" reRender="jbaraAdminErrorMessages,jsPanel,allAdminCategoryTypes,churnReasonAdminIdBlock,churnSettingsIdBlock,customerStatusColor,panelNewOppConnectorSettingsForm,panelChurnSettingsForm"
                            oncomplete="return jbaraAfterSaveClick();" />
                        </div>
                    </div>
                </div>
                <div class="bottomRight">
                    <div class="bottomLeft">
                    </div>
                </div>
                <script>   
                    j$(".jbaraDummyAdoptionGroupNameSelectCtrl").bind("change",function() {
                        var hiddenAdoptionGroupName = j$(this).val()
                        if(hiddenAdoptionGroupName != 0){
                            j$(".theHiddenAdoptionGroupName").val(hiddenAdoptionGroupName);
                        }
                        else{
                            j$(".theHiddenAdoptionGroupName").val("");
                        }
                        j$(".theHiddenAdoptionGroupName").hide();                       
                    });
                    j$(".jbaraDummyNewAdoptionGroupName").bind("click",function() {
                        j$(".jbaraDummyAdoptionGroupNameSelectCtrl").val("0");                      
                        j$(".theHiddenAdoptionGroupName").show();
                        j$(".theHiddenAdoptionGroupName").val("");                      
                    });
                </script>
                
            </div>
        </apex:outputPanel>
        <!-- Admin Entry Form Container Ends Here-->
        
        
        <!-- Admin Feature Form Container Starts Here-->
         <apex:outputPanel id="panelNewAdminFeatureForm">
            <div class="overlayDialog inlineEditDialog jbaraDummyAdminFeatureInputForm bPageBlock"
            style="position: absolute; min-width: 800px; min-height: 220px; max-width: 800px; max-height: 300px; display: none;">
                <div class="topRight" style='cursor: move'>
                    <div class="topLeft">
                        <img src="/s.gif" class="dialogClose" onclick="jbaraCloseAdminFeatureInputForm()"
                        onmouseout="this.className = 'dialogClose'" onmouseover="this.className = 'dialogCloseOn'"
                        id="InlineEditDialogX" />
                        <h2 id="InlineEditDialogTitle">
                            Feature
                        </h2>
                        <span class="pbSubExtra" style='float: right; margin-right: 10px; margin-top: 15px'>
                            <span class="requiredLegend">
                                <span class="requiredExampleOuter">
                                    <span class="requiredExample">
                                        &nbsp;
                                    </span>
                                </span>
                                <span class="requiredMark">
                                    *
                                </span>
                                <span class="requiredText">
                                    = Required Information
                                </span>
                            </span>
                        </span>
                    </div>
                </div>
                <div class="middle" style="min-width: 680px; min-height: 280px;">
                    <div id="InlineEditDialogContent" class="innerContent">
                        <div class="activeField">
                            <div class="inlineEditCompoundDiv">
                                <apex:pageMessages id="jbaraAdminFeatureErrorMessages" />
                                <table class="rounded-corner" width="100%">
                                    <tbody>
                                        <tr>
                                            <td class="header" width="25%">
                                                  Feature Name:
                                                  <apex:outputPanel rendered="{!$ObjectType.JBCXM__Features__c.Fields.JBCXM__Feature__c.inlineHelpText != null}">
                                                      <span id="Feature-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                           <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"/>
                                                           <script type="text/javascript" >
                                                               sfdcPage.setHelp('Feature', '{!($ObjectType.Features__c.Fields.Feature__c.inlineHelpText)}');
                                                           </script>
                                                      </span>
                                                  </apex:outputPanel>
                                                </td>
                                                <td width="75%">
                                                    <apex:outputPanel styleClass="requiredInput" layout="block">
                                                       <apex:outputPanel styleClass="requiredBlock" layout="block" />
                                                            <apex:inputText value="{!featureName}" size="50" maxlength="120" StyleClass="jbaraDummyAdminFeatureInputCtrl featureInput"
                                                        />
                                                    </apex:outputPanel>
                                                </td>
                                        </tr>
                                        <tr>
                                            <td class="header" width="25%">
                                                  Product Name:
                                                  <apex:outputPanel rendered="{!$ObjectType.JBCXM__Features__c.Fields.JBCXM__Product__c.inlineHelpText != null}">
                                                      <span id="Product-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                           <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif" />
                                                           <script type="text/javascript" >
                                                               sfdcPage.setHelp('Product', '{!($ObjectType.Features__c.Fields.Product__c.inlineHelpText)}');
                                                           </script>
                                                      </span>
                                                  </apex:outputPanel>
                                                </td>
                                                <td width="75%">
                                                    <apex:outputPanel styleClass="requiredInput" layout="block">
                                                         <apex:outputPanel styleClass="requiredBlock" layout="block" /> 
                                                         <apex:selectList value="{!featuresProductName}" multiselect="false" size="1" StyleClass="jbaraDummyAdminFeatureSelectCtrl" >
                                                                <apex:selectOptions value="{!ProductOptions}" />
                                                         </apex:selectList>     
                                                         <span Class="jbaraDummyAddNewProductName" style="background-image: url('/img/alohaSkin/addTabs.png');height: 12px;width: 12px;display:inline-block;cursor:pointer;">&nbsp;</span>
                                                         <br/><apex:inputText value="{!featuresProductName}" Styleclass="theHiddenProductName"  style="display:none;margin-top:5px"/>
                                                    </apex:outputPanel>
                                                </td>
                                        </tr>
                                       <tr>
                                            <td class="header" width="25%">
                                                  System Name:
                                                  <apex:outputPanel rendered="{!$ObjectType.JBCXM__Features__c.Fields.JBCXM__SystemName__c.inlineHelpText != null}">
                                                      <span id="SystemName-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                           <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif" />
                                                           <script type="text/javascript" >
                                                               sfdcPage.setHelp('SystemName', '{!($ObjectType.Features__c.Fields.SystemName__c.inlineHelpText)}');
                                                           </script>
                                                      </span>
                                                  </apex:outputPanel>
                                                </td>
                                                <td width="75%">
                                                    <apex:outputPanel styleClass="requiredInput" layout="block">
                                                       <apex:outputPanel styleClass="requiredBlock" layout="block" />
                                                            <apex:inputText value="{!featuresSystemName}" size="30" maxlength="15" StyleClass="jbaraDummyAdminFeatureInputCtrl systemNameInput"
                                                        />
                                                    </apex:outputPanel>
                                                </td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                                
                            </div>
                        </div>
                        <div>
                        </div>
                        <div style="display: none;">
                        </div>
                        <div class="buttons" id="InlineEditDialog_buttons">
                            <input type="button" onclick="disableBtn(this);actionSaveAdminFeature()" value="Save"
                            class="btn dummyAllAdminSaveBtn btn-save"/>
                            <input type="button" onclick="jbaraCloseAdminFeatureInputForm()" value="Cancel"
                            class="btn btn-cancel"/>
                            <apex:actionFunction name="actionSaveAdminFeature" action="{!saveCustomerFeatureItem}" reRender="jbaraAdminFeatureErrorMessages,jsPanel,allAdminCategoryTypes"
                            oncomplete="return jbaraAfterFeatureSaveClick();" />
                        </div>
                    </div>
                </div>
                <div class="bottomRight">
                    <div class="bottomLeft">
                    </div>
                </div>
                <script>   
                    j$(".jbaraDummyAdminFeatureSelectCtrl").bind("change",function() {
                        var hiddenProductName = j$(this).val()
                        if(hiddenProductName != 0){
                            j$(".theHiddenProductName").val(hiddenProductName);
                        }
                        else{
                            j$(".theHiddenProductName").val("");
                        }
                        j$(".theHiddenProductName").hide();                     
                    });
                    j$(".jbaraDummyAddNewProductName").bind("click",function() {
                        j$(".jbaraDummyAdminFeatureSelectCtrl").val("0");                       
                        j$(".theHiddenProductName").show();
                        j$(".theHiddenProductName").val("");                        
                    });
                    j$(".notificationCheck").live("click", function() {
                        if(j$(".notificationCheck:checked").length > 0) {
                            j$(".enableNotifCheck").attr("checked","checked")
                        }
                        else {
                            j$(".enableNotifCheck").removeAttr("checked");
                        }
                    }); 
                </script>
                
            </div>
        </apex:outputPanel>

        <!-- Admin Transaction Line Items Form Container Starts Here-->
         <apex:outputPanel id="panelNewAdminTransactionLineItemsForm">
            <div class="overlayDialog inlineEditDialog jbaraDummyAdminTransactionLineInputForm bPageBlock"
            style="position: absolute; min-width: 800px; min-height: 220px; max-width: 800px; max-height: 300px; display: none;">
                <div class="topRight" style='cursor: move'>
                    <div class="topLeft">
                        <img src="/s.gif" class="dialogClose" onclick="jbaraCloseAdminTransactionLineInputForm()"
                        onmouseout="this.className = 'dialogClose'" onmouseover="this.className = 'dialogCloseOn'"
                        id="InlineEditDialogX" />
                        <h2 id="InlineEditDialogTitle">
                            Transaction Line Items
                        </h2>
                        <span class="pbSubExtra" style='float: right; margin-right: 10px; margin-top: 15px'>
                            <span class="requiredLegend">
                                <span class="requiredExampleOuter">
                                    <span class="requiredExample">
                                        &nbsp;
                                    </span>
                                </span>
                                <span class="requiredMark">
                                    *
                                </span>
                                <span class="requiredText">
                                    = Required Information
                                </span>
                            </span>
                        </span>
                    </div>
                </div>
                <div class="middle" style="min-width: 680px; min-height: 280px;">
                    <div id="InlineEditDialogContent" class="innerContent">
                        <div class="activeField">
                            <div class="inlineEditCompoundDiv">
                                <apex:pageMessages id="jbaraAdminTransactionLineItemsErrorMessages" />
                                <table class="rounded-corner" width="100%">
                                    <tbody>                                     
                                        <tr>
                                            <td class="header" width="25%">
                                                   <span id="Name-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                        Name:
                                                        <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"
                                                        />
                                                        <script type="text/javascript" >
                                                            sfdcPage.setHelp('Name', 'Name transaction line items.');
                                                        </script>
                                                    </span>
                                                </td>
                                                <td width="25%">
                                                    <apex:outputPanel styleClass="requiredInput" layout="block">
                                                       <apex:outputPanel styleClass="requiredBlock" layout="block" />
                                                            <apex:inputText value="{!transactionLineItemName}" size="50" maxlength="30" StyleClass="jbaraDummyAdminTransactionTypeInputCtrl subjectInput"
                                                        />
                                                    </apex:outputPanel>
                                                </td>
                                        </tr>
                                        <tr>
                                             <td class="header" width="25%">
                                                 Type:
                                                 <apex:outputPanel rendered="{!$ObjectType.JBCXM__TransactionType__c.Fields.JBCXM__Type__c.inlineHelpText != null}">
                                                   <span id="Type-_help" class="helpButton" onmouseover="setTimeout('setHelpZindex()',20)">
                                                       <img style="vertical-align: middle;" title="" class="helpOrb" alt="" src="/s.gif"
                                                       />
                                                       <script type="text/javascript" >
                                                           sfdcPage.setHelp('Type', '{!JSENCODE($ObjectType.TransactionType__c.Fields.Type__c.inlineHelpText)}');
                                                       </script>
                                                   </span>
                                                 </apex:outputPanel>
                                             </td>
                                             <td width="25%">
                                                  <apex:outputPanel styleClass="requiredInput" layout="block">
                                                        <apex:outputPanel styleClass="requiredBlock" layout="block" />
                                                        <apex:selectList value="{!transactionLineItemType}" multiselect="false" size="1" StyleClass="jbaraDummyAdminTransactionTypeSelectCtrl" >
                                                            <apex:selectOptions value="{!TransactionLineItemTypeOptions}" />
                                                        </apex:selectList>
                                                   </apex:outputPanel>
                                             </td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div>
                        </div>
                        <div style="display: none;">
                        </div>
                        <div class="buttons" id="InlineEditDialog_buttons">
                            <input type="button" onclick="disableBtn(this);actionSaveAdminTransactionLine()" value="Save"
                            class="btn dummyAllAdminSaveBtn btn-save"/>
                            <input type="button" onclick="jbaraCloseAdminTransactionLineInputForm()" value="Cancel"
                            class="btn btn-cancel"/>
                            <apex:actionFunction name="actionSaveAdminTransactionLine" action="{!saveTransactionTypeItem}" reRender="jbaraAdminTransactionLineItemsErrorMessages,jsPanel,allAdminCategoryTypes"
                            oncomplete="return jbaraAfterTransactionLineSaveClick();" />
                        </div>
                    </div>
                </div>
                <div class="bottomRight">
                    <div class="bottomLeft">
                    </div>
                </div>
            </div>
        </apex:outputPanel>
        <!-- Admin Transaction Line Items Form Container Ends Here-->



        <!-- Booking Types Map to Transaction Line Items Form Container Starts Here-->
         <apex:outputPanel id="panelNewAdminBookingTypesForm">
            <div class="overlayDialog inlineEditDialog jbaraDummyAdminBookingTypesInputForm bPageBlock"
            style="position: absolute; min-width: 800px; min-height: 220px; max-width: 800px; max-height: 300px; display: none;">
                <div class="topRight" style='cursor: move'>
                    <div class="topLeft">
                        <img src="/s.gif" class="dialogClose" onclick="jbaraCloseAdminBookingTypesInputForm()"
                        onmouseout="this.className = 'dialogClose'" onmouseover="this.className = 'dialogCloseOn'"
                        id="InlineEditDialogX" />
                        <h2 id="InlineEditDialogTitle" class='dummyBookingTypeName'>
                        Booking Types
                        </h2>
                        <span class="pbSubExtra" style='float: right; margin-right: 10px; margin-top: 15px'>
                            <span class="requiredLegend">
                                <span class="requiredExampleOuter">
                                    <span class="requiredExample">
                                        &nbsp;
                                    </span>
                                </span>
                                <span class="requiredMark">
                                    *
                                </span>
                                <span class="requiredText">
                                    = Required Information
                                </span>
                            </span>
                        </span>
                    </div>
                </div>
                <div class="middle" style="min-width: 680px; min-height: 280px;">
                    <div id="InlineEditDialogContent" class="innerContent">
                        <div class="activeField">
                            <div class="inlineEditCompoundDiv">
                                <apex:pageMessages id="jbaraAdminBookingTypesItemsErrorMessages" />

                                <table class="rounded-corner" width="100%" id ="tableSortable">
                                    <tbody>
                                       <apex:repeat value="{!OrderTypeListByBookingTypeId}" var="orderTypeTransLines" id="theRepeat">
                                            <tr>
                                                <td style="cursor:move;">
                                                    <div class="ui-icon ui-icon-arrowthick-2-n-s" style="display:inline;float:left;"></div>&nbsp;
                                                    <apex:inputCheckbox value="{!orderTypeTransLines.associated}" styleClass="jbaraDummyOrderType"/>&nbsp;{!orderTypeTransLines.transactionTypeName}
                                                    <apex:inputText value="{!orderTypeTransLines.transactionTypeId}" style="display:none"/>
                                                </td>
                                            </tr>
                                        </apex:repeat>
                                        <tr>
                                            <td>
                                                <apex:inputText value="{!orderBookingTypeMapIds}" style="display:none;" styleClass="jbaraDummyOrderBookingTypeMapIds"/>
                                                <apex:inputText value="{!bookingTypesTypeId}" style="display:none;" styleClass="jbaraDummyEditOrderId"/>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div>
                        </div>
                        <div style="display: none;">
                        </div>
                        <div class="buttons" id="InlineEditDialog_buttons">
                            <input type="button" onclick="disableBtn(this);saveAdminBookingTypes()" value="Save"
                            class="btn dummyAllAdminSaveBtn btn-save"/>
                            <input type="button" onclick="jbaraCloseAdminBookingTypesInputForm()" value="Cancel"
                            class="btn btn-cancel"/>
                            <apex:actionFunction name="actionSaveAdminBookingTypes" action="{!saveOrderTransactionMapItem}" reRender="jbaraAdminBookingTypesItemsErrorMessages,jsPanel,allAdminCategoryTypes"
                            oncomplete="return jbaraAfterAdminBookingSaveClick();" />
                        </div>
                    </div>
                </div>
                <div class="bottomRight">
                    <div class="bottomLeft">
                    </div>
                </div>
            </div>
        </apex:outputPanel>
      
        <!-- Events Configuration Settings Container Starts Here-->
                                <apex:outputPanel id="panelEventConfigSettingsForm">
                                    <div class="overlayDialog inlineEditDialog jbaraDummyEventConfigSettingsForm bPageBlock"
                                        style="position: absolute; min-width: 700px; min-height: 220px; max-width: 800px; max-height: 300px; display: none;">
                                        <div class="topRight" style='cursor: move'>
                                            <div class="topLeft">
                                                <img src="/s.gif" class="dialogClose" onclick="jbaraCloseOpportunityMapInputForm()" onmouseout="this.className = 'dialogClose'"
                                                    onmouseover="this.className = 'dialogCloseOn'" id="InlineEditDialogX" />
                                                <h2 id="InlineEditDialogTitle" class='dummyBookingTypeName'>
                                                    Events Configuration
                                                </h2>
                                            </div>
                                        </div>
                                        <div class="middle" style="min-width: 680px; min-height: 280px;">
                                            <div id="InlineEditDialogContent" class="innerContent">
                                                <div class="activeField">
                                                    <div class="inlineEditCompoundDiv">
                                                        <table width="100%" style="margin-bottom:15px;"  class="rounded-corner">
                                                            <tr>
                                                                <td class="header" width="25%">
                                                                    Integrate with Salesforce Events:
                                                                </td>
                                                                <td width="25%">
                                                                    <input class="rbtnSFEventForm" name="eventLinkTypeForm" type="radio" />
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td class="header" width="25%">
                                                                    Integrate with Gainsight Events:
                                                                </td>
                                                                <td width="25%">
                                                                    <input class="rbtnCSEventForm" name="eventLinkTypeForm" type="radio" />
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </div>
                                                <div style="display: none;"></div>
                                                <div class="buttons" id="InlineEditDialog_buttons">
                                                    <input type="button" onclick="disableBtn(this);saveEventConfigSettings();" value="Save" class="btn btn-save" />
                                                    <input type="button" onclick="jbaraCloseAdminInputForm()" value="Cancel" class="btn btn-cancel" />

                                                </div>
                                            </div>
                                        </div>
                                        <div class="bottomRight">
                                            <div class="bottomLeft"></div>
                                        </div>
                                    </div>
                                </apex:outputPanel>

                                <apex:outputPanel id="customerSearchSettingsForm">
                                    <div class="overlayDialog inlineEditDialog jbaraDummyCustomerSearchSettingsForm bPageBlock"
                                        style="position: absolute; min-width: 700px; min-height: 220px; max-width: 1200px; max-height: 600px; display: none;">
                                        <div class="topRight" style='cursor: move'>
                                            <div class="topLeft">
                                                <img src="/s.gif" class="dialogClose" onclick="jbaraCloseOpportunityMapInputForm()" onmouseout="this.className = 'dialogClose'"
                                                    onmouseover="this.className = 'dialogCloseOn'" id="InlineEditDialogX" />
                                                <h2 id="InlineEditDialogTitle" class='dummyBookingTypeName'>
                                                    Customer Search Config
                                                </h2>
                                            </div>
                                        </div>
                                        <div class="middle" style="min-width: 680px; min-height: 280px;">
                                            <div id="InlineEditDialogContent" class="innerContent">
                                                <div class="activeField">
                                                    <div class="inlineEditCompoundDiv">
                                                        <iframe src = "" frameBorder = "0" height = "500" width = "1100"/>
                                                    </div>
                                                </div>
                                                <div style="display: none;"></div>
                                            </div>
                                        </div>
                                        <div class="bottomRight">
                                            <div class="bottomLeft"></div>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                <!--Events Configuration Settings Container Ends Here-->


        <apex:outputPanel id="jsPanelOppConnectorSettingType">
            <apex:outputPanel rendered="{!renderOppConnectorSettingsForm}">
                <script type="text/javascript">
                    function jbaraShowOppConnectorSettingsAdminForm(dummyClass,settingType){
                        j$("span[id*='jbaraAdminOppConnectorSettingsErrorMessages']").html("").hide();
                        jbaraAllInputform(dummyClass);
                        if(settingType=='Opportunity'){
                            j$("tr.churnSettingsCls").hide();
                            j$("tr.oppConnectorSettingsCls").show();
                        }else{
                            j$(".dummySettingsTypeName").html("{!JSENCODE(transOTPLNameMapBySysNameAdmin['Churn'])} Settings");
                            j$("tr.oppConnectorSettingsCls").hide();
                            j$("tr.churnSettingsCls").show();
                        }
                        j$(".dummyAllAdminOppConnectorSettingsSaveBtn").removeAttr("disabled");
                        j$(".dummyAllAdminOppConnectorSettingsSaveBtn").removeClass("btnDisabled").addClass("btn");
                    }
                </script>
            </apex:outputPanel>

        </apex:outputPanel>

        <apex:outputPanel id="jsPanelChurnBOPSettingType">
            <apex:outputPanel rendered="{!renderChurnBOPForm}">
                <script type="text/javascript">
                    if(j$('.checkboxChurnBOPInput:checked').val() == 'on'){
                        j$('#churnBOPSettingsId').show();
                    }
                    function jbaraShowChurnBOPSettingsAdminForm(dummyClass){
                        j$("span[id*='jbaraAdminOppConnectorSettingsErrorMessages']").html("").hide();
                        jbaraAllInputform(dummyClass);
                        if(settingType=='Opportunity'){
                            j$("tr.churnSettingsCls").hide();
                            j$("tr.oppConnectorSettingsCls").show();
                        }else{
                            j$("tr.oppConnectorSettingsCls").hide();
                            j$("tr.churnSettingsCls").show();
                            toggleChurnBOPTable();
                        }
                        j$(".dummyAllAdminOppConnectorSettingsSaveBtn").removeAttr("disabled");
                        j$(".dummyAllAdminOppConnectorSettingsSaveBtn").removeClass("btnDisabled").addClass("btn");
                    }

                    function toggleChurnBOPTable(){
                        if(j$('.checkboxChurnBOPInput:checked').val() == 'on'){
                            j$('#churnBOPSettingsId').show();
                        }else{
                            j$('#churnBOPSettingsId').hide();
                        }
                    }

                    /**
                    *This function populate's the ASV Based on the MRR.
                    */
                    function populateASV(thisPointer) {
                        inputVal = j$(thisPointer).val();
                        if(!isNaN(inputVal) && inputVal.length > 0) {
                            j$(thisPointer).parent().parent().find("td .churnBOPASV").val((inputVal*12).toFixed(2));
                            j$(thisPointer).val((inputVal*1).toFixed(2));
                        }
                        else {
                            j$(thisPointer).parent().parent().find("td .churnBOPASV").val('');
                        }
                    }

                    /**
                    *This function populate's the MRR Based on the ASV.
                    */
                    function populateMRR(thisPointer) {
                        inputVal = j$(thisPointer).val();
                        if(!isNaN(inputVal) && inputVal.length > 0) {
                            j$(thisPointer).parent().parent().find("td .churnBOPMRR").val((inputVal/12).toFixed(2));
                            j$(thisPointer).val((inputVal*1).toFixed(2));
                        }
                        else {
                            j$(thisPointer).parent().parent().find("td .churnBOPMRR").val('');
                        }
                    }
                    j$('.churnBOPItemVal').keyup(function () {
                        this.value = this.value.replace(/[^0-9\.]/g,'');
                    });
                    j$('.churnBOPItemValNum').keyup(function () {
                        this.value = this.value.replace(/[^0-9]/g,'');
                    });
                </script>

            </apex:outputPanel>

        </apex:outputPanel>

        <apex:outputPanel id="jsAfterSaveAppSettings">
            <script type="text/javascript">
                    if ({!oppConnectorSettingsValid}) {
                        j$(".jbaraDummyOverLayForm").hide();
                        j$(".jbaraDummyAdminOppConnectorSettingsForm").hide();
                        j$(".jbaraDummyAdminChurnSettingsForm").hide();
                    }else{
                        j$(".dummyAllAdminOppConnectorSettingsSaveBtn").removeAttr("disabled");
                        j$(".dummyAllAdminOppConnectorSettingsSaveBtn").removeClass("btnDisabled").addClass("btn");
                    }
            </script>
        </apex:outputPanel>

        <!-- jspanels for opportunity connector Ends here -->

    </apex:form>
     <apex:outputPanel id="UserStatePanel">
        <script type="text/javascript">
            statePreservString      = eval({!(userStateDetailsJsonAdmin)});
        </script>
     </apex:outputPanel>
     <apex:form >
        <apex:actionFunction name="actionUpdateStatePreservation" action="{!saveExistingUserStateOnAdmin}" reRender="UserStatePanel" oncomplete="return null;" >
             <apex:param name="stateJSON" value="" />
        </apex:actionFunction>
    </apex:form>

    <div id="reportBuilder" title="Choose an option" style="display:none;">
         <a href = "ReportBuilder" class="rb_reportBuilder"> Take me to the New Report Builder</a><br/><br/>
        <a href = "ChurnAnalyticsDashboard" class="rb_reportBuilder"> Take me to the Old Report Builder</a>
    </div>
                </div>
        </div>
    </div>

    <script>
        var GSGA = {
            orgId: "{!$Organization.Id}",
            orgName: "{!$Organization.Name}",
            userName: "{!$User.FirstName}"+" "+"{!$User.LastName}"
        };
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
    <script src="{!JSENCODE(URLFOR($Resource.CustomJS,'CustomJS/analyticsWrapper.js'))}"></script>

</apex:page>