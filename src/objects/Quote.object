<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CreatePdf</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CreatePdf</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CreatePdf</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>EmailQuote</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>EmailQuote</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>EmailQuote</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>NewQuote</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>NewQuote</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>NewQuote</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SyncQuote</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SyncQuote</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SyncQuote</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <enableFeeds>false</enableFeeds>
    <externalSharingModel>ControlledByParent</externalSharingModel>
    <fields>
        <fullName>AccountId</fullName>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>AdditionalName</fullName>
    </fields>
    <fields>
        <fullName>BillingName</fullName>
    </fields>
    <fields>
        <fullName>ContactId</fullName>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ContractId</fullName>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Description</fullName>
    </fields>
    <fields>
        <fullName>Discount</fullName>
    </fields>
    <fields>
        <fullName>Email</fullName>
    </fields>
    <fields>
        <fullName>ExpirationDate</fullName>
    </fields>
    <fields>
        <fullName>Fax</fullName>
    </fields>
    <fields>
        <fullName>GrandTotal</fullName>
    </fields>
    <fields>
        <fullName>IsSyncing</fullName>
    </fields>
    <fields>
        <fullName>LineItemCount</fullName>
    </fields>
    <fields>
        <fullName>Name</fullName>
    </fields>
    <fields>
        <fullName>OpportunityId</fullName>
        <type>MasterDetail</type>
    </fields>
    <fields>
        <fullName>OwnerId</fullName>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Phone</fullName>
    </fields>
    <fields>
        <fullName>QuoteToName</fullName>
    </fields>
    <fields>
        <fullName>ShippingHandling</fullName>
    </fields>
    <fields>
        <fullName>ShippingName</fullName>
    </fields>
    <fields>
        <fullName>Status</fullName>
        <type>Picklist</type>
    </fields>
    <fields>
        <fullName>Subtotal</fullName>
    </fields>
    <fields>
        <fullName>Tax</fullName>
    </fields>
    <fields>
        <fullName>TotalPrice</fullName>
    </fields>
    <fields>
        <fullName>netsuite_conn__Celigo_Account__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Account</label>
        <referenceTo>Account</referenceTo>
        <relationshipLabel>Quotes</relationshipLabel>
        <relationshipName>Quotes</relationshipName>
        <required>false</required>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>netsuite_conn__Celigo_Update__c</fullName>
        <defaultValue>false</defaultValue>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Celigo Update</label>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>netsuite_conn__Document_Id__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Document Id</label>
        <length>255</length>
        <required>false</required>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>netsuite_conn__Handling_Cost__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Handling Cost</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>netsuite_conn__NetSuite_Id__c</fullName>
        <caseSensitive>false</caseSensitive>
        <deprecated>false</deprecated>
        <externalId>true</externalId>
        <label>NetSuite Id</label>
        <length>255</length>
        <required>false</required>
        <type>Text</type>
        <unique>true</unique>
    </fields>
    <fields>
        <fullName>netsuite_conn__NetSuite_Quote_Number__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>NetSuite Quote #</label>
        <length>255</length>
        <required>false</required>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>netsuite_conn__NetSuite_Sync_Err__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>NetSuite Sync Error</label>
        <length>131072</length>
        <type>Html</type>
        <visibleLines>10</visibleLines>
    </fields>
    <fields>
        <fullName>netsuite_conn__PDF_File__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <formula>IF( netsuite_conn__Document_Id__c == null , &apos;&apos;, HYPERLINK(&apos;/servlet/servlet.FileDownload?file=&apos; + netsuite_conn__Document_Id__c , Name + &apos;.pdf&apos;))</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>NetSuite PDF File</label>
        <required>false</required>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>netsuite_conn__Push_To_NetSuite__c</fullName>
        <defaultValue>false</defaultValue>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Push To NetSuite</label>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>netsuite_conn__Pushed_From_NetSuite__c</fullName>
        <defaultValue>false</defaultValue>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Pushed From NetSuite</label>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>netsuite_conn__Sync_In_Progress__c</fullName>
        <defaultValue>false</defaultValue>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Sync In Progress</label>
        <type>Checkbox</type>
    </fields>
    <listViews>
        <fullName>mine</fullName>
        <columns>QUOTE.NAME</columns>
        <columns>OPPORTUNITY.NAME</columns>
        <columns>QUOTE.ISSYNCING</columns>
        <columns>QUOTE.EXPIRATIONDATE</columns>
        <columns>QUOTE.SUBTOTAL</columns>
        <columns>QUOTE.TOTALPRICE</columns>
        <filterScope>Mine</filterScope>
        <label>My Quotes</label>
    </listViews>
    <searchLayouts>
        <customTabListAdditionalFields>QUOTE.NAME</customTabListAdditionalFields>
        <customTabListAdditionalFields>OPPORTUNITY.NAME</customTabListAdditionalFields>
        <customTabListAdditionalFields>QUOTE.ISSYNCING</customTabListAdditionalFields>
        <customTabListAdditionalFields>QUOTE.EXPIRATIONDATE</customTabListAdditionalFields>
        <customTabListAdditionalFields>QUOTE.SUBTOTAL</customTabListAdditionalFields>
        <customTabListAdditionalFields>QUOTE.TOTALPRICE</customTabListAdditionalFields>
        <lookupDialogsAdditionalFields>QUOTE.NAME</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>OPPORTUNITY.NAME</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>QUOTE.ISSYNCING</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>QUOTE.EXPIRATIONDATE</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>QUOTE.SUBTOTAL</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>QUOTE.TOTALPRICE</lookupDialogsAdditionalFields>
        <lookupPhoneDialogsAdditionalFields>QUOTE.NAME</lookupPhoneDialogsAdditionalFields>
        <lookupPhoneDialogsAdditionalFields>OPPORTUNITY.NAME</lookupPhoneDialogsAdditionalFields>
        <lookupPhoneDialogsAdditionalFields>QUOTE.ISSYNCING</lookupPhoneDialogsAdditionalFields>
        <lookupPhoneDialogsAdditionalFields>QUOTE.EXPIRATIONDATE</lookupPhoneDialogsAdditionalFields>
        <lookupPhoneDialogsAdditionalFields>QUOTE.SUBTOTAL</lookupPhoneDialogsAdditionalFields>
        <lookupPhoneDialogsAdditionalFields>QUOTE.TOTALPRICE</lookupPhoneDialogsAdditionalFields>
        <lookupPhoneDialogsAdditionalFields>QUOTE.PHONE</lookupPhoneDialogsAdditionalFields>
        <searchResultsAdditionalFields>QUOTE.NAME</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>OPPORTUNITY.NAME</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>QUOTE.ISSYNCING</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>QUOTE.EXPIRATIONDATE</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>QUOTE.SUBTOTAL</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>QUOTE.TOTALPRICE</searchResultsAdditionalFields>
    </searchLayouts>
    <sharingModel>ControlledByParent</sharingModel>
    <webLinks>
        <fullName>netsuite_conn__Create_NetSuite_Order</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Create NetSuite Order</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>var Celigo = {};
	Celigo.SFDC = (function() {
		var opportunitySyncManager = function() {
			this.triggerSync = function() {
			this.openPopup();
			};

			this.openPopup = function() {
				var top = screen.height - (screen.height * .7) - 80,
				left = screen.width - (screen.width * .65) - 87,
				params = &apos;dependent = yes,resizable=yes,scrollbars=false,toolbar=false,menubar=false,location=false,status=true,directories=false,width=575,height=200,top=&apos;;

				params += top.toString();
				params += &apos;,left=&apos; + left.toString() + &apos;\&apos;&apos;;


				{!REQUIRESCRIPT(&quot;/soap/ajax/32.0/connection.js&quot;)} 
				var resultOppStting = sforce.connection.query(&quot;select netsuite_conn__Account_Id__c from netsuite_conn__Opportunity_Sync_Settings__c where Name = \&apos;Opportunity Sync Settings\&apos;&quot;);
				var rocordsOppStting = resultOppStting.getArray(&quot;records&quot;);
				var selectedId = (rocordsOppStting[0].netsuite_conn__Account_Id__c).split(&apos;$$$&apos;)[0];
				var selectedValue = (rocordsOppStting[0].netsuite_conn__Account_Id__c).split(&apos;$$$&apos;)[1];
				
				var oppId_results = sforce.connection.query(&quot;select OpportunityId from Quote where Id =&apos;{!Quote.Id}&apos;&quot;); 
				var oppId = oppId_results.getArray(&quot;records&quot;)[0][&apos;OpportunityId&apos;]; 

				var opp_results = sforce.connection.query(&quot;select Id,SyncedQuoteId,StageName,netsuite_conn__Originated_From_NetSuite__c,&quot;+selectedId+&quot; from Opportunity where Id =&apos;&quot; + oppId + &quot;&apos;&quot;);
				var opportunityRecord = opp_results.getArray(&quot;records&quot;)[0];

				if (!opportunityRecord) {
					alert(&apos;Could not find the Opportunity related to this Quote with opportunity id: &apos; + oppId);
					return;
				}
				//validations on SyncedQuote
				if (!opportunityRecord.SyncedQuoteId ||
				opportunityRecord.SyncedQuoteId.toString().indexOf(&apos;{!Quote.Id}&apos;) &lt; 0) {
					alert(&apos;The Quote is not in sync with Opportunity it is created on. NetSuite Sales Order can be created only when Quote and Opportunity are in sync.&apos;);
					return;
				}

				if (!opportunityRecord[selectedId]) {
					alert(&quot;Please select &quot;+selectedValue+&quot; on the Opportunity of this Quote to start the sync.&quot;);
					return;
				}
				if (opportunityRecord.netsuite_conn__Originated_From_NetSuite__c === &apos;1&apos;) {
					alert(&quot;Opportunity on this Quote is created from NetSuite Sales Order, can not create another Sales Order.&quot;);
					return;
				}
				var quoteId = &quot;{!Quote.Id}&quot;;
				var popup_window = window.open(&apos;/apex/netsuite_conn__Opportunity_Sync?whence=&apos;+ oppId, &apos;NetSuite_Synchronization&apos;+ quoteId, params); 
				
				var intervalId = window.setInterval(function(){	
					if(popup_window.closed){ 
						window.clearInterval(intervalId); 
						window.location.reload(); 
					} 
				},1000); 
			};
		};
		return {
			main: function() {
				Celigo.opportunitySyncMgr = new opportunitySyncManager();
				Celigo.opportunitySyncMgr.triggerSync();
			}
		};
	})();
	Celigo.SFDC.main();</url>
    </webLinks>
    <webLinks>
        <fullName>netsuite_conn__Sync_To_NetSuite</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Sync To NetSuite Quote</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>var Celigo = {};
	Celigo.SFDC = (function() {
		var QuoteSyncManager = function() {
			this.triggerSync = function() {
				this.openPopup();
			};

			this.openPopup = function(){

				var top = screen.height - (screen.height * 0.7) - 80,
				left = screen.width - (screen.width * 0.65) - 87,
				params = &apos;dependent = yes,resizable=yes,scrollbars=false,toolbar=false,menubar=false,location=false,status=true,directories=false,width=575,height=200,top=&apos;;

				params += top.toString();
				params += &apos;,left=&apos; + left.toString() + &apos;\&apos;&apos;;

				{!REQUIRESCRIPT(&quot;/soap/ajax/32.0/connection.js&quot;)}
				
				//Flow enable/disable check starts
				
				var resultQuoteSetting = sforce.connection.query(&quot;select netsuite_conn__Account_Id__c from netsuite_conn__Quote_Sync_Settings__c where Name = \&apos;Quote Sync Settings\&apos;&quot;); 
				var recQuoteSetting = resultQuoteSetting.getArray(&quot;records&quot;)[0];
				var selectedId = recQuoteSetting.netsuite_conn__Account_Id__c.split(&apos;$$$&apos;)[0];
				var selectedValue = recQuoteSetting.netsuite_conn__Account_Id__c.split(&apos;$$$&apos;)[1];
				
				var queryRTS = &quot;select Id, integrator_da__SObject_Type__c, integrator_da__Disabled__c from integrator_da__Real_Time_Sync__c where integrator_da__SObject_Type__c = \&apos;quote\&apos; AND integrator_da__Connector_Id__c = \&apos;snc\&apos;&quot;;
				var resultRTSync = sforce.connection.query(queryRTS);
				var recordsRTSync = resultRTSync.getArray(&quot;records&quot;);
				
				if(recordsRTSync &amp;&amp; recordsRTSync.length != 1 || recordsRTSync[0].integrator_da__Disabled__c == &quot;true&quot;){
					alert(&apos;Salesfoce Quote to Quote flow is disabled or connector is paused.&apos;);
					return;
				}
				
				//Flow enable/disable check ends
				
				var queryQuote = &quot;select &quot;+selectedId+&quot; from Quote where Id = &apos;&quot;+ &quot;{!Quote.Id}&quot; +&quot;&apos;&quot;;
				var resQuote = sforce.connection.query(queryQuote);
				var recQuote = resQuote.getArray(&quot;records&quot;)[0];
				
				var isTestingModeAndEndTheFlow = false;
				var syncSpecificCustomSettingResult = sforce.connection.query(&quot;select Id, netsuite_conn__Enable_Testing_Mode__c, netsuite_conn__Criteria_Text__c from netsuite_conn__Specific_Records_Sync_Settings__c where Name = \&apos;Specific Records Sync Settings\&apos;&quot;, {
					onSuccess : function(syncSpecificCustomSettingResult) {
						var syncSpecificCustomSetting = syncSpecificCustomSettingResult.getArray(&quot;records&quot;);
						if (syncSpecificCustomSetting &amp;&amp;
						syncSpecificCustomSetting.length &gt; 0 &amp;&amp;
						syncSpecificCustomSetting[0].netsuite_conn__Enable_Testing_Mode__c == &quot;true&quot;) {
							var description = &quot;{!JSENCODE(Quote.Description)}&quot;;
							var criteriaText = syncSpecificCustomSetting[0].netsuite_conn__Criteria_Text__c;
							if (criteriaText) {
								criteriaText = criteriaText.toLowerCase();
							}
							if (!description || 
							(description &amp;&amp;
							description.toLowerCase().indexOf(criteriaText) == -1)) {	
								isTestingModeAndEndTheFlow = true;
								alert(&quot;Connector is running in Testing mode. Please make sure, Description field on Account, Opportunity &amp; Quote contains &quot; + syncSpecificCustomSetting[0].netsuite_conn__Criteria_Text__c + &quot;.&quot;);
							}
						}
						if (isTestingModeAndEndTheFlow === true) {
							return;
						}
						var result = sforce.connection.query(&quot;select Id from quote where Id = &apos;&quot;+ &quot;{!Quote.Id}&quot; +&quot;&apos;&quot;, {
							onSuccess: function(result) {
								if (selectedId == &quot;netsuite_conn__Celigo_Account__c&quot; &amp;&amp; !&quot;{!Quote.netsuite_conn__Celigo_Account__c}&quot;) {
									alert(&quot;Please select an Account on the Opportunity, then edit and save the quote and try to sync.&quot;);
									return;
								}else if(selectedId != &quot;netsuite_conn__Celigo_Account__c&quot; &amp;&amp; !recQuote[selectedId]){
									alert(&quot;Please select &quot;+selectedValue+&quot;, then edit and save the quote and try to sync.&quot;);
									return;
								}
								var records = result.getArray(&quot;records&quot;);
								var quoteId = &quot;{!Quote.Id}&quot;;
								var popup_window = window.open(&apos;/apex/netsuite_conn__Quote_Sync?whence=&apos;+&quot;{!Quote.Id}&quot;, &apos;NetSuite_Synchronization&apos;+ quoteId, params);
								
								var intervalId = window.setInterval(function(){	
									if(popup_window.closed){ 
										window.clearInterval(intervalId); 
										window.location.reload(); 
									} 
								},1000); 
							},
							onFailure: function(error) {
								alert(&apos;Error occurred: &apos; + JSON.stringify(error));
							}
						});	
					},
					onFailure : function(error) {
						alert(&apos;Error occurred: &apos; + JSON.stringify(error));
						isTestingModeAndEndTheFlow = true;
					}
				}); 
			};
		};

		return {
			main : function() {
				Celigo.quoteSyncMgr = new QuoteSyncManager();
				Celigo.quoteSyncMgr.triggerSync();
			}
		};
	})();
	Celigo.SFDC.main();</url>
    </webLinks>
</CustomObject>
